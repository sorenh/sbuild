commit 9aad77c86b398df1a9b3afc9e7cafd17754e5341
Author: Soren Hansen <soren@overcastcloud.com>
Date:   Mon Sep 21 13:09:16 2015 +0000

    Make format native

commit eb57d0a09b629c3b28b9554f4dc5262b87bc4da7
Author: Soren Hansen <soren@overcastcloud.com>
Date:   Fri Aug 14 12:33:32 2015 +0000

    Revert "handle native arch qualifiers in build-deps"
    
    This reverts commit d4c137190b44e510f8c1f27ea3a6f6a08b5268b7.

commit a0a5449570311d214dd09a1b89f9eac1c007f1f1
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Wed Aug 12 21:19:45 2015 +0200

    Cleanup uploader code
    
    Signed-off-by: Aurelien Jarno <aurelien@aurel32.net>

commit d6f12f0c373e6a9ce12ee712ebc025416b58646b
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Wed Aug 12 17:17:38 2015 +0200

    Use --arch-all-only when building an arch:all package
    
    Signed-off-by: Aurelien Jarno <aurelien@aurel32.net>

commit fec82ed70d7efdfe17f676c60e1114bd8bb4a888
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Wed Aug 12 15:23:55 2015 +0200

    Add a new --arch-all-only option
    
    Used to build arch:all packages or only the arch:all packages of all+any package.
    
    Signed-off-by: Aurelien Jarno <aurelien@aurel32.net>

commit b5234f1d9fd8311b716364dff68e598e09db54b2
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Tue Aug 11 11:25:21 2015 +0200

    Pass the correct architecture to wanna-build when uploading packages
    
    Signed-off-by: Aurelien Jarno <aurelien@aurel32.net>

commit 367395490888ab6fdac8a7d4ce151d0018d74355
Author: Christoph Egger <christoph@christoph-egger.org>
Date:   Thu Jul 30 10:55:48 2015 +0200

    Add support for jessie-kfreebsd suites
    
      Update the $CHROOT_ALIAS globs to match jessie-kfreebsd suite (which
      have one extra dash in them compared to the relative "normal" suites)
    
    Signed-off-by: Héctor Orón Martínez <zumbi@debian.org>

commit 60806e10ea34d61f69de1c8c457e8c96aa338d38
Author: Colin Watson <cjwatson@ubuntu.com>
Date:   Mon Jul 13 12:34:12 2015 +0100

    sbuild: Autoflush stdout even in --nolog mode
    
    The output from sbuild --nolog may be sent to a log file in some other
    way, and in such cases it's useful for it to be autoflushed rather than
    block-buffered so that the log file remains current.

commit 1efcd10bfdb3ecf256934b4bbd3c6bf1fa33a5c9
Author: Colin Watson <cjwatson@ubuntu.com>
Date:   Wed Apr 15 11:25:40 2015 -0500

    sbuild: Fix handling of exceptions while setting up chroot
    
    If chroot setup fails before creating the dependency resolver, then
    foreign-architecture information will not be available and attempting to
    fetch it in generate_stats will crash, causing sbuild to hang.  Handle
    this case.

commit 9619d42ac2a4a904d1851a9044c6c0c1da1434a1
Author: Colin Watson <cjwatson@ubuntu.com>
Date:   Tue Apr 14 09:29:28 2015 -0500

    sbuild: Don't sign dummy archive if apt_allow_unauthenticated is set
    
    In this mode, apt isn't going to check the signature anyway, so there's
    no point requiring key generation.

commit e09b55bf011bc3e7f803b34a45c0d797d66c0f42
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Tue Mar 24 14:21:50 2015 +0100

    changelog for 0.65.2-1

commit 7ec60100ee315e130e8771d4268debc3eaeff9af
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Tue Mar 24 10:08:33 2015 +0100

    lib/Sbuild/Build.pm: only list content for deb/udeb files.

commit 7d6ae7a65a491e2c4c3d0d7d19aff348da5bd69f
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Wed Mar 18 23:45:23 2015 +0100

    Update changelog.

commit 2a00172fd8b83fc4db32443c4fe06ec0852d5ea2
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Wed Mar 18 23:42:50 2015 +0100

    sbuild-createchroot: set profile=sbuild also for tar-based chroots
    
    Bug: https://bugs.debian.org/769289

commit 7b38c2c95c87b6c1184114491ad186824e134eec
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Wed Feb 25 20:56:04 2015 +0100

    Update changelog.

commit 07c04c8f6d7c5b78cdf42bf3499da6477b3e5e3f
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Wed Feb 25 20:48:56 2015 +0100

    sbuild-dumpconfig: sort keys of dumped hashes
    
    With the patch the generated configuration file and man page no longer
    change with each invokation of sbuild-dumpconfig.
    
    Thanks to Reiner Herrmann for the patch.
    
    Bug: https://bugs.debian.org/778482
    Bug: https://bugs.debian.org/764504

commit ec40e3698d197564617a003c279696e130439333
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Wed Feb 25 20:42:54 2015 +0100

    NEWS: Bump version to 0.65.2.

commit aac4bb664cc83f462fba7852ce5c2419ddaaa4f2
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Tue Feb 24 23:14:20 2015 +0100

    db/Makefile.am: Add missing backslash.

commit b3401647eea5ba00f951d39a3a89cfb36c5aedaf
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Tue Feb 24 23:01:06 2015 +0100

    changelog for 0.65.1-1

commit 5802ca035a774f7d9fc870a45a47fd0d2525f702
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Tue Feb 24 18:22:36 2015 +0100

    sbuild.1: document --mailfrom and --sbuild-mode options
    
    The new options were introduced in ce90f5414edf267dc14282cd04caeda2c2ede8e9

commit edb450c668e85ef06f899f624b4c4663f14ba325
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Thu Feb 19 23:19:34 2015 +0100

    Include all files in the distribution tarball.

commit d4c137190b44e510f8c1f27ea3a6f6a08b5268b7
Author: Johannes Schauer <j.schauer@email.de>
Date:   Fri Feb 6 14:37:11 2015 +0100

    handle native arch qualifiers in build-deps
    
    sbuild turns build dependencies into the dependencies of a dummy binary
    package. Since binary package dependencies do not support the :native
    architecture qualifier, these have to either be removed during native
    compilation or replaced by the build (native) architecture during cross
    building.
    
    Reference: https://bugs.debian.org/777216

commit b109a9de75c5db13d8ba989df042a65c0e825ff0
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Thu Feb 12 22:34:53 2015 +0100

    debian/control: Do not (Build-)Depend on perl-modules
    
    The perl-modules package is an implementation detail of the perl
    packaging. Packages should not depend on it, but only on perl itself.

commit 63749d9d9cd27f6721fb15e45505d11fbf9322fc
Merge: 8b8b078 7a5163e
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Thu Feb 12 22:11:44 2015 +0100

    Merge branch 'features'

commit 8b8b0787d7f35baf0ec4fbe598e406263782406e
Merge: 448e45c 9cc9ccc
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Thu Feb 12 22:11:19 2015 +0100

    Merge branch 'updates-to-maintainer-scripts'

commit 448e45c571a8f75caa87b1c6bb6c2480b7521f4e
Merge: e0d10b3 ea8ad2e
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Thu Feb 12 00:28:56 2015 +0100

    Merge branch 'updates-to-create-chroot'

commit e0d10b3e3e2ed302048dcb686f7555d8add36537
Merge: a67baea d60caa9
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Thu Feb 12 00:28:43 2015 +0100

    Merge branch 'updates-to-99builddsourceslist'

commit d60caa9cf4ff6d1c97a7c12606154a0b751773c9
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Wed Feb 11 23:43:04 2015 +0100

    Do not install 99builddsourceslist
    
    This file is very specific to Debian and not helpful in general.

commit 7a5163e28d396413a82759eabd37147078fdae2d
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Wed Feb 11 23:38:50 2015 +0100

    Remove changelog entries from uploads to private buildd archive

commit 9760c6a3a4f815f6336bef071469749c915f5f63
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Thu May 23 22:24:02 2013 +0200

    don't force mailto to be set in .sbuildrc
    
    (cherry picked from commit c173a94e4f48bc28dbf2c356e6b6f5f4a6227884)

commit d7bd88a6395312377f659098348e445dc8482dcc
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Wed Feb 11 23:01:34 2015 +0100

    Require schroot version 1.6.0 or later.
    
    Taken from commit d3ab9d32809fbf2d4d5dfd504f81423198f24775

commit ce90f5414edf267dc14282cd04caeda2c2ede8e9
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Jun 2 10:49:05 2013 +0200

    allow to set maintainer_name and mailfrom in the distribution setting
    in .builddrc (or in $default), and always set sbuild_mode=buildd, so
    .sbuildrc doesn't need to exist (unless it contains
    %individual_stalled_pkg_timeout )
    
    (cherry picked from commit a775c5af792f492a7fd6367715f70fbe30a59175)

commit 5ccb3559b0ccbbac7c359c74d6a71321d8d5f9b9
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Tue May 21 00:18:12 2013 +0200

    get mail targets from wanna-build, and allow to set mail_log_also for additional recipients
    
    (cherry picked from commit bf209107a75670284a8bde455282ce238456a41a)

commit 5827300296528fb6c2e650022215a5cd32985d10
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Mon May 20 23:44:47 2013 +0200

    allow to specify minimum age of packages
    
    (cherry picked from commit 62593e06d33d93282d3b460eb750d2102d92516f)

commit 9cc9ccc557c14089d2ba93835b5e4a4c2876fef6
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun May 19 20:16:56 2013 +0200

    auto-upgrade the buildd chroot configuration during upgrade
    
    (cherry picked from commit 78fc946a6dc3a67539044c7275a30af376af7697)

commit 10927b857c3eac10b8001c0ece0fc020408b26ad
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun May 19 20:05:40 2013 +0200

    succesfully (un)install the package if the account database is not local
    
    (cherry picked from commit d2a56b4486602fc00219c51466e184f3608cc7bc)

commit a70de7a7ea1d7f227a211c83a8ce5ca3a0d6b3c2
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Mar 19 14:48:31 2011 +0100

    debian: Update buildd maintainer scripts
    
    (cherry picked from commit 55325edec90d132a65d8af682bb06d637a57648e)

commit ea8ad2e2f42efc61569193a58391c24e0ed5c615
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Tue Aug 19 02:10:13 2014 +0200

    bin/create-chroot: don't add sudo in debfoster keepers
    
    (cherry picked from commit 9859cfd32d6ef36f8bc18c2a0f7dcf949e630c94)

commit 14139873686d79e08d0f84393b25b6cc7f25f9ed
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Mon Aug 18 18:22:53 2014 +0200

    bin/create-chroot: don't install sudo in the chroot, we now use fakeroot by default
    
    (cherry picked from commit 7241b6b3792a0166aaaf401c1d26983b930492bf)

commit 1dff84941e8294158a1a4346996556d39bcf8d3c
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Dec 29 14:58:09 2013 +0100

    bin/create-chroot: use ext4 instead of ext3
    
    (cherry picked from commit 27d8c4be472c38d784cd768f60981d4d6f898a4e)

commit 7998cd0a6ba9ff57bb350a86a163a23c1461e506
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Tue May 21 19:33:24 2013 +0200

    remove suite aliases on chroot creation except for experimental
    
    (cherry picked from commit 9107f1b3f05e2cdd84b2f6d1e27e54e328dda8a7)

commit 87647714443aa6b4e9fb83d632d9176d517c66b9
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun May 19 22:25:28 2013 +0200

    bin/create-chroot: remove lenny / volatile remainings
    
    (cherry picked from commit 68318e9841342ac5e71b4523b908d46f5d2becdd)
    
    Conflicts:
    	bin/create-chroot

commit 737cc1d3797fea4dd7403ed5a2ef63bc40cc8e2f
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu May 16 22:19:56 2013 +0100

    bin/create-chroot: Add
    
    (cherry picked from commit 288b3147b38ab441f44b205b9e38957efe99277f)

commit 3ac05c1d8f0303ef12d5036fb2edaaf75727e86b
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Wed Feb 11 22:16:45 2015 +0100

    Remove changelog entry from upload to private buildd archive

commit c7f8f1b4f7f1f5f1c759b034b8d7d9cd6c95ce1c
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Wed Aug 13 17:45:58 2014 +0200

    99builddsourceslist: stop using incoming.debian.org/debian
    
    (cherry picked from commit a2e085c8f2114adc9e3058cca616bf5fe622f335)

commit 8544d5c032459163780849480b044ad69bdef590
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Wed Aug 13 18:53:43 2014 +0200

    99builddsourceslist: add +([^-])-kfreebsd-*-sbuild*
    
    sid-kfreebsd-amd64-sbuild would be matched by *-*-*-sbuild*, but is
    not of the form SUITE-proposed-updates-sbuild*. Adding an extra case
    avoids this.
    
    (cherry picked from commit b4a653e2b43de1e3fd81d61b59e3ca5a93ee8060)

commit b933985a9665f6a349e822a1f838c73a1154b160
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Thu Aug 14 21:04:47 2014 +0200

    etc/99buildsourceslist: check for the English version of the chroot
    name, not the French one.
    
    (cherry picked from commit b8f9de5f60f4046cb73783a2582b26ab401d616f)

commit 5c797ae088a558e9a247218e2a447df6bd5bf850
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Sun Jul 13 16:50:47 2014 +0200

    etc/99buildsourceslist: check for source chroot by looking at
    CHROOT_DESCRIPTION instead of CHROOT_SESSION_PURGE, which
    also works on tar based chroots.
    
    (cherry picked from commit 7efe96be022a6faf85dcf3ab66997a4ae55bb4d3)

commit 4a92c3148d3fa0c1832f78f0e9f9fa3127c57220
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Sun Jul 13 16:42:19 2014 +0200

    etc/99builddsourceslist: look in priority for mirrors in
    /etc/schroot/dsa/default-mirror, which is used on DSAed
    machines.
    
    (cherry picked from commit e100ec65b0c15a0f511ccc469b762f597b61604b)

commit d6fed69f70c57fa0cb6d5977c8f2b0159b28c826
Author: Aurelien Jarno <aurelien@aurel32.net>
Date:   Sun Jul 13 16:39:41 2014 +0200

    etc/99builddsourceslist: don't run for non "buildd" profiles
    
    This way porterbox scripts can be co-installed with the buildd ones on
    DSA machines.
    
    (cherry picked from commit 6dffe75026fdc958380453c2488c87ffc0bfbaa1)

commit 4fe6f4539cd4f0bcacd184ba77957f9f4b7542ec
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Apr 13 15:28:28 2014 +0200

    etc/99builddsourceslist: add support for squeeze-lts
    
    (cherry picked from commit 0d062701373fbd8a6a0a5bec6b1113cb9822833b)

commit b81ba9738c4d423e17daf9acb1b082c82279cf65
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Tue Jul 9 16:23:29 2013 +0200

    etc/99builddsourceslist: fix entry for backports.debian.org
    
    (cherry picked from commit c44fcd195a8f76ab46c827ae1c7e8a54dc55fb12)

commit 94b0c2fd529cd0ad53d08bb135a29b1a9028adec
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun May 19 21:37:28 2013 +0200

    remove reminders of using lenny chroots (and apts)
    
    (cherry picked from commit 0ff6adb1503afa2838561865ea093db854c73f1d)

commit 89b62119cb100b09ce37dc3f812247d313b61945
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun May 19 21:32:20 2013 +0200

    99builddsourceslist: adjust for new locations for buildds at incoming / security-master
    
    (cherry picked from commit 27834f412b2627d15992bedfac66db22c70f03d4)

commit 8c5582c479bc5b416cd465576fee519153910077
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun May 19 20:17:58 2013 +0200

    install 99builddsourceslist again and update it for new schroot config
    
    (cherry picked from commit b6fd9235e7f645a8a334179025f5ad489d102a78)

commit 8b4f2cc4a7395f0611d0fe8876b02559db36e5f2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 19 17:00:46 2013 +0100

    etc/99builddsourceslist: Update from buildd-0.61.0
    
    (cherry picked from commit 93d4a212b1cd70201dd9c228fffa6f14feb74b7f)

commit 211b7a2647838d3a1a3e45dc005f7e26142f0630
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 19 16:53:23 2013 +0100

    etc/99builddsourceslist: Update from buildd-0.61.0
    
    (cherry picked from commit 3c539dcb8f5abcccca640c607005475828d4019d)

commit 92679c9ed7531d98d249059b7365173f3ecf8712
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu May 16 22:19:23 2013 +0100

    etc/99builddsourceslist: Add
    
    (cherry picked from commit f17ef5b7efe641cfe731b8d9d9835734c744d298)

commit a67baeaa85e7d9982ea32a24a57b60cf5c4791c4
Author: Roger Leigh <rleigh@codelibre.net>
Date:   Sun Nov 30 22:51:03 2014 +0000

    debian: Close #771235

commit f3641ab121bd9d458d684f9e1b6a68c56aa940c9
Author: Lennart Sorensen <lsorense@csclub.uwaterloo.ca>
Date:   Sun Nov 30 22:49:13 2014 +0000

    Build::Build: Build arch-all packages when other architectures are in the arch list

commit 26678e5a4b53c8d83b067770020765495d16467b
Author: Roger Leigh <rleigh@codelibre.net>
Date:   Sun Nov 30 22:47:03 2014 +0000

    debian: Bump version to 0.65.1-1

commit 441d788e6d51e0071c7fc02c4c0d7a81cd548f19
Author: Roger Leigh <rleigh@codelibre.net>
Date:   Sun Nov 30 22:46:49 2014 +0000

    NEWS: Bump version to 0.65.1

commit ebd769ff20658519e55d886b1d50089de2e50d0d
Author: Wookey <wookey@wookware.org>
Date:   Fri Oct 17 17:21:15 2014 +0100

    Make release 0.65.0

commit 98fee63d5ccb54774ae066946f906be344429f54
Author: Wookey <wookey@wookware.org>
Date:   Fri Oct 17 12:45:37 2014 +0100

    Typo fix for release

commit 8ec1e6bf1cb8b0f567c99a7bed4e8fe4bc1bb7bf
Author: Benjamin Drung <bdrung@debian.org>
Date:   Thu Oct 16 06:56:29 2014 +0200

    Rename build_procenv to build-procenv to fix illegal-runtime-test-name

commit e454d9dbd418e9382b009a521a7e4c0c5e2669b1
Author: Benjamin Drung <bdrung@debian.org>
Date:   Thu Oct 16 06:48:57 2014 +0200

    Make indentation consistant and remove trailing spaces

commit 2507e9afa97601bf8eadafc91c6a339e7d793551
Author: Wookey <wookey@wookware.org>
Date:   Thu Oct 16 03:55:34 2014 +0100

    Only print foreign arch info when there is some
    Neaten Arches/arch/dependencies subsection output

commit 22d5969e81b9873197d10ed6d43c4fcd2f64ed86
Author: Wookey <wookey@wookware.org>
Date:   Thu Oct 16 03:36:43 2014 +0100

    Ensure 'Build Profiles' is empty not undef to avoid warnings

commit c5d52d03f86f3d13c6135323556b1ae684bf1813
Author: Wookey <wookey@wookware.org>
Date:   Thu Oct 16 00:30:31 2014 +0100

    Make the multiarch-related functionality squeeze-chroot compatible.
    Only issue multiarch-related dpkg commands if the dpkg in the chroot understands them.

commit 28195062efb2e2e792cfa6db694e3835859d2a70
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Wed Oct 15 13:55:02 2014 +0200

    Update debian/changelog

commit af3563cfeaa45972ba8da93b2a2e2ce66f46c00e
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Wed Oct 15 13:41:08 2014 +0200

    Fix broken man page symlinks in buildd package

commit abee3b2b90a3f947c416ccc26760b34cb380f3a1
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Wed Oct 15 10:08:41 2014 +0200

    Fix too long changelog line

commit 8ad52a27505d224071a80217b64e48690c1ceaaf
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Wed Oct 15 10:07:48 2014 +0200

    Also raise the version of the libdpkg-perl dependency

commit 550c214cae48baa25daea585b51797fe6f4f5a0f
Author: Wookey <wookey@wookware.org>
Date:   Wed Oct 15 02:49:05 2014 +0100

    Add %a substition variable for host architecture, for use in external (hook) commands.
    Fix NEWS file entry for substitution variables

commit ab487c50c813083fa22526550d03ad2ef2e813dc
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Tue Oct 14 13:40:59 2014 +0200

    Update debian/changelog and re-add removed stanza for 0.64.3-2

commit 0e4d0c57969e8e92931b80a9376d24fd15f81548
Author: Geoffrey Thomas <geofft@ldpreload.com>
Date:   Wed Aug 21 22:11:49 2013 -0700

    Sbuild::ChrootSetup: Pass --no-options to gpg

commit a285fecd1445cf782f6370208c8b99f8ae829e64
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Tue Oct 14 13:32:52 2014 +0200

    Fix build failure if the package version ends with Debian revision 0.
    
    Thanks: Adam Borowski <kilobyte@angband.pl>
    Closes: #679574

commit 684c57b77c5acd22aed833e3bb937cdb8bc6bef6
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Tue Oct 14 13:30:19 2014 +0200

    Fail if dpkg subcommands fail instead of silently ignoring failures
    
    Failures of "dpkg --info" and "dpkg --contents" will cause sbuild to fail.
    
    Thanks: Christoph Biedl <debian.axhn@manchmal.in-ulm.de>
    Closes: #745221

commit 1ba39e71bb25b44c188d6972937377d2cb0588ec
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Tue Oct 14 11:14:13 2014 +0200

    Remove trailing spaces

commit 0cb5afe81c06822a64189e0f3f56a84aa9f5a006
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Tue Oct 14 11:04:14 2014 +0200

    Run wrap-and-sort

commit 6220ada95f8047b37797bc9d8cede10669b32ee8
Author: Wookey <wookey@wookware.org>
Date:   Mon Oct 13 18:39:32 2014 +0100

    Update the NEWS file with new 0.65 user-visible changes

commit 8153cbb5ae34b40997bf23e661c89b2f97ad561d
Author: Wookey <wookey@wookware.org>
Date:   Sat Sep 20 01:15:43 2014 +0100

    Add build profiles support

commit aec2c0d91e8d4258dd4c24db20825672a877043b
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Thu Oct 9 18:33:41 2014 +0200

    Update debian/changelog

commit d0c784515d110da3cd0c06231c626a1a7270e460
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Thu Oct 9 18:28:49 2014 +0200

    Add DEP-8 autopkgtest to build procenv.
    
    Closes: #705926

commit 586323766f9a673d95953b2f5d848f4566d31cf9
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Thu Oct 9 18:16:48 2014 +0200

    Also unset XDG_SESSION_COOKIE

commit bb2731b88f8f3507e7b696df78bb1f1eac188d90
Author: Dmitrijs Ledkovs <xnox@ubuntu.com>
Date:   Thu Nov 7 22:00:08 2013 +0000

    Unset more unneeded typical desktop variables.
    
    They are mostly harmless, sometimes unit-tests of package under build
    interracts badly with current session via those variables
    (e.g. RUNTIME_DIR).

commit cc53d8888125fc0cb1408ae56ce3cd83f46538ed
Author: Geoffrey Thomas <gthomas@mokafive.com>
Date:   Mon Jun 17 18:44:15 2013 -0700

    sbuild: 0 is a valid version number

commit 91fbad5ea4bde3dea70c4bf32aa84ca5c46fa6d9
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Thu Oct 9 16:58:28 2014 +0200

    Update debian/changelog

commit d4985a1f1ce057bafe2745e9157dc06a44ed8745
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Thu Oct 9 16:25:23 2014 +0200

    Bump Standard-Version to 3.9.6

commit ee46993252d5bececccf6d55aef1dfb2de252232
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Thu Oct 9 16:21:24 2014 +0200

    Fix indentation and remove trailing spaces

commit 0d592eb9732b046e31a1d7b4fc9af2f3d0ae1989
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Thu Oct 9 16:12:50 2014 +0200

    Export additional variables to external commands.
    
    SBUILD_CHROOT_DIR, SBUILD_BUILD_DIR, and SBUILD_PKGBUILD_DIR are exported
    to the external commands.

commit 996508e5731edf5ae52e060f13691214e3afe902
Author: Geoffrey Thomas <gthomas@mokafive.com>
Date:   Wed Aug 14 15:39:41 2013 -0700

    Implement --extra-repository="deb scheme://..."
    
    This simply adds another line to the sources.list.d file that lists our
    dummy archive for build-dependency resolution, making that repository
    available for providing build-dependencies. The purpose of this option
    is to make it easier to build packages against a local archive without
    modifying the source chroot to list that archive.
    
    Signed-off-by: Benjamin Drung <benjamin.drung@profitbricks.com>

commit 931340caf9791a0044f80516e10ffec67aafe716
Author: Geoffrey Thomas <gthomas@mokafive.com>
Date:   Wed Feb 13 00:57:56 2013 -0800

    Implement --extra-package=package.deb
    
    This simply adds a deb on the host system to the existing dummy archive
    created for the build-dependency resolution metapackage, which makes it
    available for resolving build dependencies. The purpose of this option
    is to make it easier to build packages against locally-built build
    depenencies, without waiting for those packages to enter the main
    archive, or going through the hassle of maintaining a local archive and
    making it accessible inside the chroot.
    
    This option is named similarly to the EXTRAPACKAGES option in
    pbuilderrc(5), but note that it takes a .deb, not a package name.
    
    Thanks to Emanuele Aina for review!
    
    Signed-off-by: Benjamin Drung <benjamin.drung@profitbricks.com>

commit a12d2ab3f1a7a01dcdf3c11d816f7cffcc5f8814
Author: Geoffrey Thomas <gthomas@mokafive.com>
Date:   Wed Jul 3 22:37:27 2013 -0700

    Sbuild::ResolverBase: Implement update_archive using apt-get update
    
    David Kalnischkies pointed out in bug #714877 a clever way to make
    apt-get update only affect a single sources.list-format file, using various
    apt options to override the sources.list and sources.list.d locations,
    and keep the lists for existing sources. This works "in any apt
    version", and is cleaner than faking the list operations ourselves.
    
    Signed-off-by: Benjamin Drung <benjamin.drung@profitbricks.com>

commit 421e5fb83f01d9add0e505a8cb09f4de0fe72382
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Thu Oct 9 15:31:54 2014 +0200

    Fix vcs-field-not-canonical

commit 03589f371ed205ba349391382525d406622e4cf4
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Thu Oct 9 15:01:00 2014 +0200

    Fix copyright-refers-to-symlink-license

commit 30401718527c6986100a40e089006720fa684b68
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Thu Oct 9 14:58:08 2014 +0200

    Fix debian-news-entry-uses-asterisk

commit f3b66d03f28154fcb3ab1fad1fe9d030d8f5cefa
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Thu Oct 9 14:40:53 2014 +0200

    Fix hyphen-used-as-minus-sign

commit acfae99937eb14062594324faebc3b719e1df3fa
Author: Benjamin Drung <benjamin.drung@profitbricks.com>
Date:   Thu Oct 9 13:02:58 2014 +0200

    Fix typo: indended -> intended

commit 559097777d78e2851ce5286b86f16efdbd4f318f
Author: Wookey <wookey@wookware.org>
Date:   Wed Oct 8 04:43:55 2014 +0100

    Add a source format file (quilt 3.0) for debian releases

commit 3ad0be72d287b8e8fbfe8bb9037e83d5e74e8717
Author: Wookey <wookey@wookware.org>
Date:   Wed Oct 1 18:15:53 2014 +0100

    Ensure foreign-arch info reported correctly in logs (Closes: #763635)
    Add some more message-quoting rigour

commit 6015516643620776d6374c8ee2d5a8e84ae30c99
Author: Wookey <wookey@wookware.org>
Date:   Tue Sep 30 18:07:17 2014 +0100

    Better document debian release process in HACKING

commit d0dd2f6df2078c160875d2a330a3507a04e126e5
Author: Wookey <wookey@wookware.org>
Date:   Tue Sep 30 13:45:39 2014 +0100

    Fix sbuild test to respect apt policy, otherwise the test can fail
    because 'apt source foo' downloaded an unexpected version.

commit 8e2e1a421bfaf30968033ee2a205c2384df4941d
Author: Wookey <wookey@wookware.org>
Date:   Tue Sep 30 13:36:09 2014 +0100

    Update HACKING with test info

commit f4c586aaa3f7f45f8549dd893d06f254e31d2c3d
Author: Wookey <wookey@wookware.org>
Date:   Mon Sep 29 22:20:46 2014 +0100

    Update HACKING file with current release procedure

commit 4fdf1e712277a1862e2285cff7de805dc6197855
Author: Wookey <wookey@wookware.org>
Date:   Mon Sep 29 14:59:28 2014 +0100

    Add wookey to uploaders/team
    Release 0.64.3

commit 7b6b2b5983d54ff0ab54da5aa7ef2d499b87ad85
Author: Wookey <wookey@wookware.org>
Date:   Thu Sep 25 21:04:03 2014 +0100

    Merge #760991 and #608840 hook command changes.
    So chroot setup/cleanup commands are run as root and starting/finished commands are run as user
    The existing name for chroot-setup-commands is thus retained for backwards comptibility
    
         Here is a summary of the resulting command options, in order, showing
         option, user, internal/external, and point of running:
         --pre-build-commands       root  ext  after chroot session setup
         --chroot-setup-commands    root  int  after chroot initialisation, before 'update'
         --starting-build-commands  user  int  after update and dependency-install, before build
         --finished-build-commands  user  int  after end of timed build
         --chroot-cleanup-commands  root  int  after build, before session is closed
         --post-build-commands      root  ext  after session is shut down

commit ccfc7e7a6fda4aea36350b7588b8849901a19789
Author: Wookey <wookey@wookware.org>
Date:   Thu Sep 25 17:26:27 2014 +0100

    Add changelog entry for multiarch-build feature

commit 9fdca933d6264a4a21d63d4fd4b76dafb1ee15a9
Author: Dima Kogan <dima@secretsauce.net>
Date:   Thu Aug 28 23:55:13 2014 -0700

    I'm now removing any foreign architectures that I added

commit c599aa5e508d596b79f4130e63f5d197704504f3
Author: Dima Kogan <dima@secretsauce.net>
Date:   Thu Aug 28 23:16:41 2014 -0700

    I now add a foreign arch to support foreign Build-Depends
    
    As an example, if a Build-Depends contains
    
     libwhatever:armel
    
    then I run
    
     dpkg --add-architecture armel

commit 00bacfb97003422bebf5d6517f62660b574ccbfb
Author: Luca Falavigna <dktrkranz@debian.org>
Date:   Fri Sep 12 20:03:02 2014 +0200

    debian: Set distribution to unstable

commit 061bc7b44d801d2bc942d938b52e67bb75b0ae7d
Author: Luca Falavigna <dktrkranz@debian.org>
Date:   Fri Sep 12 20:02:36 2014 +0200

    NEWS: Finalise for 0.64.2

commit 031dd51d6b42cec3103314cc5caa87ef07acb2ec
Author: Luca Falavigna <dktrkranz@debian.org>
Date:   Sat Aug 9 10:46:14 2014 +0200

    Sort output of package content listing

commit 54d2d3128229c48b28d65300e1aa6e74c7a00e3b
Author: Luca Falavigna <dktrkranz@debian.org>
Date:   Sat Aug 9 10:44:46 2014 +0200

    Allow to Define custom debootstrap variant

commit 59f138dcf6568db56abc1edd1443968da970f71d
Author: Luca Falavigna <dktrkranz@debian.org>
Date:   Thu Jun 19 08:29:35 2014 +0200

    Allow to define custom suffixes in chroot names

commit 73a4ef2423980e6981356956b41a8b205118970d
Author: Colin Watson <cjwatson@ubuntu.com>
Date:   Fri Oct 18 12:47:35 2013 +0100

    debian: Document locale environment variable changes

commit 28a24d0d6eaf4ecf3c1d33d6c407bb2783ff8fe5
Author: Colin Watson <cjwatson@ubuntu.com>
Date:   Fri Oct 18 12:42:40 2013 +0100

    Buildd: Unset some more locale environment variables
    
    Also sort these in the same order as the output of locale(1), to make it
    easier to compare visually.

commit 295f8a47b99cf01f4db5548f888e92d7e25f3868
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 13 20:47:17 2013 +0100

    debian: Set distribution to unstable

commit 01fcea5556e18b211b7a5d653e94aa837c66c191
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 13 20:46:57 2013 +0100

    NEWS: Finalise for 0.64.1

commit edec86529f6100386d435d4a4694d70806d033a0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 13 20:19:33 2013 +0100

    debian: Document autoflush workaround removal

commit c906219b9060cae5e6413dfcfd16965c3180a2e4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 13 20:18:33 2013 +0100

    Sbuild::Build: Remove perl 5.10 autoflush workaround

commit 733220ece292b785491f45484563dded812b228c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 13 19:55:56 2013 +0100

    debian: Also thank Václav Ovsík for #724858 patch

commit 73ef01ce6551b4545373c3d7b13325da4e285897
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 13 19:54:25 2013 +0100

    sbuild-createchroot: Remove package from tempfile usage

commit bb4814ba5dfc0ef851d35232f0b6a95e51e85311
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 13 19:47:28 2013 +0100

    debian: Close #722012

commit 40bb2ad7942a7f8ad78c8fa7f907bfb47d49aa1a
Author: Vaclav Ovsik <vaclav.ovsik@gmail.com>
Date:   Sun Oct 13 19:46:22 2013 +0100

    Sbuild::Conf: Add missing File::Spec

commit 497713d146b711b789e3a8b5e74fbfe56b60deec
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 13 19:44:24 2013 +0100

    debian: Also thank Paul Elliott for #724858 patch

commit 28922812df0114e59f8cb2cfe19fb56daf33459b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 13 19:38:15 2013 +0100

    debian: Bump version to 0.64.1-1 and Close #724858

commit f31d0dfbb6cd1aa06892c520e2e473d1f099d06b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 13 19:37:34 2013 +0100

    NEWS: Bump version to 0.64.1

commit 4cba82f909b46b69cf271b656e13e3c03898ec64
Author: Alexander Chernyakhovsky <achernya@mit.edu>
Date:   Sat Sep 28 16:07:44 2013 -0400

    Fix sbuild-createschroot on jessie/sid

commit d7f31eddcec5db5f5d0419daf520f9f19b857b5e
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 17 23:31:10 2013 +0100

    debian: Remove buildd preinst and correct init script dependencies

commit 05251cb18583d605d573b34bd782c1c28e1fd494
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 17 23:28:32 2013 +0100

    debian: Upgrade to Standards-Version 3.9.4

commit c439aad0bdfcd03d925b656593539574a9527996
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 17 23:10:12 2013 +0100

    NEWS: Bump version to 0.64.0 and document main changes

commit 1f9aecf124173808ed4e9bf67fe99c91de3010b8
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 17 23:09:43 2013 +0100

    debian: Bump changelog version to 0.64.0

commit a25baa48fe5813bffe6c51aa86eb90c190f8a682
Author: Geoffrey Thomas <geofft@mit.edu>
Date:   Tue Feb 12 17:36:36 2013 -0800

    debian: Close #672711

commit a319744b9fa1d2e6d98ef89e1a9ce7adbbb2a33f
Author: Geoffrey Thomas <geofft@mit.edu>
Date:   Tue Feb 12 17:34:04 2013 -0800

    Sbuild::Build: Add "binary-only=yes" to binNMU changelog entries
    
    When we add a changelog entry for a binNMU or for an appended version
    number, mark that entry with "binary-only=yes", so that new versions of
    dpkg-gencontrol know to use the previous changelog entry as the source
    version.

commit b6afed5937e32a0bc86d22c01ef5caa0e558ea6b
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 17 22:56:44 2013 +0100

    Sbuild::Build: Run lintian before moving the build files

commit 1b040f9f3e92b15bfc6bf3d36646e95430b5c21c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 17 22:30:02 2013 +0100

    debian: Close #626361

commit 61656cfd7e24316b2d00ad14a0bafc6539be9b7e
Author: Reinhard Tartler <siretart@tauware.de>
Date:   Fri May 17 22:28:10 2013 +0100

    Sbuild::Build: Run lintian from inside the chroot
    
    Running lintian from inside the chroot supports use-cases with several
    chroots (oldstable, unstable, testing, lucid, natty, etc), where using
    the system lintian might not give the best results.  By using the
    lintian version from the chroot, sbuild uses always the version that
    matches the distro version that the package is being built for.

commit 0a7c7f5218479aebfd08ee239f1c6256e94593c9
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 17 22:26:13 2013 +0100

    debian: Close #686509

commit 4f9a42f94f029ef4b3812f780184c476a447342b
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 17 22:23:30 2013 +0100

    Sbuild::Build: Compute changes filename correctly
    
    Based upon initial work by Daniel Dehennin with additional
    changes for robustness when building inside a source tree.

commit fe47c7d7a2dd4abda9526789f36aecca188cc58b
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 17 21:20:33 2013 +0100

    debian: Close #699903

commit d2a8373eef3ad8112fbb680db488f87426e7c27e
Author: Stephan Sürken <absurd@debian.org>
Date:   Fri May 17 21:17:50 2013 +0100

    Sbuild::Build: Remove stray exit from copy_to_chroot
    
    This prevents sbuild waiting forever on 'Failed to copy'.

commit e7a822a1597610501562cae0e69329c828d28302
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 17 20:48:09 2013 +0100

    debian: Document forward-ported buildd patches

commit d5b99c2752566c3b25ddc57cb48222cda246c8b5
Author: Philipp Kern <pkern@debian.org>
Date:   Thu May 16 22:13:10 2013 +0100

    Fix SSH control master restart

commit 3283e5c5147cec8eededee2407e451bee916862c
Author: Philipp Kern <pkern@debian.org>
Date:   Thu May 16 22:10:14 2013 +0100

    [Sbuild::DB::Client] do not change the cwd

commit 4b05f6f1344b8ca03473fe41d7368795e7b94ebb
Merge: 11fe624 7aed101
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu May 16 20:28:38 2013 +0100

    Merge remote-tracking branch 'origin/master'
    
    Conflicts:
    	debian/changelog

commit 7aed1015ae16873618024f7bb89a04c7e59dc107
Author: Colin Watson <cjwatson@ubuntu.com>
Date:   Wed Feb 6 02:30:50 2013 +0000

    Buildd::Conf: Fix typo

commit 11fe624f2a0bdc2360e969eae3e5e024a2660d39
Author: Roland Stigge <stigge@antcom.de>
Date:   Tue Feb 5 21:00:32 2013 +0000

    Apply patch for 0.63.2-1.1 NMU

commit 86d9f34554c1b90163cff5ff184a07c265ce9d31
Author: Colin Watson <cjwatson@ubuntu.com>
Date:   Wed Jan 9 10:53:44 2013 +0000

    debian: Document sbuild failure count fix

commit e41cccc2d4e7122bda4c73772f58a4b12789ea9b
Author: Colin Watson <cjwatson@ubuntu.com>
Date:   Wed Jan 9 10:53:18 2013 +0000

    Buildd::Daemon: Reset sbuild failure count after sleeping

commit 746c269b1d1c413b685ff4bc7d218f4149abe7cd
Author: Adam Conrad <adconrad@0c3.net>
Date:   Mon Jan 7 11:18:50 2013 -0700

    debian: Close #695273

commit 5ad92654ae45bf3196b9d22f47838993d6991534
Author: Adam Conrad <adconrad@0c3.net>
Date:   Mon Jan 7 11:15:34 2013 -0700

    Fix and improve cross-build chroot detection
    
    Update ChrootInfo.pm to allow for chroots named $dist-$build-$host
    to avoid namespace clashes with native chroots, and fix Build.pm
    to default to looking for the chroot at HOST_ARCH.
    
    Improve documentation for the above in the sbuild.1 manpage.

commit 8b510e5f4417eadc92c4d13f8e996fad8cfde764
Author: Colin Watson <cjwatson@ubuntu.com>
Date:   Mon Jan 7 12:52:05 2013 +0000

    debian: Close #695203

commit 9aaa06de161ecb0a5422dc48805215211590c2f9
Author: Colin Watson <cjwatson@ubuntu.com>
Date:   Mon Jan 7 12:51:44 2013 +0000

    sbuild: Resolve cross-build-dependencies from package being built

commit 8851c91d4351db3f2e5ea727420c68c3ce421ae8
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jan 3 23:24:59 2013 +0000

    debian: Close #697298

commit dc49ae794f5f6c9b5b4903b4fae5feb4ed7e6276
Author: Colin Watson <cjwatson@ubuntu.com>
Date:   Thu Jan 3 23:23:18 2013 +0000

    ResolverBase: Pass correct options to deps_parse for :native deps

commit b0b469da801b54c4441fd16a9c85faa6a6b2362d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jan 3 21:36:50 2013 +0000

    Buildd::Conf: Enable $distributions and $upload_queues
    
    These were in the example syntax, but didn't work.  Allow in
    addition to @distributions and @upload_queues, and warn if
    the @ form is used since this doesn't match use for all other
    configuration values.

commit a3b867ff94720cccd707f0aa88b0148cf0bfa3ce
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 30 16:58:22 2012 +0000

    Build::Conf: Revert incorrect documentation change

commit 134223e35d4bea3c58a4764d5ee4944598f67e25
Author: Thorsten Glaser <tg@mirbsd.org>
Date:   Sun Dec 30 00:07:29 2012 +0000

    avoid dereferencing MAILTO_HASH if it is undefined

commit a346f00792def8e5b4181e14fe958efd4448f43b
Author: Thorsten Glaser <tg@mirbsd.org>
Date:   Sun Dec 30 00:05:14 2012 +0000

    change sample configuration entries from $foo=[]; to @foo=();
    
    for now, this is required so they actually work; later, both
    methods may be allowed, but right now, only the latter works
    
    also, fix a missing parenthesis that gets jupp's find matching
    brace functionality confused

commit c8ccc72f0894cc8a4fec5ac8ca65bf4c08e34cdc
Author: Thorsten Glaser <tg@mirbsd.org>
Date:   Sun Dec 30 00:00:21 2012 +0000

    debian: Close #636477 by adding changelog entry for the previous commit

commit fbd76de128aefe983eb8d981e061fc4051432c7f
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Tue Jul 19 09:44:41 2011 +0200

    Fix get_db_handle
    
    Commit 72f987c0a03e58358ea616628514efa0113f0332 moved Client class from
    Sbuild::DB to Buildd:: and now, when uploading, there are errors in the
    log:
    Can't locate object method "new" via package "Buildd::Client" (perhaps you
    forgot to load "Buildd::Client"?) at /usr/share/perl5/Buildd/Base.pm line 120 (#1)
    
    Adding a "use Buildd:Client;" cures the problem for me.
    
    Signed-off-by: Arnaud Patard <arnaud.patard@rtp-net.org>

commit c73c97774dd63bc0db999b324b521fef54d07fb0
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 10 00:04:10 2012 +0000

    debian: Close #693790

commit 444dfa6f947c89d6587f6877fcbe32cb7fe3f8ac
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 10 00:03:03 2012 +0000

    buildd: Make sbuild failure count configurable with MAX_SBUILD_FAILS

commit d3b674303c8b8f99ccf6197fbfed3cf299968a11
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 9 23:55:36 2012 +0000

    debian: Close #693788

commit 0a0d30972d357959e863f58ffca4fdce714b9eba
Author: Colin Watson <cjwatson@ubuntu.com>
Date:   Sun Dec 9 23:53:54 2012 +0000

    Sbuild::Build: cross build-dep installation failure throws exception

commit 6e87a316d85417d38e3fbe0d8fe8700020ad71f1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 9 23:50:49 2012 +0000

    debian: Close #695513 and bump version

commit 521290bf1e2b5b1c2013a187a4369a8ccfcde6fa
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 9 23:49:43 2012 +0000

    debian: Remove duplicate stop function from buildd init script

commit 752ee22db84da27f10c25520dbfba66d866fa1a7
Author: Roland Stigge <stigge@antcom.de>
Date:   Sat Dec 8 23:03:00 2012 +0000

    Fix building packages with revision "0"

commit c360e45618b901662cfea5044df4b55ad0e236c3
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 4 17:39:12 2012 +0100

    man: Add --no to piuparts option

commit af05d7dffb90abf4ed0fe1676b902f452bc11d44
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Aug 28 23:55:53 2012 +0100

    sbuild: Move http downloads to executable wrapper
    
    This permits the .dsc to not match the standard naming
    conventions providing that the contents are correct.  The
    main goal is to only have the core code accept .dsc or
    package_version for download using apt-get.  This is a
    prerequisite for proper privilege separation and
    simplification of the core code.

commit d299f7eee5f7ea908e0b37ac44886be0aa33ca36
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 18 13:49:18 2012 +0100

    debian: Fix changelog for release

commit cd0dcdacd2a1a15c8debbe4449aff72965ec9686
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 18 13:42:41 2012 +0100

    NEWS: Document logging bugfix

commit b98743d6487d8c667f3ab19c2e974077f1d7c340
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 18 13:42:14 2012 +0100

    debian: Close #676834

commit 89dab349762a9f0839136ab80c9d3b4794aee372
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 18 13:37:26 2012 +0100

    test: Add logging testing scenarios

commit b196a2e2075147e4cbe4e48c15b9fd0b5d210572
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 18 13:14:05 2012 +0100

    sbuild: Don't open logs in the build directory when packing sources
    
    If building directing in the CWD, log in ..
    Implement this behaviour by setting BUILD_DIR to ..
    Also set LOG_DIR to BUILD_DIR in user mode so LOG_DIR is
    also not defaulting to CWD.

commit 350efb25e0ac914e932858c3c4809b2922c79fd8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 18 13:13:28 2012 +0100

    Sbuild::ConfBase: Remove unused CWD variable

commit 82aeef2adbaef49b56677d9860b32b4b36ea4968
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jul 5 00:13:40 2012 +0100

    Sbuild::Conf: Remove additional bracket

commit 94ee5c5df3fbffdcd09781903e13fa4388bad16f
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 4 23:57:05 2012 +0100

    debian: Close #673009

commit dd273ea0ebe95467f5a9cb2623a9ea33fe563f14
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 4 23:55:21 2012 +0100

    Sbuild::Conf: Only create log directory in buildd mode

commit a2e05139759e72027a063e25f1512c628e05cf0e
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 4 23:50:37 2012 +0100

    Sbuild::Conf: Don't make log dir if NOLOG is set

commit 03d0040f6feeef2808169a63a851470c3fdc7836
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 4 23:14:37 2012 +0100

    debian: Close #662785

commit 942a97018e1024f9caee462f8a345cdf12ed0fa1
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 4 23:13:10 2012 +0100

    debian: Close #676834

commit 9c8d93868c1379c8137ba76119703c95f8a16332
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 4 23:10:33 2012 +0100

    sbuild: Build source directories correctly
    
    - If inside the directory, log outside
    - Clean and package correctly with dpkg-source whether sbuild was
      run from from inside or outside the source tree

commit ea79546910ec9f14b114b4500aa252484c93ba46
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 4 21:10:20 2012 +0100

    debian: Close #637931

commit bf557dc70a2feb9b87cc31d659bf8c15c0d9c1e7
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 4 21:08:47 2012 +0100

    Sbuild::Utility: Fix logging in download function

commit e34275c39235eb573d2a096be3a8499f33878a0a
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 4 20:35:02 2012 +0100

    debian: Close #674669

commit 1e88a1b18bc0358a03fe5f85cb83c204b00047a5
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 4 20:32:50 2012 +0100

    Sbuild::Build: Factor out finding changes into get_changes()

commit ec022e746e2d23556d6f58dfef1434fb560a3c05
Author: Daniel Dehennin <daniel.dehennin@baby-gnu.org>
Date:   Wed Jul 4 20:03:40 2012 +0100

    Sbuild::Build: Find _all.changes as well as _arch.changes

commit f29ce90bce6e74dedd85a26a883c5138e28afac8
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 4 20:03:24 2012 +0100

    debian: Close #675861

commit 7afefbf558f783735624577a246b7912912f6da3
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 23:01:30 2012 +0100

    debian: Close #673676

commit 4bc2072701dddf7aa5e3680ded77de0bf6f75f02
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 23:00:30 2012 +0100

    sbuild-createchroot: Don't use --keyring unless set by user

commit cb47de2a0e1cc6e501e0044b04b17dc2357a5b58
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 22:53:15 2012 +0100

    debian: Close #665215

commit 0df61e1b81d24c9a4a035a028ce4be8c4e79744e
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 22:25:14 2012 +0100

    debian: Close #676475

commit fe7f0e7c5ac20f7153b136489c40a06579cf44a6
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 22:23:18 2012 +0100

    Sbuild::Build: Don't run debsign with shell interpretation of $key_id
    
    This is badly broken.  Use separate arguments with correct quoting,
    to prevent shell metacharacters such as < and > not being interpreted
    by the shell.

commit 41a825a25eea52097c01a149250b44623c263e40
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 22:15:40 2012 +0100

    debian: Close #629109

commit 898eb8be3008616e93b9d4f92869d02177a52cae
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 22:15:34 2012 +0100

    NEWS: Document new --purge-build option

commit e32faf26f8a013f5d96a24934e9819878a1dace7
Author: Jan-Marek Glogowski <glogow@fbihome.de>
Date:   Thu Jun 28 22:10:44 2012 +0100

    Sbuild::Options: Add --purge-build option
    
    This replaces the existing --purge option, which now purges
    everything (build directory, build dependencies and session).

commit 97cd31badb3f28e900ff0ca922366004287ad43b
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 21:52:56 2012 +0100

    debian: Copy options description from NEWS

commit c7c485ee40753dafd4d025c92020eed0a48cffb7
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 21:52:40 2012 +0100

    NEWS: Document --no-run-lintian and --no-run-piuparts

commit 89e6d06a9c36e8384ba0db42ce3f093628a1f402
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 21:50:51 2012 +0100

    debian: Close #665372

commit e069ee987fe96ebf36687980e47c310339b50ea9
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 21:49:58 2012 +0100

    Sbuild::Options: Add --no-run-piuparts option

commit 7d4ca24cd826468908a4a7d830503a22d08f4edf
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 21:48:01 2012 +0100

    Sbuild::Options: Add --no-run-lintian option

commit be9e29229f9f78b8f06a97e4d12942b18ec3cdd3
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 21:37:07 2012 +0100

    debian: Close #663089

commit 4c8de771ad27c61fa0ad57af22ef80f45dede9a1
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 21:36:01 2012 +0100

    debian: Bump version to 0.63.2-1

commit 70e28a15c7d24747ceb6c151340da382aea4e575
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 21:35:16 2012 +0100

    NEWS: Bump version to 0.63.2

commit df035c6df4419c0155d58a90cfb5e187b6a16ae3
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 28 21:33:59 2012 +0100

    Sbuild::Conf: Fix typo sucess

commit 5f2eabf8b43fe96f141b15848210ba44d1bd50c3
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jun 5 20:18:06 2012 +0100

    sbuild-createchroot: use profile= in config
    
    This replaces script-config=.

commit 0566448375bc8032716f2d8c933d9d6fcea1a4e4
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu May 31 22:52:12 2012 +0100

    debian: Set distribution to unstable

commit a23d645e17600378a3747d12f172828a75ccf23b
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu May 31 22:11:29 2012 +0100

    debian: Close #675349

commit c85ad5f49c398a56a6b8416ee3a4ce2a41e6f2e3
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu May 31 22:08:32 2012 +0100

    debian: Bump version to 0.61.1-1 and close #675332 and #675354

commit 6ca7311194f162639be7447e5ab96e92229c5858
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu May 31 22:07:57 2012 +0100

    NEWS: Bump version to 0.63.1

commit ce35f824eaa35d7925520afa605b14723e1f6a8f
Author: Jakub Wilk <jwilk@debian.org>
Date:   Thu May 31 22:07:32 2012 +0100

    Sbuild::Conf: Correct validation of xapt program

commit 779e65fac8c1f3488afb1181a07adb835353d109
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed May 30 23:10:10 2012 +0100

    debian: buildd doesn't install schroot setup scripts
    
    Only used on the buildd branch.

commit bbf2c5bb7239b16f67009b3a58d71a3cd42b195b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed May 30 23:09:33 2012 +0100

    debian: Document 25nssdatabases removal

commit a1fcce8d93f4e36f168314ae8f45f4d3de083843
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed May 30 23:05:05 2012 +0100

    etc: Drop long obsolete 25nssdatabases setup script
    
    Replaced by 20nssdatabases many years ago.

commit e2330e170a525d319a62a33e15a736d61af01dc1
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed May 30 22:59:46 2012 +0100

    debian: Drop /etc/schroot/setup.d from installation
    
    Only used on buildd branch.

commit 69c1be7f874f4b3fface40f579f4bc6071684914
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed May 30 22:50:04 2012 +0100

    debian: Update changelog date

commit 08e5a6aa6ca6fb90b723b5a8101cb302201bcb53
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed May 30 22:48:50 2012 +0100

    Sbuild::ResolverBase: Fix indentation

commit aba0b23e35fec286a14f927d4d711eed130f1e40
Merge: 96618cc d798c6e
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed May 30 22:46:05 2012 +0100

    Merge remote-tracking branch 'scratch/cross-build'
    
    Conflicts:
    	debian/changelog
    	lib/Sbuild/Conf.pm
    	lib/Sbuild/ResolverBase.pm

commit 96618cc9a2d2e2c08f29d083838bea81b0d78f4e
Merge: 85f1ffc c479be8
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed May 30 22:41:09 2012 +0100

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit d798c6eb59446e6cf897f24b89e84d925ef8ebc2
Author: Wookey <wookey@wookware.org>
Date:   Wed May 30 12:59:59 2012 +0100

    Don't check xapt exists unless it is configured - this config is rarely, if ever, used.

commit 09c65b3b46e3bc05e49ff48258d4014e4625a079
Author: Wookey <wookey@wookware.org>
Date:   Wed May 30 12:59:58 2012 +0100

    Use crossbuild-essential-$arch to gloss over distro differences

commit df870cee6ad584c2489648bdcadce82f8e9c4853
Author: Wookey <wookey@wookware.org>
Date:   Wed May 30 12:59:57 2012 +0100

    Use new dpkg 1.16.2 --add-architecture syntax so sbuild crosses-builds on Debian chroots

commit c479be82dc25fe0f2a15efc192920cdd50f48f18
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu May 10 00:05:00 2012 +0100

    99builddsourceslist: Add initialisation from buildd/config

commit 85f1ffc067501a03d086a2fd8c848b831d76ba89
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 29 22:39:01 2012 +0000

    build: Don't distribute or install Sbuild/Log.pm

commit 507624eb042399824f9f4d7b5e4155a87dbaa994
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Jan 28 14:14:35 2012 +0100

    lib/Sbuild.pm, man/sbuild-setup.7.in: fix privilege typo

commit c883f7bbc172b6aadb6db750479fed4078855d45
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jan 25 22:05:00 2012 +0000

    Sbuild::Log: Remove
    
    Unused, and no functions referenced in any code.

commit 9b941b033a9489669efa1169110669d415ea7b8e
Author: Max Thoursie <max@spotify.com>
Date:   Wed Jan 25 11:22:30 2012 +0100

    debian: debian/rules runs ./bootstrap when needed
    
    To make it possible to build a debian package directly form a clean
    checkout, debian/rules now run ./bootstrap if ./configure is missing.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 1fc35fe433366c97bc9ecd912ba0a70bd8488834
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jan 25 13:08:48 2012 +0000

    Sbuild::Build: Add separators around debian/files output

commit 9221db153bf8f6c938795e7a225b515edad2b422
Author: Max Thoursie <max@spotify.com>
Date:   Wed Jan 25 11:20:48 2012 +0100

    Sbuild::Build: Output the contents of debian/files w/o a box
    
    I don't think drawing a box around the contents of a file is appropriate
    since:
    
    • Boxes are already used for headings which could be confusing if the
      file only has one line.
    • It makes cut'n'pasting of the contents harder.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 7652cced61c7d5d7ed70d3cd0e9e784070512af0
Author: Max Thoursie <max@spotify.com>
Date:   Wed Jan 25 11:00:57 2012 +0100

    Sbuild::Build: Remove double if statements
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit d6bfdf46fa3eef639381ef5aa16f2f2a06c5e48e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 22 18:52:17 2012 +0000

    debian: Update changelog from NEWS

commit a7511c5875b1a4f26c57fc3000eea6f203578a69
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 22 10:49:11 2012 +0000

    Buildd::Conf: Correct misused HASH argument in constructor

commit 232f2d0e4d4e3bb089c17801f50202c697252961
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 22 10:47:42 2012 +0000

    test: Add database option to wanna-build

commit 2f1d5517ca65a545339d6b5e4c1a865375c39555
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 21 19:43:53 2012 +0000

    test: Add user option to wanna-build

commit f895976e6a71e3ffd7c71f0e66fdb98b30fe581a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 21 16:14:59 2012 +0000

    test: Add wanna-build test script for buildd
    
    This is a fake wanna-build, whose sole purpose is to test buildd
    without a full wanna-build setup.

commit e946eaa65c37229544235655b1179eeafe63a3c3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 21 14:31:45 2012 +0000

    test: Remove sbuild-stats

commit 6a903e35b668a11f362793af2ffb706bcad47d87
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 21 14:30:31 2012 +0000

    Sbuild::Conf: Fix typo in TOOLCHAIN_REGEX help text

commit b295b904a19fc9f6a0041dbe036f32606e849fb5
Merge: a6ef88c cca5d11
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 21 14:21:51 2012 +0000

    Merge branch 'cross-build'
    
    Conflicts:
    	lib/Sbuild/Build.pm

commit cca5d11bba8e47c8e861b7d011f0098ba4ee40b9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 21 14:18:04 2012 +0000

    Sbuild::ResolverBase: Set defaults for host and build arch

commit 23fef4539dd0b12108e5ffd1fe0ae5c35ecced67
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 21 13:25:03 2012 +0000

    Sbuild: LOG_DIR default depends upon SBUILD_MODE
    
    If SBUILD_MODE is user, set to "."
    If SBUILD_MODE is buildd, set to "$HOME/logs"

commit 895c02f94d957103badbf2865af631a941c86cbe
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jan 20 09:55:44 2012 +0000

    Sbuild::Build: Don't use dedicated log dir for user mode
    
    Create log file in build dir rather than a symlink.
    
    Unlink old build log before opening new log.  This prevents it
    following a symlink and overwriting an old log.

commit b37df9f6ddcc61651c7031d2a9db2e146ec79df8
Author: Wookey <wookey@wookware.org>
Date:   Fri Jan 20 03:07:35 2012 +0000

    Sbuild::Conf: Fix string quoting error in cross-build-coredeps config
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit c55152933851aa48e27048b2715c01ab25e49e2e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 17 22:42:39 2012 +0000

    Sbuild::Build: Include @crosscoredeps in @coredeps

commit 1c6929c1b0884b5fd4f950fce48308dbaa686ce0
Author: Wookey <wookey@wookware.org>
Date:   Tue Jan 17 03:07:39 2012 +0000

    Sbuild::ResolverBase: Set Host and Build arch in resolver object
    
    Make names consistent. Part two of using get instead of get_conf for arches

commit 07305a6a99374c9168ada65b9713980b89a9e499
Author: Wookey <wookey@wookware.org>
Date:   Tue Jan 17 03:07:38 2012 +0000

    Sbuild::Build: Set Host and Build Arches in object, then use throughout

commit f8e41322c2838808cff1b80d7bf2e8a8792a1955
Author: Wookey <wookey@wookware.org>
Date:   Tue Jan 17 03:07:37 2012 +0000

    Sbuild::Build: Add log subsection for installing cross-build-deps

commit e36baf198d8f716eaf87dbafa1a2a6e71906dc43
Author: Wookey <wookey@wookware.org>
Date:   Tue Jan 17 03:07:36 2012 +0000

    Sbuild: Correct typos in logging messages for setting cross-arch config

commit 89aff1f819e59f608b5b8f648bdcb7fd174a3338
Author: Wookey <wookey@wookware.org>
Date:   Tue Jan 17 03:07:35 2012 +0000

    Sbuild::ResolverBase: Explicitly use shell in setup_dpkg
    
    This is to ensure redirect works properly.

commit c29bc4e1a837418ddefe4d5c66cbba6ac6c394df
Author: Wookey <wookey@wookware.org>
Date:   Tue Jan 17 03:07:34 2012 +0000

    Sbuild::Build: Fix run_fetch_install_packages for native builds
    
    Fix run_fetch_install_packages so native builds work as well as cross.  The
    issue was that if $crosscoredeps is not defined the code barfs on
    @{$crosscoredeps->{$self->get_conf('HOST_ARCH')}}, rather than it just being
    empty.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit b772b185b547d00d08c78536a2e6dca2c03324b6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 21 13:25:03 2012 +0000

    Sbuild: LOG_DIR default depends upon SBUILD_MODE
    
    If SBUILD_MODE is user, set to "."
    If SBUILD_MODE is buildd, set to "$HOME/logs"

commit a6ef88c53f427c418b608df38d99effdf4af9ecd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 21 13:25:41 2012 +0000

    sbuild-dumpconfig: Don't wrap manpage help text
    
    The wrapping can break the troff markup if a leading single
    quote is wrapped.

commit 0acc6c7eb68b163e5a51fd83b01e2a9800bd14e8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 21 13:25:03 2012 +0000

    Sbuild: LOG_DIR default depends upon SBUILD_MODE
    
    If SBUILD_MODE is user, set to "."
    If SBUILD_MODE is buildd, set to "$HOME/logs"

commit 3d8a80541aabe677311944191318ca9e620be0cf
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jan 20 09:55:44 2012 +0000

    Sbuild::Build: Don't use dedicated log dir for user mode
    
    Create log file in build dir rather than a symlink.
    
    Unlink old build log before opening new log.  This prevents it
    following a symlink and overwriting an old log.

commit 8efcabead98eef9a7fd5254b9b198fa706ece637
Author: Wookey <wookey@wookware.org>
Date:   Fri Jan 20 03:07:35 2012 +0000

    Fix string quoting error in cross-build-coredeps config
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit f573699f80bb7cc14eb703934827fe05316f8af5
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jan 20 09:55:44 2012 +0000

    Sbuild::Build: Unlink old build log before opening new log
    
    This prevents it following a symlink and overwriting an old log.

commit 19cab17c734794a8723df93a214ea83074be18a6
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 17 22:42:39 2012 +0000

    Sbuild::Build: Include @crosscoredeps in @coredeps

commit 58ccc02cb5f71f947014d49681c8cc291af49542
Author: Wookey <wookey@wookware.org>
Date:   Tue Jan 17 03:07:39 2012 +0000

    Set Host and Build arch in resolver object. Make names consistent. Part two of using get instead of get_conf for arches

commit 98ddf08398edce9264c5b4cdd7acf8fa0e547079
Author: Wookey <wookey@wookware.org>
Date:   Tue Jan 17 03:07:38 2012 +0000

    Set Host and Build Arches in object, then use throught

commit 4d355f73a45ce436e7f5e7cfe1ae2119178ff1f2
Author: Wookey <wookey@wookware.org>
Date:   Tue Jan 17 03:07:37 2012 +0000

    Add log subsection for installing cross-build-deps

commit ac532fb6222857453cd70efdb703280a1cd4461e
Author: Wookey <wookey@wookware.org>
Date:   Tue Jan 17 03:07:36 2012 +0000

    Correct typos in logging messages for setting cross-arch config

commit 7a81734d6d9befd934226e2c7364cb19348e561c
Author: Wookey <wookey@wookware.org>
Date:   Tue Jan 17 03:07:35 2012 +0000

    Explicitly use shell in setup-dpkg to ensure redirect works properly.

commit edf53cae8bba196745486b34faa73e4b0a38fda4
Author: Wookey <wookey@wookware.org>
Date:   Tue Jan 17 03:07:34 2012 +0000

    Fix run_fetch_install_packages so native builds work as well as cross Issue was that if $crosscoredeps is not defined the code barfs on @{$crosscoredeps->{$self->get_conf('HOST_ARCH'), rather than it just being empty. This code can be improved by a competent perl person.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 9b5160be8d5d838f08232306e6db96c7c4d5d7ce
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 22 00:15:54 2011 +0000

    Sbuild: Fix cross-build variable mismatches
    
    Only use HOST_ARCH and BUILD_ARCH in the configuration object.
    Drop all references to 'Host Arch' and 'Build Arch' in the
    individual Build or Resolver objects.

commit a69dacfd55980a81c5439b5cffdf174102367d53
Author: Wookey <wookey@wookware.org>
Date:   Wed Dec 21 22:41:08 2011 +0000

    Sbuild::ResolverBase.pm: Broken indentation tidy

commit 6083686e052ddf5a03b9e2475bd99152a9f6e697
Author: Wookey <wookey@wookware.org>
Date:   Wed Dec 21 22:41:07 2011 +0000

    Sbuild::Build: Cross-building uses apt-get build-dep
    
    Use apt-get -a $arch build-dep $package when cross-building instead of
    a dummy package.

commit b15919f444e085f03652ef44d20cedc8320f58b0
Author: Wookey <wookey@wookware.org>
Date:   Tue Dec 20 20:37:03 2011 +0000

    Sbuild::Build: Set environment variables for cross-building

commit fe563f73d9fe2798f5e556bb68ed114fbb8da995
Author: Wookey <wookey@wookware.org>
Date:   Mon Dec 19 19:29:52 2011 +0000

    Sbuild::ResolverBase: Use build arch for dummy deps package
    
    Do not use the host arch.

commit c9bf452a075f0d8abda6d4dce73f5bda027846a0
Author: Wookey <wookey@wookware.org>
Date:   Mon Dec 19 12:53:18 2011 +0000

    Sbuild::Build Add CROSSBUILD_CORE_DEPENDS{arch} to core deps

commit c89125965a155fe9f810aae18ee316382bd6cbcb
Author: Wookey <wookey@wookware.org>
Date:   Mon Dec 19 12:53:15 2011 +0000

    Sbuild::ResolverBase: Configure dpkg foreign-architecture
    
    Add setup-dpkg function to set dpkg foreign-architecture.
    Set dpkg multiarch cross-config; use the shell so that echo command is
    redirected properly.
    
    Add apt-config option to set apt to use $HOST package files
    
    Add reminder to tidy up sbuild foreign-arch config so the next build
    can be for a different architecture.

commit 82c87298b15f373ea33c5ae1d09274fb6bf3fcbb
Author: Wookey <wookey@wookware.org>
Date:   Mon Dec 19 12:53:14 2011 +0000

    Sbuild::Conf: Add dpkg-cross and pkg-config link to arm cross packages

commit 9fbe4b3b9b2fa89ae82ee0cd1498448db6699888
Author: Wookey <wookey@wookware.org>
Date:   Wed Dec 21 22:30:39 2011 +0000

    Sbuild::Build: Further clarification of build/host architecture
    
    Not clear if this should be $self->get('Host Arch') or
    $self->get_conf('HOST_ARCH') throughout.

commit aca7ffb653e507d27dc68291f8804ca04617463b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 17 00:36:31 2011 +0000

    NEWS: Document sbuild-stats removal

commit 5fee46565c4229c71528f26853142cda7d4da1a6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 17 00:36:16 2011 +0000

    sbuild-stats: Remove

commit c19435e3de029bdf0f5accb19846b589dd525400
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 17 00:19:45 2011 +0000

    NEWS: Document watches removal

commit 71edcfde524cc4e05c26a54b74ea427489ceec9b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 17 00:16:55 2011 +0000

    Sbuild: Remove watches
    
    Unused for several years, and no longer useful now we have
    package build dependencies and cloned minimal chroot environments.

commit fa4b379987e4ae1dcc938006bc0d0504f77101d5
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 16 11:52:51 2011 +0000

    NEWS: Document cross-build addition and internal removal

commit 68c7a10cad9d319f6fa45ff19803df2eb7e174a3
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 16 11:52:35 2011 +0000

    Sbuild: Remove internal resolver

commit 42795b34d5cf5b54fd96dba6e8751a6ae7bc737f
Author: Wookey <wookey@wookware.org>
Date:   Tue Dec 13 02:37:40 2011 +0000

    debian: Add changelog entry for cross-build changes
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 85274fe89e62a711b83b7275b10cdfc6f9d1b2b8
Author: Wookey <wookey@wookware.org>
Date:   Tue Dec 13 02:37:42 2011 +0000

    Sbuild::Conf: Add MULTIARCH_CORE_DEPENDENCIES table
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit ffea1bc4be4e4ead2399ad220feeff614c2eafd0
Author: Hector Oron <hector.oron@toby-churchill.com>
Date:   Tue Dec 13 02:37:33 2011 +0000

    Sbuild: Add Xapt as a dependency resolver
    
    Signed-off-by: Hector Oron <hector.oron@toby-churchill.com>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 50821b892c348a4ba1ff273c82ba84ad0bcbb4de
Author: Hector Oron <hector.oron@toby-churchill.com>
Date:   Tue Dec 13 02:37:26 2011 +0000

    Sbuild: Initial support for cross-building
    
    Use BUILD_ARCH and HOST_ARCH throughout to permit cross-building.
    Sbuild::Build: Add dpkg-buildpackage -a option when cross building.
    
    This patch was originally written by Hector Oron with bugfixes
    and changes from Wookey and Roger Leigh.
    
    Signed-off-by: Hector Oron <hector.oron@toby-churchill.com>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 6f95db6318458c4f7dde44d388fbba48a3ea1ed2
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 7 20:42:14 2011 +0000

    debian: Document forward-port of buildd-0.61.0 changes

commit 252eaf85f3cca1c45fa9848cb988c1c387f16c02
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Nov 6 16:09:05 2011 +0100

    etc/99builddsourceslist: fix a typo

commit 882d64afd5bb9b5363a8e97aab9e5a43cf778d51
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Sep 11 23:45:06 2011 +0200

    create-chroot: use directory in schroot snippet, not location

commit 0ba357185e76fde311e8ee1f571fca4ee42008b6
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Jun 26 22:14:08 2011 +0200

    etc/99builddsourceslist: use backports.d.o for main bpo archive

commit 4deabd9763c630992b00042824a838a45eeb7dc5
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Jun 1 00:01:45 2011 +0200

    create-chroot: create /var/lock/sbuild in the chroot

commit 9634ef81025880f3c93201bbfd0b087a6965c9ef
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 7 13:59:36 2011 +0000

    NEWS: Document Build-Depends-Arch and Build-Conflicts-Arch

commit 5f35abb2a5764c6592ac8bc6bbf14b98c383c689
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 7 13:56:56 2011 +0000

    debian: Document addition of Build-Depends-Arch and Build-Conflicts-Arch

commit 89ac7f291407d198c6f229e289867f90254e1bd8
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 7 13:55:15 2011 +0000

    Sbuild: Support Build-Depends-Arch and Build-Depends-Indep

commit 5d9d8894cd34f923736e9832ec0be8dd505b1ace
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 21:53:17 2011 +0000

    NEWS: Document schroot namespace fix

commit 5d094074764799a936e0b95ef3c4ed587a33f4eb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 21:47:02 2011 +0000

    debian: Close #612630

commit f082ad9fa12d61ec8c42ba0d979d37d60ee1c908
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 21:44:20 2011 +0000

    Sbuild::ChrootInfoSchroot: Support session namespace
    
    Attempt to get session information using a session: prefix.
    If this fails, fall back to the old-style unprefixed session
    identifier, to support older schroot versions.

commit fc085b97e1ee4acfd21206625093f24c3d1e5b64
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Sep 3 13:35:13 2011 +0200

    bin/create-chroot: add s390 to the linux32 architectures

commit 8e56f027a0ac5f9958b258bc2a201f48f7555160
Merge: 44bd1e7 4ce195a
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Sep 3 13:34:18 2011 +0200

    Merge branch 'master' of git://anonscm.debian.org/git/buildd-tools/sbuild

commit 4ce195a64edc7785ac85fa7d2474b82914b09899
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 28 10:30:18 2011 +0100

    Sbuild::Chroot: Remove apostrophes from perl code run via sudo

commit 44bd1e7b7967928a22f06fdbbd5290de14b218dc
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Aug 23 07:31:03 2011 +0200

    [Sbuild::Build] specify UTF-8 encoding in the .changes's MIME part (Closes: #638928)
    
    Thanks to James Vega for the report.

commit 2943ba47ef805a04029aa46036e03e1fa3bff4c3
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Aug 2 21:09:04 2011 +0100

    NEWS: Document alternative resolving

commit 48b1e75b42c092410a09a40b2c19461d20ded747
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Aug 2 21:08:46 2011 +0100

    debian: Document alternative resolving

commit b015217c8d760720c582f77b5b07dba39dd08197
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Aug 2 21:08:26 2011 +0100

    Sbuild: Allow configuration of alternative resolving

commit 7522366f83a44065a300350ac5e219dcd3715cbc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 24 12:46:22 2011 +0100

    debian: Close #635250

commit 05ba5bf17cda2f072f22cc44d75cb76f3efd7a80
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 24 12:45:27 2011 +0100

    Sbuild::Options: Add --jobs as an alias for -j

commit 50091683e7007ae559ba759e3ceca218457e17d4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 23 21:18:03 2011 +0100

    debian: Close #635203

commit c1694ba41d9e27c3fd55ad0048c8743bc034e334
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 23 21:17:10 2011 +0100

    debian: Bump version to 0.62.6-1

commit 74a1253f63cf881fa1c88eaad0f69f03d1a9bef4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 23 21:17:00 2011 +0100

    NEWS: Bump version to 0.62.6

commit a551a6f37ae7ffee3efc9c67d16ceb2531ff5614
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 23 21:16:06 2011 +0100

    man: Add --chroot to synopsis

commit b586962d4e3d148c51ce2b166e43259eb3486b85
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 13 19:57:32 2011 +0100

    debian: Version 0.62.5-1

commit c6ab7925278f889a05995a42e445c08401305f37
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 13 19:55:50 2011 +0100

    NEWS: Bump version to 0.62.5

commit 187b08800407178af052c37b04636259413c30a1
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 13 19:54:06 2011 +0100

    test: Add checks for building from a source tree

commit a8a60964f28b23fbaae73a61303505f7dad61aa4
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jul 11 16:06:52 2011 +0100

    test: Test sbuild batch mode

commit 277b539a40bb3f29e414df2edce7bc552e6e976c
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jul 11 15:36:25 2011 +0100

    test: Use generic paths

commit 5f59d15bcc21f3b88c61017526684aaf98bf3b97
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jul 11 15:29:00 2011 +0100

    sbuild: Build using any source directory name, not just package-version

commit 0783ea3f44e160782e47cbd5221da04369a91e8f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jul 11 15:06:07 2011 +0100

    Ensure that Dpkg::Version epoch and revision defaults are used correctly
    
    Set to 0 if absent for correct version comparison, but we need to
    check if that's the real value when using in filenames and other
    version strings.

commit 159ee505ca7bba13565466880eac95664c949583
Author: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>
Date:   Mon Jun 27 22:19:32 2011 +0200

    the mail-wrapper script is longer in home/buildd/bin
    
    This is the actual content for the .forward file
    
    Signed-off-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 40a1e33c24d589c616c435344d6b5b80c9eb7fa3
Author: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>
Date:   Mon Jun 27 22:19:31 2011 +0200

    Make NO-DAEMON-PLEASE work with home in /var/lib/buildd
    
    buildd's home moved "recently" from /home/ to /var/lib. The init script was
    not updated.
    While in here, add a space after the name so the warning message is not
    squeezed.
    
    Signed-off-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 59e10bdd5bb649f4631943e5b1de0f0f55d7f989
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 25 14:06:26 2011 +0100

    Sbuild: Remove unused code

commit 4d80969823ed8c8736c1347cb886664be8e7e33b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 25 11:41:07 2011 +0100

    debian: Document use of more Dpkg modules

commit 17f1cab30105897532fc85405660781e7625b371
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 25 11:39:20 2011 +0100

    debian: Document lintian log colouring and $log_colour

commit 5aeb3ea8065c4f5b32fd3e3ead58afaf0a218e75
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 25 11:39:01 2011 +0100

    NEWS: Document log colouring for lintian and $log_colour

commit a4cbee0b3951afb03de98a33d5b60630bfa57531
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 25 11:29:44 2011 +0100

    debian: Close #631595

commit bb9312d265d809f75350905505111885e666ac19
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 25 11:29:35 2011 +0100

    NEWS: Document $build_environment

commit 41a49935d56602be093cae339147094e74de6db0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 25 11:29:20 2011 +0100

    Sbuild::Conf: Note lack of filtering of build environment

commit 8ed34327528953d31f3a5e621c17e28ddffba159
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 25 11:23:17 2011 +0100

    Sbuild::Conf: Add BUILD_ENVIRONMENT configuration key
    
    This allows addition of specific environment variables to the
    dpkg-buildpackage environment.

commit f9f84cbca5716a292757e3be428240928d1269ea
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 25 11:21:18 2011 +0100

    Sbuild::Chroot: Add ENV_FILTER to allow customisation of filter
    
    Previous was set via the ENVIRONMENT_FILTER configuration key,
    but this is global, not per-invocation.  Set default ENV_FILTER
    from ENVIRONMENT_FILTER.

commit c83797d5380c0082cd48ef8facb332a8017ba70a
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 24 22:52:58 2011 +0100

    debian: Document /var/lib/sbuild/build

commit 6deb6e8e3872df446c8e3d60b4aa992ea17e6f0d
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 24 22:52:42 2011 +0100

    NEWS: Document /var/lib/sbuild/build

commit d2cb1f6913b82b7615d1fa289a596c5163d44c16
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 24 22:39:15 2011 +0100

    man: Update description of /var/lib/sbuild

commit 491807fa128f710de23eb161a67517e11d43d5a7
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 24 22:37:37 2011 +0100

    build: Install /var/lib/sbuild/build
    
    Add directory for holding build trees; this can be bind
    mounted by schroot when starting a new session.  This
    makes it easier to get at builds when using snapshot
    chroots, and also means the space for the build doesn't
    need to be in the chroot when using LVM snapshots, which
    would otherwise waste disc space.

commit 882527190b01c0271767c2b1ca8923dcc3596a2e
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 24 22:33:59 2011 +0100

    Sbuild: drop unused split_version

commit f4dd2a1dde292f190195a96ba361da6679c86a68
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 24 22:33:02 2011 +0100

    sbuild: Use Dpkg::Version in place of split_version

commit 8ab5cae5f3d01063aab147b0d3d528233d3c5122
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 24 20:29:51 2011 +0100

    Sbuild::Build: Use Dpkg::Version rather than regexes and split_version

commit dc71b36486b98077bca35026549e8d5057f33049
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 24 20:27:06 2011 +0100

    Sbuild::Build: Set HOME to /sbuild-nonexistent in the chroot
    
    /nonexistent is the home directory of the nobody user; change to
    /sbuild-nonexistent to make it explictly clear that the directory
    does not exist, and this was done deliberately by sbuild, to avoid
    confusion with the nobody user.  Thanks to Marc Haber.

commit 7e2fc735d9b7986bc443fcc9ece5a2c70ceb06e1
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 24 19:43:59 2011 +0100

    Sbuild: Replace built in version comparison with Dpkg::Version
    
    Part of patch set to remove duplicated logic and use libdpkg-perl.

commit 0d8468a4b9b4dd1ce428310b3c86502c2b2a8c1b
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 23 19:04:21 2011 +0100

    sbuild: Remove obsolete and unused SBUILD-FINISHED logic

commit 76277b346397ad03f451768efd893500c288292a
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 23 18:50:58 2011 +0100

    Sbuild: Implement dsc_files in terms of Dpkg::Control and Dpkg::Checksums
    
    Remove parse_file.  The role of this function is now completely replaced
    in all code by Dpkg::Control and its related modules.

commit a81a0e9b4e6f16bf6bd111b5faa26e477e347448
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jun 22 17:45:36 2011 +0100

    sbuild: Use Dpkg::Control in place of parse_file

commit 77c8cf80bcb746ff1b8232cac0cc6df85d0d2d92
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jun 22 15:19:00 2011 +0100

    debian: Close #612324

commit 601af3d6f3a7028b88e1b88e7e3afeeeef4877bb
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jun 22 15:13:39 2011 +0100

    sbuild: Generate source package prior to real build
    
    So that the code code only operates on .dsc files either
    locally or via download, package directories with dpkg-source -b
    before instantiating and using Sbuild::Build.  This additionally
    means there's a single codepath for downloading sources rather
    than a separate building path as well, simplifying the logic
    overall.

commit 06b2db93d292b602cf19aae62d992a7c24d93deb
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 20 23:29:25 2011 +0100

    Sbuild::Build: Only log to one logfile, dropping build log
    
    Only create the package build log, dropping the main build log
    (which would only ever be used to log errors prior to a build
    commencing, following which all output would be redirected to the
    package build log).
    
    This removes a layer of I/O redirection, which complicated the
    logging code, and added an extra layer of hairy complexity.

commit 81a63301893120ddfe5ed98cc809d050149763e6
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 20 20:56:28 2011 +0100

    sbuild: Only create and run a single job

commit d98f2963e35d5c9178a72d0b68a446c7c737ecc5
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 20 20:35:17 2011 +0100

    debian: Document sbuild building a single package only.

commit 218be9a06a99d1f27cc4f601d2182dba3cc9c85d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 20 20:35:00 2011 +0100

    NEWS: Document sbuild building a single package only.

commit 34ebcd92526ee67531d2360eedf89f062bf1e606
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 20 20:34:43 2011 +0100

    man: Document sbuild only building a single package

commit 570be3c49e966d786578bf4d5980879e47a648b8
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 20 20:26:51 2011 +0100

    sbuild: Only permit one build at once

commit 540747d0b7b14a62ff75b8371af6aedcd7a7ff56
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 20 20:26:30 2011 +0100

    Sbuild::Build: Tidy log colouring and reduce verbosity

commit 0ec4080e2a737238a0786e832a5b3b744a7801e2
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 20 19:41:25 2011 +0100

    debian: Close #630791

commit 098afec7fa6d7e60989b3b99c08533ffd6000d33
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 20 19:35:23 2011 +0100

    sbuild-adduser: Use current options

commit b5fc26f99086fcbc4e291730a19bf057856507ab
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 19 22:34:24 2011 +0100

    debian: Document log colouring

commit 4f55b085b686a215578ec3d8eb8dfe0cca3ed936
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 19 22:34:15 2011 +0100

    NEWS: Document log colouring

commit 3ed62fdb8a61c6492e7dfae3288efced0446f541
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 19 22:31:38 2011 +0100

    Sbuild::Build: Colour distribution if different from changelog
    
    In order to make it clear that there may be a problem e.g.
    if building an upload for experimental in an unstable chroot,
    colour yellow if different.

commit 5762ea37d88b89891e1f67fb21548144d39541f3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 19 22:30:34 2011 +0100

    Sbuild::Build: Make log colouring generic
    
    Colour lines based upon regex matches.  Make the regexes
    configurable using the same mechanism as for log filtering.
    Also make colouring configurable as for log filtering.

commit e371d7ff4343c9a82550ef94bfaaed9238f8de61
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 19 20:42:45 2011 +0100

    debian: Close #631060

commit 7e87fe6cf3e20ce4a2397659c12d2c257cc4e6a5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 19 20:42:23 2011 +0100

    Sbuild::Build: Highlight lintian results in red/green

commit 5252ea9dce7b876c5b59c439f650ee45709560f5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 19 20:41:22 2011 +0100

    debian: Bump version to 0.62.4-1

commit dc3a4b77f23a769cbac977d650d14a926cd24b62
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 19 20:41:09 2011 +0100

    Bump version to 0.62.4

commit 868715d47b7dff0682bb602407b5d4742e34ac45
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jun 15 12:55:38 2011 +0100

    Sbuild::Conf: Sync signing options from buildd-0.62.3

commit 4b004185bfb2264e21d650cce3ad091f22cc324b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 11 15:50:55 2011 +0100

    Sbuild: Set HOME=/nonexistent in the build environment
    
    Sbuild::Conf: Allow HOME in environment
    Sbuild::Build: Set HOME=/nonexistent
    
    This additionally ensures that HOME is set when current sbuild
    versions are used with older (1.2.x) versions of schroot where
    HOME is not set when the -p option is used to preserve the user
    environment.

commit 99406aec96b0952e1b548ed816ba6e99e296b8ee
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 4 00:08:29 2011 +0100

    debian: Close #629005

commit a0f6242a2822bcb055386c51bd8630abb46bbd25
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 4 00:00:50 2011 +0100

    Sbuild::Utility: Only end session if one exists

commit ac44b441b5a5f881bda829a56918b0d97de7d6e8
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 3 23:56:12 2011 +0100

    Sbuild::Build: Missing lsb-release is not an error

commit 7a1fe3d277b02f13e06b831166f235947373125b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jun 1 19:39:19 2011 +0100

    Sbuild::Build: Add 'Build Dir' to replace 'Chroot Build Dir'
    
    In order to reduce direct access to the build chroot from the host,
    add 'Build Dir' to store the path to the build inside the chroot,
    to replace 'Chroot Build dir', which stores the path to the build
    from the host.

commit e9fa79621c10803f076c7ec3261f87112592369c
Merge: b293b44 f5c642e
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jun 1 11:39:13 2011 +0100

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit b293b44bc97e4d9c5e72d544b0d7d839634c8e02
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jun 1 11:37:05 2011 +0100

    Sbuild::Chroot: Create chroot lock inside chroot
    
    To avoid issues with /var/lock being an absolute symlink to
    /run/lock on the host (which may or may not exist depending upon
    which Debian version the host is running, and which causes the
    chroot lock to be shared amongst multiple build chroots), the
    chroot lock is created and removed inside the chroot.  Inside the
    chroot, absolute symlinks will always point inside the chroot, so
    /var/lock will always be a valid (and unshared) location.

commit acae84866e28613ccbfe3dbb501c5f300ddd819c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jun 1 11:35:02 2011 +0100

    debian: sbuild needs apt-utils for dependency package

commit 398c51c569099c201383b0b34aef59abdf1b7853
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jun 1 11:34:41 2011 +0100

    Sbuild::Build: Filter package build directory in log

commit f5c642e0786356ccb58d141dda0dbebf0778227a
Author: Philipp Kern <pkern@debian.org>
Date:   Tue May 31 23:31:30 2011 +0200

    create-chroot: set check intervals to 0 for the new filesystem

commit 0c0eefab62b93e98ff5fc204dbb7fe8b8051075d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon May 30 16:18:13 2011 +0100

    debian: Document environment logging

commit 1d76274e548eb1da41101cb000c1369cfad65102
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon May 30 12:39:11 2011 +0100

    Sbuild::Build: Log build environment prior to building

commit 6c2060a7420b700e81cd33a78abd981a5567d7d6
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon May 30 11:02:05 2011 +0100

    debian: Close #608416

commit 1a64639219183889f44142cb68d308776b4de602
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon May 30 11:00:57 2011 +0100

    sbuild-createchroot: Don't overwrite sudo symlink

commit 60d0fe5fde49afaeaf71877a73edce6bd29ddedb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 17:02:41 2011 +0100

    NEWS: Document -j

commit 8a94f8327bdee954deb62ed12e4969cd4dd5b2fb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 17:01:57 2011 +0100

    debian: Close #626357

commit f3da9667e5763d1f6ba13b7a572c344f5ef80b86
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 17:01:19 2011 +0100

    Sbuild::Options: Add -j option to run parallel builds

commit e631f871e0ec70fc41f93802ca168f3e13b94da2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 16:22:25 2011 +0100

    Sbuild::Build: Simplify lintian status codes

commit a05e7a6a14e67f21987905b3ca37a0cf5b988c63
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 16:22:10 2011 +0100

    debian: Don't package removed files

commit 7584c86cb333e5457cc31c9261bab89911335f12
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 14:29:27 2011 +0100

    debian: Document requirement for schroot >= 1.4.22

commit 6cc2097c04d1ecac9c28d6e84e9d607dbe10caea
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 14:28:34 2011 +0100

    debian: Bump minimum schroot version
    
    1.4.22 is required for the buildd profile.

commit 68591471252f9fb7f9cdcd5ce34b2ce84912512f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 14:27:29 2011 +0100

    NEWS: Document buildd profile move to schroot

commit 84ad6f46421f6b5f94c30906eafb4dc3f2a6c3f6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 14:16:10 2011 +0100

    debian: sbuild is arch all again

commit 1c398a4498172d25db29128cfca7415c16c354ad
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 14:23:07 2011 +0100

    NEWS: Remove sbuild-schroot wrapper

commit fe86c4d70da50a03a4376cfec9f3c14200a591c3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 14:22:56 2011 +0100

    debian: Remove sbuild-schroot wrapper

commit b5f31a7c6afec45c6036acb48ad6447819ebefad
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 14:22:33 2011 +0100

    Remove sbuild-schroot wrapper program

commit 8ff97c75246b424f19730befab9393173673f43f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 14:17:32 2011 +0100

    Sbuild::Conf: Use plain schroot binary rather than wrapper

commit 3b5850556d93a7e587d4d45c9f322e86b6680353
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 14:15:48 2011 +0100

    Sbuild::ConfBase: Default BUILD_USER to current user

commit 1242f671fd267319028602f79b8ac1923787baed
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 14:16:54 2011 +0100

    Sbuild: Use BUILD_USER rather than hardcoding sbuild

commit af7c63329c4b6d0c9cd68e04e000e830107027d2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 13:44:11 2011 +0100

    debian: Close #617450

commit a569394e3734f5d532f2c7eaa297b22727abfa6b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 13:43:13 2011 +0100

    Sbuild::Build: Add lintian and piuparts status to summary

commit 5efb94d1696c80d88f28627e8897fe4edc290930
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 13:22:31 2011 +0100

    debian: Close #626826

commit d1e199f2c2b666c477be01ebed872f2bdb298704
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 13:19:48 2011 +0100

    Sbuild::Chroot: Use /var/lib/sbuild/chroot-lock
    
    /var/lock may be a symlink to /run/lock on the host, which makes
    direct access using $target/var/lock impossible from the host.
    Switch to using /var/lib/sbuild which is guaranteed to be a real
    directory.

commit 152b9de5e3fe9f9e638000bd278385c8c5da893f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 13:06:46 2011 +0100

    debian: Close #619892

commit 625fb4583dd4400b812a24f7ee91c3f22df54f5c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 13:05:27 2011 +0100

    debian: Lock rather than delete accounts
    
    On purge, lock accounts.
    On installation, unlock.

commit 531a6a9380d2ec7b6b242d60488b8c8fdee7cf02
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 11:02:07 2011 +0100

    debian: Close #622735

commit b0042a56435c4ff1d1e6892c3adfb418bc81ce0e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 11:01:18 2011 +0100

    sbuild-createchroot: Add sbuild user and group before updating
    
    basesetup() requires the presence of the sbuild user and group
    to chown various files/directories.

commit f7c772fa45deaa41bbc35503e4568102cad5daf5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 29 10:16:43 2011 +0100

    debian: Close #627641

commit 377c53c2943b841e311919e30abc13a9e316cd7c
Author: Daniel Baumann <daniel.baumann@progress-linux.org>
Date:   Mon May 23 08:04:52 2011 +0200

    Correcting sbuild.postrm to not fail if /etc/sbuild/chroot does not exist (Closes: #627641).
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 04a8737ac4d95d3826ea4c4e9bdce9f93bf8c195
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu May 26 17:27:30 2011 +0100

    debian: Close #627854

commit c09e21745d4e45b5eaa1ed5b3b80cc3a8e0a8873
Author: Samuel Thibault <sthibault@debian.org>
Date:   Thu May 26 17:22:22 2011 +0100

    Buildd::Mail: Remove empty newline from .changes
    
    ftp-master started refusing .changes files which have a trailing empty
    line (after the GPG end of signature).  It happens that mutt introduces
    one when signing GPG in traditional mode.  Other tools probably do too.
    buildd-mail-wrapper should probably drop it automatically.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 36614d123b4cff61896d815b882e717a76bb9f5e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 15 17:46:01 2011 +0100

    debian: Document buildd init script runlevels

commit 8a9bb2dfa8147a7437e67d4b0caf71bd13c71fee
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 15 17:44:57 2011 +0100

    debian: buildd init scripts uses standard runlevels
    
    Start buildd in 2-5, not S.  Stop in 0, 1 and 6.

commit 20440d40b9a40f01908798549d09bca346da14b9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 15 16:05:13 2011 +0100

    debian: Document buildd profile removal

commit 3d33c55f3a2787c9e515cd8d3609cf01c73addf6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 15 16:03:27 2011 +0100

    sbuild: Remove buildd profile (moved to schroot)
    
    Because sbuild is arch-all and the profiles are arch-any, they
    need generating in an arch-any package in order to be useful.
    Additionally, all the other profiles are in the schroot package,
    so it makes sense to keep them together so they can all be
    maintained as a set.

commit d73e2a25e145237c384950fd84789e2cd578510f
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 19 12:02:28 2011 +0100

    debian: Bump version to 0.62.3-1 and Close #622832

commit 6a40432c0ccf3846018efa93ff62e8db6535c381
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 19 12:02:02 2011 +0100

    NEWS: Bump version to 0.62.3 and document alternatives change

commit d4ff9f89a8d86a5350aa9f1dafdc6d1add9f2234
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 19 11:25:54 2011 +0100

    Sbuild::ResolverBase: Allow alternative dependencies for same package
    
    Currently, when alternative dependencies are not allowed, only the
    first alternative is used.  Here, this rule is relaxed when the
    alternative dependency or dependencies are for the same package name,
    i.e. foo (rel x) | foo (rel y) [ ... foo (rel z) ]
    since while these are separate dependencies, they are in reality a
    single logical dependency.

commit fd9c9216f5c33d20d5b5011655be0f273ee010e7
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 5 10:46:54 2011 +0100

    debian: Log colouring is configurable

commit 4e4a7c90dd158394e67611c1880af05807ed6d47
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 5 10:46:15 2011 +0100

    NEWS: Log colouring is configurable

commit 6f8534d2e503245903ce5f0cd81c888f396918ee
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 5 10:45:57 2011 +0100

    Sbuild: Allow log colouring to be disabled

commit 64ff82618b84282a98398ddb3c2d59991e3eeef6
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 5 00:26:50 2011 +0100

    debian: Close #620758

commit 9f395ee14caf33352957728a28a2b90ecf7851e1
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 5 00:25:18 2011 +0100

    Sbuild::ConfBase: Set MAILTO from hash in DISTRIBUTION SET trigger

commit 6d45c877df377f2cc09ea4e62111dc149cde8226
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 5 00:24:39 2011 +0100

    Sbuild::Conf: Set maintainer name in trigger

commit 328b2f05918edf99d1db8cf8664e00805d7f2579
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 5 00:21:44 2011 +0100

    sbuild: Move binNMU check to top level
    
    Must be done after processing options, or else it will never work.

commit 9af4466c20cfb9a31f99cb50a132a433e58cceed
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 5 00:05:19 2011 +0100

    debian: Merge buildd-0.61.0 changes

commit 4bb4614487f3eb2dfcf410121c50406a5dd514ce
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Apr 2 13:43:14 2011 +0200

    [Buildd::Daemon] move_to_upload: fix binNMU uploading

commit b8fba2de0b2c273d2983007135502cc3edc196bc
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 29 20:11:12 2011 +0200

    [Buildd::Daemon] support autosigning of binNMUs

commit 3382ef353c61963d9983a2892731db4f6c9c2f0a
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 28 21:50:39 2011 +0200

    [Sbuild::Conf] adjust ENVIRONMENT_FILTER to be sane

commit b20bb0f6848f8f0b17414ac47f53b523607dc20e
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Apr 4 23:46:13 2011 +0100

    Sbuild::Build: Forward port build autosigning
    
    Sbuild::Conf: Put SIGNING_OPTIONS into an array instead of overwriting
      values.
    Sbuild::Conf: Handle command-line signing options correctly.
    Sbuild::Build: Invoke debsign post-build.
      Passing -k to dpkg-buildpackage involves the chroot having access to
      key material.  Invoking debsign post-build outside of the chroot
      seems to make much more sense.  It might be interactive at this point
      but at least for the buildd.d.o case that's not going to happen, so
      that's ignored in this design.
    Sbuild::Build: Only try to invoke debsign on successful builds.

commit 6f9df8381a31b9d4ca8928fe8e6f0cdaec9c3d60
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 4 23:18:01 2011 +0100

    Sbuild::Build: Add extra checks when doing binNMU
    
    If the maintainer name is unset, this can lead to errors.
    Note that this should be detected earlier, but check here
    as well to ensure we never use maintainer name undefined.

commit 5d822d9f99c1601c281cd9cedc337ffeec097beb
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 4 22:02:59 2011 +0100

    debian: Close #620112

commit 961752291078ffa5f5dcea15be508917dfa0d15d
Author: Anders Kaseorg <andersk@mit.edu>
Date:   Mon Apr 4 21:57:36 2011 +0100

    Sbuild::Build: Improve binNMU changelog handling
    
    According to https://wiki.ubuntu.com/MultiarchSpec#Binary%20NMUs ,
    although a Multi-Arch: same package may not be binNMU’d on individual
    architectures, it should be possible to schedule a binNMU on all
    architectures at once, and have the resulting packages remain
    co-installable.  However, this does not quite work right now for a silly
    reason: sbuild generates a different timestamp for the binNMU changelog
    entry in each build, and the differing changelog.gz files break
    co-installability.
    
    This fixes the problem by generating the timestamp in a deterministic way:
    we just copy the timestamp from the previous changelog entry.  (Since the
    source has not changed since that time, it seems like as good a time as
    any to write into the changelog.)
    
    Certain automated backport setups that use --append-to-version are also
    affected by this issue and require this fix as well.
    
    Use dpkg-parsechangelog to parse previous changelog entry to acquire
    all needed information, including the correct date.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 40205e7eb6ba199e7a900f27c12c61edd20a6b7c
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 4 18:11:12 2011 +0100

    debian: Close #620589

commit 9a73da4e5c4b261a549d3942b4469ffe4935bdb3
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 4 18:10:21 2011 +0100

    NEWS: Document log filtering changes

commit baf300b302d2fab45eaa96c06eea2a95b353600d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 4 18:08:16 2011 +0100

    Sbuild::Conf: Add LOG_FILTER
    
    Allows disabling of log filtering.

commit 7bfce2207291c4299f36c85fada45cdb6e43638f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 4 18:05:45 2011 +0100

    Sbuild::Build: Improve clarity of log filtering
    
    Surround filter string with "«" and "»" so that strings such as
    CHROOT and BUILDDIR can't be confused with any actual appearance of
    the same string in the build log.

commit c8e986d023df635dd8e9fc73a4cf45c4b0510765
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 4 17:45:30 2011 +0100

    debian: Close #620797

commit cefa705393f0ae4c1f38f8d740eea5f77d0a9a78
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 4 17:42:17 2011 +0100

    Sbuild::ResolverBase: sources.list fragments must have 0644 permissions
    
    This is needed in order for apt-cache to be able to read them when
    running as a normal user (not root).

commit ead64a7794af0bbac877746c278b41de37ba94a4
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 28 23:51:05 2011 +0100

    Revert "man: Document --suppress-successful-logs"
    
    This reverts commit c448d24981d6e405e410f40ff83af726a5931edf.

commit 1bf2b951365ef04ab4492516e32bc0662b8c3cc6
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 28 23:50:50 2011 +0100

    Revert "sbuild: Add new option to suppress log mails for successful builds"
    
    This reverts commit 81f4ee05f49275fc0417099a9e3f2bd57b3ac001.

commit ef4dc57770f5ef497ace28310bd20abd3a327136
Author: Modestas Vainius <modax@debian.org>
Date:   Sun Mar 27 00:56:37 2011 +0200

    Sbuild::Conf: Rename end_session to purge_session
    
    Rename:
        $end_session -> $purge_session
        END_SESSION -> PURGE_SESSION
    for consistency with the rest of similar sbuild.conf settings.
    
    Also fix PURGE_SESSION key properties (TYPE, HELP, CHECK) which were forgotten
    after copy&paste from PURGE_BUILD_DEPS.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit c47a8ab88cedc9423aabad7914bb4374952e9cc4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 26 20:52:41 2011 +0000

    debian: Close #619332

commit c703076f82f400ba29990d7f1aee50499698cf13
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 26 20:50:43 2011 +0000

    NEWS: Document --purge-session and $end_session

commit edec8e64208bc31f8dac4d16f5b03099d73ea7c6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 26 20:46:35 2011 +0000

    Sbuild::Conf: END_SESSION allows same purge modes as purge options

commit 466a633a279268bf74db3a385b40d0a70435d73b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 26 20:23:26 2011 +0000

    debian: Close #619526

commit 5df906cd22c7f073edb6a51af8a6d49a5e208aa7
Author: Marc Deslauriers <marc.deslauriers@ubuntu.com>
Date:   Sat Mar 26 20:20:27 2011 +0000

    Sbuild::Build: Add work around for wrong build-essential entry on Ubuntu Lucid
    
    Work around Lucid issue that has diff listed in build-essential
    instead of diffutils. This causes schroots that don't have
    universe enabled to fail to install dependencies. (LP: #741897).
    This may be worthwhile for Debian users who want to build packages for
    Ubuntu.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit e40ed8704cc7858065d2e443785c9381fc1b1c69
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 26 20:18:42 2011 +0000

    debian: Close #619002

commit c448d24981d6e405e410f40ff83af726a5931edf
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 26 16:28:14 2011 +0000

    man: Document --suppress-successful-logs

commit 81f4ee05f49275fc0417099a9e3f2bd57b3ac001
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Mar 25 16:19:10 2011 +0100

    sbuild: Add new option to suppress log mails for successful builds
    
    With autosigning one might just be interested in processing the failed logs as
    the successful logs do not need any manual handling.

commit 00293ecbb9cd4d639f5d2ad69fd973c66b3fe4f8
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Mar 25 15:48:32 2011 +0100

    [Buildd::Daemon] add arch_all building support

commit f096e18462a2be6117739bab7eadc383a32ec7b5
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Mar 24 21:40:22 2011 +0100

    [Sbuild::Build] invoke debsign post-build
    
    Passing -k to dpkg-buildpackage involves the chroot having access to key
    material.  Invoking debsign post-build outside of the chroot seems to make much
    more sense.  It might be interactive at this point but at least for the
    buildd.d.o case that's not going to happen, so that's ignored in this design.

commit c725c0a269282654376aa154043c51596205b928
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Mar 24 20:46:12 2011 +0100

    [Sbuild::Conf] handle command-line signing options correctly
    
    SIGNING_OPTIONS put into an array instead of overwriting values.

commit a4d14a3b0b19c120b3ff640badfb8d6ce853cefa
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Mar 24 20:42:29 2011 +0100

    [Sbuild::Build] check correctly for SIGNING_OPTIONS being an ARRAY

commit d8cc7e5bea0d51d7550e2eeb66a36eb75906f365
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Mar 24 19:58:17 2011 +0100

    [Buildd::Uploader] make .changes -> .upload substitution clearer

commit d0de2ffcf4bd31b3235e04938d8e6c7b20aabb9e
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Mar 24 19:22:45 2011 +0100

    [Sbuild::Build] attach a .summary file to MIME build logs

commit 1f688ed937015682b393862c7d8edaaf0295430e
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Mar 24 15:34:26 2011 +0100

    [Sbuild::Build] put KEY_ID into the log mail header if set

commit 914e22d60ccd95ea8cba4733ed698fa81014bc72
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Mar 24 15:29:48 2011 +0100

    [Buildd::Daemon] put signed builds into the upload queue

commit 76bb3689f4ebd1c8a38b936d38c1a13c9e08cdca
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Mar 24 15:07:25 2011 +0100

    [Buildd::Daemon] pass SIGN_WITH as keyid to sbuild

commit da7e48b9b33c289b5342e51dfd822f32ae5767b9
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Mar 24 15:02:45 2011 +0100

    [Buildd::DistConf] SIGN_WITH added as a new variable

commit 7e4e1f96a86c6b624649643fb79657d150a78535
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Mar 24 14:53:43 2011 +0100

    [Buildd::Daemon] remove unused read_config function

commit 276a761cdbba468d787b4340c5ccec83f76d1a7f
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Mar 19 14:48:55 2011 +0100

    debian/rules: do not install the init script on buildd builds

commit 1759b73076705676e14747c174efe86184928746
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Mar 19 14:44:12 2011 +0100

    debian/buildd.*{inst,rm}: remove 0.58.3-1 upgrade code

commit 66024919a6f64ecec8873b3bc1a34249f5112b94
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sat Feb 19 14:03:52 2011 +0100

    squeeze released: git rid of etch-only code, change codenames in creat-chroot

commit 83012e2f6001c2391c9ebccd339b7e5bed56c1b0
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Mar 13 22:50:09 2011 +0100

    take build_dep_resolver from wanna-build if not locally configured

commit 90d94ba3b20c9bb84f78b0b4ac03170039df1e05
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 26 15:08:15 2011 +0000

    .gitignore: Add newly-generated files

commit 1489e252d1479bb60adc6eef590b86191e5ea847
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Mar 25 22:10:35 2011 +0100

    [Buildd::Daemon] fix up retry

commit 085708fe07458005b4c2495d37af705447b0dbf5
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 23 23:56:58 2011 +0000

    Sbuild::Build: Don't log repeated schroot deprecation warnings
    
    Log only once, then ignore subsequent messages.

commit 65cc424b4e54a8d61a3a451473b750b50b5258dd
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 23 23:26:11 2011 +0000

    TODO: Update

commit faca465524877d3a6e77888e96ca96402b541d08
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 23 23:25:57 2011 +0000

    debian: Close #619416

commit e6089d3188af7ff9c24b00f5f310cbf88e8cc62c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 23 23:23:16 2011 +0000

    Sbuild::Conf: Don't output BUILD_DIR by default
    
    Since it's build-specific, don't use in sbuild.conf or
    sbuild.conf(5).

commit 2b7bf4a4bdaf2819b11a7c267e558c8b1f2746dd
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 23 12:50:44 2011 +0000

    Sbuild::ConfBase: Warn if $HOME is unset

commit f5ea293c906298ffd2b3f7a974d90d072becdad0
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 23 10:40:57 2011 +0000

    debian: Close #619288

commit 53f56cc34a416b60573fb7d0f5fb2ad39e4671c6
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 23 10:36:16 2011 +0000

    Sbuild::ConfBase: Don't fail if HOME is unset
    
    If HOME not set in the environment, fall back to passwd.pw_dir.
    Fail outright if passwd entry for the current user does not exist,
    and don't fall back to LOGNAME or USER in the environment, just
    take it directly from passwd.

commit b6f226ff0f7477f939b1c6498da526cc0a8be533
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 21 14:53:30 2011 +0000

    debian: Close #619128

commit 45ef2313c76e40cee0bdc13f9405a07217c87f4e
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 21 14:52:22 2011 +0000

    wrapper: Allow root to bypass sbuild group membership checks

commit 7f52bf7c7e7881d49e549b0b3e46d53e6bc806d0
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 21 14:52:02 2011 +0000

    debian: Bump version to 0.62.2-1 and document new options

commit 7f07ed01fedc85d9ac4c66d4ecfcce4758412333
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 21 14:51:16 2011 +0000

    NEWS: Bump version to 0.62.2 and document new options

commit b192bfc15d13e4f2d1be9b8ac065c0a4b9b556ba
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 21 14:41:32 2011 +0000

    Buildd::Daemon: Don't upgrade or distupgrade running sbuild

commit f311dfece392534f25b03dace02d75fed6997e86
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 21 11:00:33 2011 +0000

    sbuild: Add --no-apt-* options to disable default actions
    
    Allows disabling of apt clean, update, upgrade and distupgrade
    actions.

commit 516552e446a47e5908ca3b17dc5ebaa172962066
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 20 23:06:58 2011 +0000

    debian: Bump version to 0.62.1-1 and fix sbuild-schroot wrapper

commit 767defee367ff548f14c6347aff899307c52e7d5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 20 23:06:37 2011 +0000

    NEWS: Document sbuild-schroot permissions checking fix

commit 9607fdaacebe9c4008efbeaaaa7defa5ec36ce56
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 20 22:58:58 2011 +0000

    Sbuild::ResolverBase: Remove File::Path dependency

commit a4527c3dfc782204b6d1c6b28818e52249aef9f6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 20 22:36:25 2011 +0000

    wrapper: Enforce group access checks

commit 07bf64f9c1c9664b2a7562412bacaba316faf802
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 16 18:57:32 2011 +0000

    Sbuild::ConfBase: Really permit check disabling during build

commit cb626bfbac1d562ac9861a097bba50130e91b42a
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 16 18:57:10 2011 +0000

    debian: Add missing perl modules for autobuilding

commit 0cff4863c1753b16efeaab4a73e693ce2d60493b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 16 16:10:44 2011 +0000

    debian: Document MIME and compression of log mails

commit 0414e5c0c6828050a6f2cc93f34bc64e8b358b1f
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 16 16:10:06 2011 +0000

    NEWS: Document MIME and compression of log mails

commit 89a5a371ae375f23a7622ee2396f19bde04f77b2
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 16 16:09:46 2011 +0000

    Sbuild::Conf: Make MIME and log compression the default

commit ecdac9e186cde1f47ca4f656bbf302ac064c6730
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 16 12:52:59 2011 +0000

    Sbuild::Chroot: Don't run sudo with -p
    
    '-p' leads to $USER being root, and consequent permissions errors
    when trying to read files under /root.

commit f4318e2d2fa499539ae29fbfe6d9a7327b64a1b3
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 16 12:52:15 2011 +0000

    Sbuild::ChrootSetup: Enable privilege separation for generating keys

commit 7a8d8fc292a3568e338634b7caf899325da55ede
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 16 12:51:43 2011 +0000

    sbuild-update: Create only one ChrootRoot object

commit bb252ed2a5484b420ab14300d1531292ae656129
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 16 11:48:15 2011 +0000

    Sbuild::Build: Remove log compression without MIME

commit 1fbe5fec065681938d8ee8c106300b48c8a52f64
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 11 09:47:26 2011 +0000

    debian: Add lintian override for sbuild setuid wrapper

commit 206b6b0f547966ca2363450608403cc31a37c779
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 11 09:45:46 2011 +0000

    debian: Fix buildd sbuild dependency for binNMU now it's arch-any

commit 347a63f7f8c5895e0e874af17895777ead34e38e
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 11 09:41:25 2011 +0000

    debian: Bump version to 0.62.0-1

commit ba9f20e072c57651205594b146a48cbca339439a
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 11 09:41:06 2011 +0000

    NEWS: Bump version to 0.62.0

commit b3a341b7738599a7530641ef99feca411ec7347c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 11 09:39:40 2011 +0000

    debian: Tidy changelog

commit c1915ab66ddce10766c8f2439b45ba13edcb1eed
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 11 09:39:32 2011 +0000

    NEWS: Tidy

commit 70174465eb0f23caf0f9e99246bb4080e5c43327
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 22:39:32 2011 +0000

    debian: Document build dir name change

commit 937047e1a574e575dcd047ef2ac943ae4c06b789
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 22:39:17 2011 +0000

    NEWS: Document build dir name change

commit 4905add4b224678d0cb82aa124e5a23d56b6af1d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 22:34:42 2011 +0000

    Sbuild::Build: Shorted chroot build directory.
    
    Now /build/packagename-XXXXXX instead of
    /build-packagename_shortversion-archname-XXXXXX.
    
    This will reduce the chance of build failure on some architectures
    with path length limitations, and also for (buggy) packages using
    sockets, which also have a very short length limit.

commit 94cf8c681f899241da9b97b93c0e5b2c3e286f08
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 20:07:01 2011 +0000

    debian: Amend wanna-build removal comments

commit e9e5d41bffaf712c6d1540c5597716eafaceb218
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 20:06:44 2011 +0000

    NEWS: Document wanna-build removal

commit 72f987c0a03e58358ea616628514efa0113f0332
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 19:02:33 2011 +0000

    Sbuild::DB::Client*: Rename to Buildd::Client*

commit bcb2ba816074de1a97582eff100aa0b0e5658bd5
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 18:54:30 2011 +0000

    etc: Remove wanna-build.conf

commit 087047679e8845e38041224d0f0bf21b83f959a0
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 18:50:53 2011 +0000

    wanna-build: Remove

commit cb5ffa9e11129a822e9ea117adfef266467b0b0b
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 17:43:10 2011 +0000

    debian: Remove wanna-build

commit e0d3a270a3b1dfdd59b589a800a0ff424806bba5
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 16:37:29 2011 +0000

    build: Add uninstall logic

commit 23c116163a8fa3f3f77d45f32d76814367c87678
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 16:36:57 2011 +0000

    Sbuild::Build: Only send mail after the build log has been closed

commit d98e17dbccd0846abf2801edbe470aa23f357a3c
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 16:36:25 2011 +0000

    Sbuild::AptitudeResolver: Don't use Dpkg::Deps

commit 13cfcfc820f93aeca30f8ee883575889958d462d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 15:21:43 2011 +0000

    debian: Document coloured messages

commit 00569948192cefd57d7ce7517d830b5f18e4a61f
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 15:21:33 2011 +0000

    NEWS: Document coloured messages

commit f3c4b06fdc107a82e98edb2596a2b01adcbd2586
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 15:17:28 2011 +0000

    Sbuild::Build: Colourise logs when logging to a TTY
    
    Errors, Warnings and Info messages are coloured red, yellow and
    green respectively.  Build status is also coloured green for
    success and red for all failures.  Note that this does not affect
    the logfiles or noninteractive log redirection.  It is only
    enabled when running interactively and attached to a TTY.

commit a0149d3f01947517ef6e7a300c02af850f9e69f4
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 14:42:53 2011 +0000

    debian: Close #605763

commit 08c2db2a0c73b15f2cf73e21eb6c68a699053b9e
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 14:42:43 2011 +0000

    NEWS: Document log filtering

commit d75049aef03682935686863a487ea65559c47886
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 14:28:45 2011 +0000

    Sbuild::Build: Filter log messages
    
    Add the ability to filter out certain strings in the build log and
    replace them with a shorter form.  This makes the build logs
    diffable between builds because the temporary chroot and build
    directory paths are replaced with a constant short name.

commit 9d21d901b62e39c9275adbae4e9e2da5f515ebf4
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 14:27:58 2011 +0000

    Sbuild::Build: Minor logging enhancements

commit 3e1be14f06aad40fa59b00466c72d041ef57f124
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 14:25:44 2011 +0000

    Sbuild::Build Rename abort to request_abort
    
    This avoids a name clash with the POSIX::abort function

commit cca8c8fa2483bcd2bdb9b040b0fc94231e7d0e50
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 12:45:50 2011 +0000

    debian: Document signal handling

commit 1d48ef90bd8c51ee41aa0bb803065fc56c1f812f
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 12:45:38 2011 +0000

    NEWS: Document signal handling

commit e206f9620435f2a18bad2464a7d904c649a42cde
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 12:39:24 2011 +0000

    sbuild: Add safe signal handling
    
    Remove all cleanup logic from the shutdown signal handler.  The
    handler now just calls the abort method on the Build object, which
    sets an ABORT variable containing the reason for aborting.  The build
    sequence calls the check_abort method to poll for an ABORT request at
    frequent intervals (before every long running job, and for each log
    line printed when dpkg-buildpackage is being run.
    
    The normal cleanup and shutdown logic is used on trapping a signal,
    so the chroot should always be left clean.  Once exception is if hitting
    C-c from a shell, which may cause SIGINT to be sent to all processes in
    the process group when apt-get or aptitude are part way through
    installing packages.  This may or may not result in a bad package state
    inside the chroot (but is more reliable than the existing method).
    Signals may now also be received multiple times, leading to multiple
    ABORT requests, but not premature program termination.

commit fe05ff0952d19bee8e9eac601eece95772fcc2dc
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 00:51:31 2011 +0000

    debian: Document exceptions and logging

commit 9701ec6c0faa8b2cf60e4aef11ac88f6909d8922
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 00:51:21 2011 +0000

    NEWS: Document exceptions and logging

commit 690c24bea7b3ee436ab3947cb166f040da1d6513
Merge: ce5254c 35a80fb
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 00:46:52 2011 +0000

    Merge branch 'master' into exception-handling
    
    Conflicts:
    	lib/Sbuild/Build.pm

commit 35a80fb0e6ee4c28e4a266abbe2da1281e8a8b25
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 00:38:37 2011 +0000

    debian: Document sbuild user and privilege separation

commit a634b464889693c9170f73c56d03d8c37046d2ac
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 00:38:19 2011 +0000

    NEWS: Document sbuild user and privilege separation

commit d2a2d43a7e3ea2d7ce109172299d3e5f7cadf01d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 10 00:29:44 2011 +0000

    sbuild: Use sbuild user for building
    
    Rather than using the user invoking sbuild, everything inside the
    chroot is done either as root or sbuild.  The intention behind this
    is to increase the privilege separation between the user and sbuild,
    with the ultimate aim being the user having no access to the build
    chroot; all access will be mediated via sbuild.  The current change
    has several implications:
    
    - a wrapper program, sbuild-schroot is used to run schroot.  This
      handles switching to the sbuild user inside the chroot.
    - all files created inside the chroot must be owned and writable
      by user and group sbuild.  The user ownership is required so that
      the sbuild user can create and delete files.  The group ownership
      is so that the user can create and delete files.
    - group write access is removed during the build stage, to prevent
      external tampering.
    
    Note that due to the architecture of sbuild, the user may still
    interfere with the process themselves, and gain root inside the
    chroot either via schroot or sbuild-schroot.  These loopholes will
    be closed by future changes.  The current changes do prevent
    accidental tampering, but not deliberate interference.

commit 5342feb52ef29b803bcccf5a8a56e14017d5ee1d
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 9 22:34:11 2011 +0000

    debian: Install sbuild-schroot wrapper
    
    sbuild is now an arch-any package
    Also add build-arch/indep and install-arch/indep rules.

commit d260a28f26a1ef2693343a7b92bf1d80a6a75bcf
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 9 22:31:34 2011 +0000

    Sbuild::Conf: Allow consistency checks to be avoided for dumpconfig
    
    sbuild-dumpconfig should be able to dump the defaults whether or
    not the system or user configuration is sane.  Here, we don't load
    the system configuration, and avoid validation of everything else.
    
    Also, print 1; at the end of the configuration output to make it
    valid Perl.

commit b485bb3e5a213a4a7bf40547327d6dacc02c3439
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 9 22:30:07 2011 +0000

    debian: libexecdir is /usr/lib

commit c6887d7e28ceafda86c915dea54379125a3d070f
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 9 22:29:16 2011 +0000

    build: Use datadir rather than libexecdir for scripts

commit ee04dc8f8cff2d7a3ee200c50bd695f2c801a25a
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 9 22:14:08 2011 +0000

    wrapper: Wrap schroot invocation to run as sbuild user

commit ce5254cbf8e2b962b0c4ce2aaf67fbd4977087c4
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 23:50:55 2011 +0000

    Sbuild::Build: Fail Stage only set in run() functions

commit 2e366ac92eb597be2f399fde716f49006a34ac06
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 23:48:43 2011 +0000

    Sbuild::Build: Throw exceptions doing hack binNMU

commit 6d43309aedaf0712f0c79c348bfe0d9b0169382c
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 23:44:22 2011 +0000

    Sbuild::Build: Throw exception in build version check

commit 162ce402b1f4ae2346815f1812920380fe0b06e5
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 23:37:27 2011 +0000

    Sbuild::Build: build does not remove build tree
    
    There's no need to remove a dirty tree before unpacking; we now always
    build in a unique temporary directory, so this is a no longer existing
    problem.  We also don't remove the build tree on failure--this has
    been taken care of by the top-level cleanup routines for ages.

commit 3dd5f7659cb0aa679a5df69c0d4168af9fb90850
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 23:35:20 2011 +0000

    Sbuild::Build: Throw exceptions in open_build_log and build

commit 6d7c7eee0eb496c850ba5b9b6a5ac8249e6760d1
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 23:24:52 2011 +0000

    Sbuild::Build: chroot_arch throws exception on failure

commit 2699a5c80b17b8bb96feb30c9428683ce5951b06
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 23:21:09 2011 +0000

    Sbuild::Build: Split source packing and chroot update from run()

commit a7bcb3b86198aaaecbb161fdef08e8e5913b3ddb
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 22:49:28 2011 +0000

    Sbuild::Build: Add exceptions for arch and space checks

commit 6ece8b6899a3d2304983cfe0bbd485fd6aaab38a
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 22:49:00 2011 +0000

    Sbuild::Build: Remove unused 'Pkg Fail Stage' setting

commit a6c0a057fe7269d9959b7cf9b8b1c537020901b5
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 22:48:18 2011 +0000

    Sbuild::Build: Log exceptions prior to closing build log

commit 6fe66218642eb128d5ba0e7cc83ac4c007148674
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 22:46:29 2011 +0000

    Sbuild::Exception: Add status field

commit c533951b86d51f8c00e8e5598750a0eadf89209e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 21:59:32 2011 +0000

    sbuild: Add exception handler around Sbuild::Build::run

commit 0580049fa2344260c739371a176aef94e21fbd58
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 21:59:12 2011 +0000

    Sbuild::Build: set_dsc throws exception on failure

commit 06049e6177c2e15ffa74b56eeb607db903af9230
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 22:19:38 2011 +0000

    Sbuild::Build: Add exceptions to run()
    
    run() currently uses a number of gotos and labels to clean up on
    error.  Unfortunately, this logic is both complex and fragile;
    cleanup tasks need doing in the correct order, or not at all.
    run() has been split up into separate functions to make the nested
    logic explicit, and now throws exceptions on failure; cleanup can
    be done before or inside the exception handlers, and the exceptions
    may be rethrown to allow cleanup back up the call stack.

commit 11c9c7eca504748408c57f96aacbf5f58e51336c
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 22:12:44 2011 +0000

    debian: Build-Depend upon libexception-class-perl

commit 99e127e446470810057960b8886288a222be7fa9
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 22:19:00 2011 +0000

    Sbuild::Exception: New exception classes
    
    Add exception classes using Exception::Class.

commit 8180f64ddead777c63778c671c417e57799a9b7d
Merge: 6befac4 39ac178
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 00:23:07 2011 +0000

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit 6befac4735626faae4192e4fd878aa9123206b92
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 8 00:09:59 2011 +0000

    sbuild-apt: Run apt via the resolver

commit 6f9ea88265ccaff48ab51d8c331b3fcde7799576
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 7 21:16:41 2011 +0000

    debian: Document buildd.conf and buildd.conf(5)

commit ded886270586faf49c9085a4783097ff57ef12fa
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 7 21:16:28 2011 +0000

    debian: Install buildd.conf(5)

commit 61ad3b41be09d9b47ed20767070cebdf980f6ef3
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 7 21:16:11 2011 +0000

    NEWS: Document buildd.conf and buildd.conf(5) generation

commit 2d23287c3d6139089a95c7cbfa12266775e50b85
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 7 21:11:04 2011 +0000

    build: Use absolute paths when running scripts

commit f80c16669d0c66e7f1e92e2dc824599118ed432c
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 7 18:51:38 2011 +0000

    Build::Conf: Add metadata and use generic Sbuild::Conf read

commit 39ac17865eb723923748b6edac215d983a9b82d1
Merge: 871a916 62ff1e4
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 7 22:02:33 2011 +0100

    Merge branch 'buildd-0.61.0'

commit 62ff1e479fe132fb7125e62b7a4fd0577396d5a9
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 7 21:59:49 2011 +0100

    etc/25nssdatabases: exit cleanly if 20nssdatabases is found
    
    By exiting when 20nssdatabases is present we should achieve compatibility with
    both schroot from lenny (which doesn't ship this script) and squeeze (which
    has its nssdtabases configuration file format a bit different).

commit a098125508ac39c65865db7a78330187eb8bdb29
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 7 21:47:07 2011 +0100

    [Buildd::Daemon] only push NICE_LEVEL to sbuild_args if not zero

commit 16a72bafe4c0f5dd21d1fd19f66064174578813d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 7 18:49:56 2011 +0000

    Sbuild::Conf: Use Sbuild::ConfBase generic read

commit 8a3f9d4336abe1a63e33dc3645004b977f4e4095
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 7 18:49:25 2011 +0000

    Sbuild::ConfBase: Add generic read function

commit 871a916a77cefef550ad6b5886de7b67a724d3e9
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 7 18:22:06 2011 +0100

    [Buildd::Uploader] drop unused Sbuild module usage

commit ccc1fd505d0bd3dc0edce56743669f1546801598
Merge: 2d2dc6a 8614f40
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Mar 6 23:51:14 2011 +0100

    Merge branch 'buildd-0.61.0'
    
    * buildd-0.61.0:
      [Sbuild::Chroot] guard ENVIRONMENT_FILTER usage
      [Buildd::Daemon] configuration loading is now implicit
    
    * Dropped for master (buildd-specific):
      debian: Bump version to 0.61.0buildd0
      debian: Enable compatibility features on buildds

commit 8614f407e7b04f68096f577f22edddbdf6186876
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Mar 6 23:30:00 2011 +0100

    [Sbuild::Chroot] guard ENVIRONMENT_FILTER usage

commit e1f7219828e799941dea5974178f066752b04742
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Mar 6 23:23:08 2011 +0100

    [Buildd::Daemon] configuration loading is now implicit

commit 2d2dc6abde59abf0ac6940cf35aad7449d6ed564
Merge: 0878859 28f3d0e
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Mar 5 11:25:52 2011 +0100

    Merge branch 'buildd-0.60.0'
    
    Conflicts:
    	debian/control
    	lib/Sbuild.pm
    	lib/Sbuild/Build.pm
    	lib/Sbuild/Conf.pm

commit 28f3d0e67853098788e9701e247a96de1911f876
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Mar 4 18:32:37 2011 +0100

    Allow MIME encoded build logs.
    
    If $mime_build_log_mails is set to 1, then you will get a multipart/mixed mail
    comprising either one or two parts: the build log is always included as an
    attached file, the .changes file is attached only if the build completed
    successfully.  If $compress_build_log_mails is set to 1, then the build log
    will be sent gzip-encoded instead of plain text.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit f1a7d0b06ff02c95b92f4f025450063e5c281e10
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Mar 10 14:31:52 2010 +0000

    sbuild: implement build log mail compression

commit 08788592fc0000f87504b7ace9c2d4bea9292155
Merge: a3041fc 0f256e9
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 1 22:41:33 2011 +0100

    Merge branch 'buildd-0.60.0'

commit 0f256e92e6f4e017b60c24aea7895b4d551f1a01
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 1 22:40:42 2011 +0100

    [Buildd::Mail] add more logging for check_state retries

commit a3041fce9351dad1a9e1ca5b009d4f69afac6d60
Merge: c940aa2 1c08113
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 28 23:03:07 2011 +0000

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit c940aa2c73088cf6d2136a0fb84831cdb13238de
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 28 22:58:42 2011 +0000

    build: Automatically generate sbuild.conf and buildd.conf

commit 1675af614617dc19a5e88ee17af32193f72993c4
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 28 22:51:41 2011 +0000

    man: Add buildd.conf.5 manpage (generated)

commit 3f48017ace6919484c327016a2f44727b5562db8
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 28 22:50:57 2011 +0000

    sbuild-dumpconfig: Don't dump ignored defaults for manpages

commit edc83413821f2abf44a0ffeac3e471902d15888f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 28 22:45:01 2011 +0000

    Buildd::Conf: Ignore correct keys

commit 5bcff99b458b591f7dab5beaf84fb87677f3fa79
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 28 22:39:18 2011 +0000

    Buildd::Conf: Annotate all configuration keys
    
    Ignore DISTRIBUTIONS and UPLOAD_QUEUES because these are complex
    types that don't currently dump cleanly.

commit 1536dff220f92be2209f727cb9ff8593922d6438
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 28 22:39:00 2011 +0000

    Sbuild::DB::ClientConf: Annotate all configuration keys

commit a6a3b48b083d96ae489df4135ef59ec117553635
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 28 22:38:31 2011 +0000

    sbuild-dumpconfig: Allow defaults to be ignored

commit 1c08113c274be1d08d87f59145a0583b0d540658
Merge: 4638fbc 81e7444
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Feb 28 21:16:36 2011 +0100

    Merge branch 'buildd-0.60.0'
    
    Conflicts:
    	lib/Buildd/Mail.pm

commit 81e744406835e8ca553d142185219393dc5840fb
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Feb 28 20:51:41 2011 +0100

    [Buildd::Mail] check_state: back off for 0..120s on db query failure

commit f5cccb5808f38a2a66b2c761c0e2905ad1cc8fa5
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Feb 28 19:45:58 2011 +0100

    [Buildd::Mail] also import exitstatus from Buildd

commit 764cfe9451c2965d387f9371c0eeeec5943c3e35
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Feb 28 19:35:28 2011 +0100

    [Buildd::Mail] check_state: check w-b pipe exit status

commit 4638fbcf4888008a0fe34a20ea1fd56643b0ebb9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 22:01:19 2011 +0000

    debian: Fix typo

commit 8cbc575717549801b9b272a66136f6f126fa7d4a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 22:00:45 2011 +0000

    NEWS: Fix typo

commit bc951c6a74b08b58d5de42870e0f3bbefd1e5999
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 17:43:49 2011 +0000

    Sbuild::ConfBase: Add GET handler for OVERRIDE_DISTRIBUTION

commit 2f0206570584a61e24144788ca25fff84ed6510d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 17:43:17 2011 +0000

    Sbuild::Conf: Handle VERBOSE correctly in interactive sessions

commit dd7d4c5461a77e1e333381a452d0af9a1ea94643
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 17:42:51 2011 +0000

    Sbuild::Conf: Use _get where defaults are useful

commit a448fb449644eb9934b06bba800a94065e6e2bae
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 17:42:16 2011 +0000

    Sbuild::Conf: Add GET handler for MAILTO

commit 835f9d3f0e9852b2cfeaf5295b148cc81f9f9041
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 17:41:18 2011 +0000

    Sbuild::Conf: Don't directly set LOG_DIR_AVAILABLE

commit 3c0d7efb10f05d9f5db1c78940ad88b3b38dd85e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 17:40:14 2011 +0000

    Sbuild::ConfBase: Add _get method to get value or default
    
    Useful in GET blocks.

commit b1c0767264002f26269b6e27ce3b2cc8e5b73a44
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 15:48:42 2011 +0000

    debian: Close #609658

commit c0674eb4d2abe0819867f5dd2116f7d5d4917535
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 15:48:26 2011 +0000

    NEWS: Document --keep-session

commit a7cf2535290add1a6b7c90fbfc4b534be201bb28
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 15:44:36 2011 +0000

    Sbuild::Build: Purge options do not affect session ending.
    
    Add separate END_SESSION configuration key, which is changed with
    the --keep-session option.

commit 098b2c964c4994a37d0411aa560ff020e8075bb2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 15:34:34 2011 +0000

    debian: Document dist-upgrade change

commit 2404bd3f88a296361c70d33bcf13bf3f00a0dec9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 15:34:25 2011 +0000

    NEWS: Document dist-upgrade change

commit 4c29db4de7587e12c3b609e4350408b0280b82c2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 15:31:23 2011 +0000

    Sbuild::Conf: Run apt-get dist-upgrade by default
    
    Previously, we were running upgrade by default.  dist-upgrade
    is not much more dangerous, and it means that less manual
    intervention is required to keep chroots up-to-date.

commit ae7f064807fa475f36e04fe2b42d92b848d4139b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 14:05:44 2011 +0000

    debian: Close #610995

commit fcaf31910d4b5cb12c026fe7f02e44fd76e0164c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 13:59:58 2011 +0000

    debian: Close #576508 and #609932

commit 6dbcbe4489e28ac9954e074efece6df17cb72706
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 12:57:16 2011 +0000

    debian: Deprecate non scalar types in sbuild.conf

commit b468818a6f03baf0443e7b9254c8037ce49ef035
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 12:56:58 2011 +0000

    NEWS: Deprecate non scalar types in sbuild.conf

commit 3fa12596c1004deebb9999a6bbe21bd6ee2d061b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 12:52:36 2011 +0000

    Sbuild::Conf: Use dynamically generated script to parse configuration
    
    This removes the need to hand-maintain the parser.
    Non-scalar types are special-cased for backward compatibility (and
    deprecated).

commit 0b6cf0e259996e4dccae8f20e2f8c7e1c5810a82
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 12:38:34 2011 +0000

    Sbuild::ConfBase: Add GET handler for VERBOSE
    
    Allows more sensible default interactive/noninteractive behaviour.

commit 0983eb261b3805bdb7bffb0dd20a981273075a7d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 11:31:42 2011 +0000

    debian: Document sbuild.conf and sbuild.conf.5 autogeneration

commit 7d3c72d0c013c9bc60dacd2b2eedd3e1979fc6d7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 11:31:21 2011 +0000

    NEWS: Document sbuild.conf and sbuild.conf.5 autogeneration

commit 9931fc4cafe6a339aec87a69f803aa6a0697e89b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 11:25:43 2011 +0000

    man: sbuild.1 references sbuild.conf.5

commit b14c66ca327433308abed2bfffe11bc3603c1ee0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 11:25:22 2011 +0000

    debian: sbuild includes sbuild.conf.5

commit 73ddeb9d925994c308601a50edcf7cfa5883fa61
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 11:25:05 2011 +0000

    Ignore sbuild.conf.man

commit 93a77758d389f0a07471abaa8c8b0565939271af
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 11:24:31 2011 +0000

    man: Add sbuild.conf.5 manual page

commit 7a58e6e66f993a03b6c02769c2894c638b7df40f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 10:12:00 2011 +0000

    man: All manpages source definitions in defs.man
    
    This saves the need to process with config.status, and keeps
    variable stuff in a single place.

commit 64705a3dd0f302c1c87cf7518d1f8f2c02721add
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 10:10:26 2011 +0000

    build: Distribute sbuild-dumpconfig

commit 8737643de24d2f8f7faf4bc1d2b7f8dcbc8b62df
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 27 00:33:29 2011 +0000

    sbuild-dumpconfig: Add support for buildd.conf, and man output

commit 98b16659473d07452f84db3472acbe937f24b5c0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 26 20:17:32 2011 +0000

    tools: Add sbuild-dumpconfig
    
    sbuild-dumpconfig can dump the Sbuild::Conf class and its default values
    as a fully documented sbuild.conf, with syntactically correct examples.

commit 78bb4e5591df86d677ca60a37c54254a1f05877a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 26 20:11:49 2011 +0000

    Sbuild::Conf: Add additional key tags
    
    Include TYPE, VARNAME and GROUP tags.  This is sufficient information
    to allow dumping of the entire configuration file as sbuild.conf or
    a manual page.

commit e533066f3ef41580866e81cb286ad9bd9c8507c6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 26 11:01:11 2011 +0000

    Sbuild::Conf: Add help text for all settings

commit aa2bea11fe10531251cbd5a69bebb44fc77c1f42
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Feb 24 22:46:57 2011 +0000

    debian: Close #403246

commit 681d3beb2e5de58fb282752644b8473ab8313255
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Feb 24 22:31:56 2011 +0000

    debian: Document alternative resolving defaults

commit e9640a93aeec3e609ab6a9138821548df66c846d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Feb 24 22:31:33 2011 +0000

    NEWS: Document alternative resolving defaults

commit 126c8c3b42e6504b243b9268eae0342aa205456f
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Feb 24 22:27:40 2011 +0000

    sbuild.1: Document alternative resolving defaults

commit 746c52bf7a99626c3aa043cf8359475ccabdfcd6
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Feb 24 22:22:09 2011 +0000

    Sbuild::Conf: Resolve alternatives by default with the aptitude resolver
    
    This default may be overridden with $resolve_alternatives.
    apt and internal do not resolve alternatives by default
    aptitude resolves alternatives by default

commit 328646e1c6ea407df64befdcea30fde1b6b11658
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Feb 24 22:21:46 2011 +0000

    Sbuild::Conf: Fix typo in deprecation warning

commit f1798273068c33f9c486ef43f103c826e500bc97
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 23:08:37 2011 +0000

    debian: Document resolver changes from NEWS

commit e1eebe2148e7ff24bfd85e7829bc9dfb4262ebef
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 23:07:34 2011 +0000

    NEWS: apt is the default resolver, internal is deprecated

commit 813930a1f948beaced1186e1c25ac2073f84f6c9
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 23:07:00 2011 +0000

    sbuild.conf: Document resolver default

commit decf817cf3e5ef8c6e6e7ab61324145c24b1db05
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 23:06:43 2011 +0000

    sbuild.1: Document resolver default

commit 3ec40bc72716d74c2d0617decb83233621fd0c02
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 23:06:04 2011 +0000

    Sbuild::Conf: Make apt the default resolver
    
    Add deprecation warning for the internal resolver.

commit 24a7504164a6417695742451c1c3568d9d13b827
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 23:05:35 2011 +0000

    sbuild-update.1: Add additional guidance for --keygen

commit 77f3c862a2c68ebdb4a1d68e3d8b02b18a5f5e2d
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 22:36:34 2011 +0000

    debian: Bump version to 0.61.1-1

commit 7ffd78a5c108d8d6bb470099399844c2f9474e5d
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 22:36:00 2011 +0000

    NEWS: Bump version to 0.61.1

commit e1b1156de3fb1388b13e8d2355a4727371545fa8
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 13:43:59 2011 +0000

    debian: Bump version to 0.61.0buildd0

commit 46ce90058c2f7c3e0f646680bacf3ca55d9de4c8
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 13:42:01 2011 +0000

    debian: Enable compatibility features on buildds

commit 74d5dada13bc6bf34781d88a9508199c06a08192
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 13:10:24 2011 +0000

    sbuild.conf: Fix typo in $resolve_alternatives

commit c2741662ba7c8d79fb41cdb958c04851ca3ac0f0
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 13:09:06 2011 +0000

    debian: Tidy changelog

commit 794c40b0dee186dbbfa91625b735f8f52af6ab43
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 13:07:39 2011 +0000

    debian: Document aptitude use of dpkg --force-confold

commit a114e0c2245442986c95e901757da834392c2fe7
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 13:06:59 2011 +0000

    Buildd::DistConf: Don't use init_allowed_keys

commit d85946cd004c6dee4262dcafc30beb773a9ba897
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 13:00:33 2011 +0000

    sbuild.conf: Correct $resolve_alternatives to use proper name

commit 570640acf6c31e6c3d7338983b3fdbe36e16e8c9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 19 12:58:33 2011 +0000

    Sbuild::AptitudeResolver: Run dpkg with --force-confold
    
    This was already done for apt and internal, and was causing a number
    of packages to FTBFS,

commit d8f453ea7f1414d3a30421e5d7aaca043455fb21
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 12:09:50 2011 +0000

    debian: Bump version to 0.61.0-1

commit a70e8e2b9c7403a9b06abe440eb55291de0851dd
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 12:09:22 2011 +0000

    NEWS: Bump version to 0.61.0

commit 96efc522f6309d91a08bb76019cd00742570e39d
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 12:02:10 2011 +0000

    Sbuild::ResolverBase: Implement alternative stripping
    
    The apt and aptitude resolvers now only use the first alternative
    in alternative dependencies.  This does not include architecture-
    specific alternatives, which are reduced prior to stripping.
    
    This feature is configurable ($resolve_alternatives), defaulting
    to being enabled.  For suites which can take advantage of
    alterntatives (e.g. backports), this may be disabled.  For unstable,
    where we want the strict consistency and reproducibility guaranteed
    by stripping, this makes the apt and aptitude resolvers behave
    exactly like the internal resolver.

commit 5a9a0cf451190f440f48b82890457f848aa912b6
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 23 12:01:22 2011 +0000

    Sbuild::Build: Add missing fail stages
    
    If a build failed very early, the fail stage wasn't initialised
    and was incorrectly reported.

commit 2e9d85edbd65c7098dd3111fef409ae4fde742ee
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 14 23:46:01 2011 +0000

    debian: Tidy changelog

commit 2fcc42f58f41e9e7bdaed7a55050c7193d577c1d
Merge: e47c957 8bd411c
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 14 21:46:13 2011 +0000

    Merge remote branch 'origin/buildd-0.60.0'

commit e47c95773ce6d6ee7e845b6b5d11dc3f1bb95ff1
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 14 20:38:19 2011 +0000

    debian: Closes #608972

commit b84421f05734f891dac2709aba17eb68465656e9
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 14 20:36:56 2011 +0000

    sbuild.1: Document local apt archive

commit d6ccdf0a9de3dae0e86ed67c210733aed13421ca
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 14 20:27:27 2011 +0000

    sbuild.1: Drop source-dependencies environment variable docs

commit 67de5f80575b7d2e5e62c7795eba4d94afb85098
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 14 20:26:23 2011 +0000

    sbuild.1: There is now only one sbuild version

commit e58d8976727fa771f823652a67473e27a98c8541
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 14 20:07:49 2011 +0000

    debian: Close #608971

commit 498c29bda2f1d92bdfb846a908ef5446be2834e6
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 14 20:06:12 2011 +0000

    sbuild.conf: Document that $apt_allow_unauthenticated is for apt-secure.

commit fc9144efbd3c521104c3b0d335f0e92c8575445b
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 14 20:01:11 2011 +0000

    debian: Close #613401

commit f67710dd5ede7d34b6777475640049c7f8074784
Author: Sebastian Harl <tokkee@debian.org>
Date:   Mon Feb 14 19:58:45 2011 +0000

    Sbuild::Options: Add --no-arch-all command line option.
    
    This allows overriding of '$build_arch_all = 1;' (in .sbuildrc) on the
    command line.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 80ed8aa0a27e21dc7162bf24c8d09c8686fd9e78
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 14 19:55:39 2011 +0000

    NEWS: Document --arch check

commit 8d88fe6cfc874c8aeadbe59540214fcc8be49136
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 14 19:54:50 2011 +0000

    debian: Close #609151

commit d31a1179c2bb15ab38fe70439041ddf206afd437
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 14 19:49:40 2011 +0000

    Sbuild::Build: Don't allow the build and chroot architectures to differ
    
    Previously, we allowed the chroot arch to supercede the host/build
    architecture specified with --arch.  We now check for this to avoid
    building for the wrong architecture.

commit 11e42dfff33c8aac4e5b7fcdee2ccadcf02c56b7
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 14 19:38:33 2011 +0000

    debian: Close #608412

commit ddd6db2d327ca94a31235763b843e10b93c20a6a
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 14 19:37:11 2011 +0000

    debian: sbuild postrm purges generated files

commit 5a983515b3c1edf8fc31797f4538aad7769c15a5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 13 23:27:20 2011 +0000

    debian: Close #607606

commit f72d65e1d8f40218f7b9dbaf86dc8af6f5dbc9ef
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 13 22:47:31 2011 +0000

    debian: Close #610997

commit ce0fb70b0ae4128eaca18e5d7a25aeea47e4ae37
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 13 22:45:50 2011 +0000

    sbuild.conf: Correct syntax of $envionment_filter

commit d6cf14dd8e345fb5fcd0776ce4cea341241bc817
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 13 22:44:56 2011 +0000

    sbuild.conf: Update $environment_filter to include PATH

commit 60c3d810e36c5917ae387c3b21aa38918b0e0014
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 13 22:42:30 2011 +0000

    debian: Close #610997

commit 7ec6f8eca1ed4aaa5f729f44880e3225379f33c8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 13 22:41:35 2011 +0000

    Sbuild::Conf: ENVIRONMENT_FILTER permits use of PATH

commit f8c593104c3033d918ecd0780b829277a2d3d358
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 16 17:07:42 2011 +0000

    debian: Close #610007

commit a4fb37b5fa1650c5645ee774a2c4e960b72cc4a3
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jan 13 20:12:57 2011 +0000

    debian: Close #609811

commit e18373fc4157460ad84e58a4cb7f94d616fdfa6e
Author: Marc Deslauriers <marc.deslauriers@ubuntu.com>
Date:   Thu Jan 13 20:10:09 2011 +0000

    lib/Sbuild/ResolverBase.pm: use -o APT::Install-Recommends=false
    
    Use "-o APT::Install-Recommends=false" instead of
    --no-install-recommends as it is not a valid option in Dapper schroots.
    
    This is Ubuntu-specific and can be removed once Dapper goes EoL.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 27175af08d84de246b6a572615f2998feb734d0c
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 3 21:19:29 2011 +0000

    debian: Close #608789

commit dbf152d502e4816eac1ff4ffd2ead9b93e05e40c
Author: Modestas Vainius <modax@debian.org>
Date:   Mon Jan 3 02:29:50 2011 +0200

    AptitudeResolver: define a custom SolutionCost.
    
    aptitude 0.6.2 release replaced resolver tiers with resolver costs. sbuild
    AptitudeResolver used to rely on resolver tiers to deliver the following
    behaviour:
    
    1) Install non-default versions only if there is no solution among default (aka
    candidate) package versions.
    2) Solution should contain versions from sources with the highest possible
    priority (when pulling from non-default versions).
    
    While default SolutionCost (i.e. "safety, priority") configuration is supposed
    to deliver this, it's apparently not enough. In particular:
    
    1) "priority" cost component is broken in aptitude releases up to 0.6.3-3.2
    (see #608786). It does not prioritize non-default versions by their
    pin-priorities.  However, thanks to Non-Default-Level safety level, the issue
    does not affect configurations which have apt sources at two (one default and
    one non-default) or fewer pin priorities. As a result, standard buildd
    configurations (unstable, experimental, backports) are not affected by this
    bug.
    
    2) Once Non-Default safety level is breached, it is hard to guess what set of
    non-default versions the solution will produce (it will be based on the "score"
    criteria that is not easily predictable). Yet requirements are pretty clear: we
    want as few non-default versions as possible. Fortunately, we can tell aptitude
    that.
    
    So sbuild custom SolutionCost achieves the following:
    
    1) it gets the safest solution (tries only default versions first, then a mix of
    default and non-default versions),
    2) installs versions from the highest possible pin-priority source,
    3) installs as few non-default versions as possible,
    4) and finally picks a solution with the best score.
    
    See /usr/share/doc/aptitude/html/en/ch02s03s04.html (aptitude-doc-en package)
    for more information on aptitude resolver cost calculation.
    
    Signed-off-by: Modestas Vainius <modax@debian.org>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit a47aa6af592d340603c401c9e7dd16ebb0e48ccd
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 3 21:06:00 2011 +0000

    debian: Close #608659

commit 74cbd18e1fa7e2efb89937d46248a9bbc3b87e36
Author: Modestas Vainius <modax@debian.org>
Date:   Sun Jan 2 15:28:18 2011 +0200

    Do not filter out environment variables starting with DEBIAN_ by default.
    
    Notably, the fix enables export of DEBIAN_FRONTEND=noninteractive in the build
    environment.
    
    Signed-off-by: Modestas Vainius <modax@debian.org>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit b57b76d1a835e9a01b826de43c7022cb1ab21690
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 31 14:14:38 2010 +0000

    debian: Close #608429

commit b0e2f406f5accf2f6e89832c39d1181084edb72c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 31 14:12:25 2010 +0000

    Sbuild::ChrootPlain: Don't use sudo when already root

commit cf52e3bde5023340eae19d782567880bbbd9b9cf
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 31 11:56:45 2010 +0000

    debian: Close #608414

commit 61deae6fd46404c26bd233738b004cbdba57122e
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 31 11:53:50 2010 +0000

    sbuild-createchroot: Fix permissions of chroot and configuration
    
    chroot directory and any created parents are 0775.
    schroot configuration is 0644.

commit 4f484d6ad87345c1efdd4818bcd6d60293f91e17
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 31 11:53:22 2010 +0000

    sbuild-createchroot: Don't import all exported members of Sbuild::Conf

commit 12eb962111d9e384d31cd54af39046ad081b31c9
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 30 17:57:01 2010 +0000

    debian: Bump version to 0.60.9-1 and close #607945

commit f57e4e271e55f488e7ffc026d6be3cedea469295
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 30 17:54:37 2010 +0000

    NEWS: Bump version to 0.60.9

commit fb790792a9433d469fa808f6613bdc0bf1f3ee21
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 30 17:53:15 2010 +0000

    Sbuild::ResolverBase: Don't automatically generate archive signing key
    
    If the local archive signing key is not present, do not automatically
    generate it.  This can cause issues on systems with scarce entropy.
    Print an error message plus instructions on how to generate the key.

commit 11d82b1fdec6d15b1911f60f8802a70a218ebdfb
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 30 17:51:50 2010 +0000

    Sbuild::Build: Add newline to log message

commit 8bd411cf6aaa7f6f6b76245ecec6b5c88db52f2e
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Dec 18 15:08:33 2010 +0100

    bin/create-chroot.sh: update for properly signed security

commit 0fc02677171bc1cc90f250540af17389c39db204
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Dec 16 19:49:11 2010 +0100

    etc/99builddsourceslist: update for properly signed security

commit a6c2d650cf23d6135873b9c01711e955146618f4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 12 20:00:17 2010 +0000

    Sbuild::Conf: Update and upgrade the build chroot by default
    
    Having an up-to-date chroot prior to installing any build dependencies
    means it's less likely to break the chroot when removing the packages
    post-build.  This is because we're starting and ending at the same
    baseline state.  If the chroot is out of date, then it becomes possible
    to break the package manager because packages to reinstall are no
    longer available, or there are version mismatches etc., which require
    manual intervention to get back to a clean state.

commit d07d68b36b2708c4a7f7acfff8d3be5c4eec8264
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 12 19:56:26 2010 +0000

    Sbuild::ResolverBase: run_apt_ftparchive unlinks its configuration
    
    Don't litter /tmp with temporary files

commit 8b2b123b9c2e40295bed2f44844b2c9a64c363ad
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 12 19:55:39 2010 +0000

    Sbuild::ResolverBase: update_archive uses correctly quoted perl string
    
    Also regenerate apt caches after lists update

commit 68be0d2f30b6fb2581f3531f9ab530fcf11d5b8c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 12 19:25:49 2010 +0000

    debian: Document gpg and local archive changes

commit c51c5850ab9a432d797113c270061bb60a20f41b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 12 18:19:28 2010 +0000

    Sbuild::ResolverBase: update_archive updates apt lists directly
    
    New function, used by AptResolver and AptitudeResolver.  This
    copies the archive lists files directly into the appropriate
    files under /var/lib/apt/lists in the chroot, saving the need
    for a full "apt-get update", since we don't want for the remote
    mirrors to change during a build.  This also speeds up the
    build by reducing the updates from three times to one.

commit f65d8d4738e399016e70c9565346ce35db8e7686
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 12 18:18:31 2010 +0000

    Sbuild::ResolverBase: Use an empty directory for gpghome
    
    This is more secure, untrusted/unwanted files can't be present.

commit e813533b55ac3312f3cf4d7cc8f47db826ad227e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 12 18:17:37 2010 +0000

    Sbuild::ResolverBase: Create resolver directory in build dir
    
    This puts all writable files in a single place, and also makes
    cleanup on failure automatic.

commit cb1a21e0ab52998b60e9d402d74452faacbbbaa1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 12 11:53:10 2010 +0000

    debian: Bump version to 0.60.8-1 and close #606668

commit d6bf62715c9522c86a98286aea0031d15f38a322
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 12 11:51:26 2010 +0000

    NEWS: Bump version to 0.60.8

commit fc4d5c9ab4547e850327acc4186248f0e108d0de
Author: Simon McVittie <smcv@debian.org>
Date:   Fri Dec 10 18:25:41 2010 +0000

    Use gpg --homedir to avoid the user's gpg.conf completely
    
    My gpg.conf uses a non-default secret keyring on a filesystem inaccessible
    by sbuild, causing builds to fail.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 8069028a1d7f8b443979a16ecb0d3c9ca8b784a2
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 8 21:49:17 2010 +0000

    debian: Bump version to 0.60.7-1 and close #606278

commit bb4d721972cee1ec021172a373cc098d4b66f343
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 8 21:48:59 2010 +0000

    NEWS: Bump version to 0.60.7

commit 655e87d831bacf849f3894e69c0768a5b2964499
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 8 20:34:28 2010 +0000

    Sbuild::AptitudeResolver: Restore use of Aptitude::ProblemResolver::Hints::KeepDummy

commit 9c7c5eeda7f2b7e1be16c52ea9335f3343f12d05
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 8 11:03:32 2010 +0000

    Sbuild::ResolverBase: Print message to inform user GPG keys are being generated
    
    This can take some time and appear as if sbuild had hung.

commit f4769f9b36e7dcbeeae440a27c642166dc4c262b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 8 10:56:52 2010 +0000

    Sbuild::ResolverBase: Dummy package creation is inside the chroot filesystem

commit 5ab0fee2dd35730c7dfc8c8f0c5ba1a335b968a1
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 7 21:26:36 2010 +0000

    debian: Tidy changelog and add major upstream changes

commit 2553de0e93237315962a273904b55ce817d98ad9
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 7 21:25:09 2010 +0000

    NEWS: Remove duplicate entry

commit 82d41b3bea1994a01205f0d6c14bd1b809ee5e55
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 7 21:11:28 2010 +0000

    debian: Close #605997

commit 7289e5061d604b4349028024d248344c24208869
Author: Modestas Vainius <modax@debian.org>
Date:   Tue Dec 7 21:08:12 2010 +0000

    Do not skip purging of build directory if chroot is cloned.
    
    This is necessary if /build in chroots is (bind-)mounted to the outside of the
    session.  However, if /build is part of the cloned session,
    $purge_build_directory='never' could be used in order to avoid wasting time
    when session ends.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 99a1c32ebd318aef82c86b9a6c916cff5d37338f
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 7 21:01:25 2010 +0000

    debian: Close #589615

commit 495ccf3f9a44714a93cd27e7ceb4f10cb08c20a6
Author: Marc Dequènes (Duck) <duck@duckcorp.org>
Date:   Tue Dec 7 20:59:19 2010 +0000

    Sbuild::ConfBase: Only use MAILTO_HASH if defined
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 9e4560f80875a0f4996a6604d6b068e7c1d7b2cc
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 7 20:52:51 2010 +0000

    debian: Document Ubuntu workaround

commit 3260bfe59ad59da978e956b88327832bba55cfcf
Author: Jamie Strandboge <jamie@ubuntu.com>
Date:   Tue Dec 7 20:44:23 2010 +0000

    Sbuild::Build: read_build_essential: Add workaround for broken Ubuntu releases
    
    Older Ubuntu releases had sysvinit in their build essential list,
    despite sysvinit no longer being available.  As a result, it's
    not actually possible to install the build-essential package set
    on these systems.  Manually remove sysvinit from the essential
    list in these cases.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 857c8fe0198d3c72849259b4beff2fd190e75c10
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 7 20:39:06 2010 +0000

    debian: Close #605745

commit 666d01fd8739c660b252a0ca8d2e672848e32051
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 7 20:38:09 2010 +0000

    sbuild.1: Update description of --maintainer

commit 658e4abbd3152a8d76c8e895c7a65bba41022586
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 7 17:11:21 2010 +0000

    NEWS: Document testsuite

commit 42f34187f98fec177d84949e64ceb0eec2e54a2d
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 7 17:08:21 2010 +0000

    debian: Close #606001

commit 5fdf954762ce215d617f85f55d32620f4f37223c
Author: Ansgar Burchardt <ansgar@debian.org>
Date:   Sun Dec 5 14:06:24 2010 +0100

    sbuild-update: Add --arch option.
    
    Signed-off-by: Ansgar Burchardt <ansgar@debian.org>

commit 5dafaeb57903aaf576d70f0772f547fae6ba4caf
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 5 12:27:43 2010 +0000

    NEWS: Document new features:
    
    - testsuite
    - apt archive
    - key generation
    - dropping of REDO and SBUILD-REDO-DUMPED

commit 1653d75932e7463fd72138e760d463e5faf8a8c9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 5 12:12:43 2010 +0000

    test/.gitignore: Ignore generated scripts

commit ab5c1795fc419f1e412a1570ab7d83a7635ff641
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 5 12:10:02 2010 +0000

    test: sbuild only builds a single source package version
    
    Eliminate multiple versions (just pick the first)

commit c54783ee80cd23d6788cffe8e96762a6ef5649a4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 5 11:52:19 2010 +0000

    Sbuild::ConfBase: Don't use as a base class
    
    Currently, different configuration classes derive from Sbuild::ConfBase
    and implement virtual functions to register their configuration
    defaults (allowed keys) and read any configuration files.  This is
    rather inflexible, because it means that it's hard to use a single
    configuration object to read multiple configuration files.  Currently,
    there are nasty hacks to support e.g. wanna-build configuration from
    Sbuild::DB::ClientConf in both Sbuild::Conf and Buildd::Conf.  This
    also make it difficult to read in alternative configuration files,
    for example for regression testing, where the system and user
    configuration should not be read.
    
    This change turns all the derived classes into simple library
    functions.  Each one implements a setup() function to register allowed
    keys, and one or more read/read_hash functions to read configuration
    from a file or hash into the Sbuild::ConfBase object.  This means
    that multiple setup() functions may be called to register multiple
    sets of configuration keys, and multiple files may be read.

commit 92387d628eff77060a3e1760d200725a8adf7306
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 5 11:34:52 2010 +0000

    bin: sbuild-* wrappers don't need absolute paths

commit 7ca3c48a12b75e418637b039e6187cc3d19b2f6f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 5 11:25:54 2010 +0000

    Sbuild::Build: update() uses the dependency resolver

commit 1f98891e8265301f473a177ea08f76b016574543
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 5 11:25:23 2010 +0000

    Sbuild::Build: Initialise install start and end times

commit fbbb757e2f3fdb3ed9a09348034e3c3e24463464
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 5 11:24:11 2010 +0000

    test: Add additional sbuild helper tests
    
    Add tests for sbuild-hold/unhold, sbuild-stats, sbuild-update,
    sbuild-distupgrade, sbuild-clean and sbuild.
    Update sbuild-upgrade.

commit f35040b9ed97070de9864ce9f5d6d73a4fe6585e
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 3 11:40:13 2010 +0000

    Sbuild: Move check_group_membership here
    
    This check does not depend upon configuration at all, and is
    no longer done when reading the configuration file.

commit 881c53590bbb9af2f366e8ab6d53e3019849c9d9
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 2 20:39:05 2010 +0000

    build: Add test/sbuild-update

commit 9740b8edbbc783dcdcefd1c0b35cec13294fee53
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 2 09:43:41 2010 +0000

    test: Add sbuild-update check

commit 40df3bc3339799cb3358b436c8d143b55f865b70
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 30 21:12:01 2010 -0500

    Fix apt-keys directory permissions during installation.

commit 1cd829609dd2bf8a129439f4a969eef69c6123f6
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 30 21:11:29 2010 -0500

    Create apt-keys directory during installation.

commit ac88a5a76face9d072a35734b2683febb4c00ae3
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 30 21:10:55 2010 -0500

    Fix call to generate_keys() in Sbuild::ChrootSetup.

commit 52905d70e0841b4e42ab75e5a0118ac950362849
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 30 22:19:53 2010 +0000

    test: Use set -e

commit 2e4d8e3ae7388e3581691e3180529a6f11823c76
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 30 22:19:14 2010 +0000

    Sbuild: Correct use of removed conf:: namespace in error paths

commit c7f4da524978f3e9559d84fde3f651b0dfae527b
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 30 21:34:09 2010 +0000

    test: Don't display grep output

commit 985488bf88e008a2f2dfa935df5cff5eafb9415d
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 30 21:29:17 2010 +0000

    test: Add basic syntax checking of all perl scripts (perl-syntax)
    
    Check is run via "make check"

commit 12c1c0922f37ec0e2b00d48fd07618af2b25eb4a
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 30 21:04:40 2010 +0000

    Sbuild::ResolverBase: Location is stored in session

commit e0555aca15f89b2024ec38cdaa62de62c19d3803
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 30 21:01:19 2010 +0000

    Sbuild::ResolverBase: Create dummy package in temporary directory

commit 00407c4af338597b5fc55342821c9f85ca1c0199
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 30 21:00:42 2010 +0000

    Sbuild::ResolverBase: Set Defaults in session

commit 7a1dc94cfd1dc84a60a92d4e9184cc0f3875c4b6
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 30 20:59:52 2010 +0000

    Sbuild::Build: Correctly begin host session

commit 56c8da11993fbffe8f4374ef259eb70e01c662fe
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 30 01:27:09 2010 -0500

    Remove checks to see if lintian or piuparts are executable.
    This is already done in Conf.pm.

commit 34ed66f6b076065f1a1268a2bc7d012e53545e8e
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 30 00:53:03 2010 -0500

    Fix aptitude resolver function call to pipe_aptitude_command().

commit ae9f5aaa58e63274ee289975e4530dff4084ff84
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 30 20:40:07 2010 +0000

    sbuild-update: Begin host session to fully initialise session

commit a8fff81a48582f04fb6280b04071d042f2b9e312
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 30 00:52:08 2010 -0500

    Fix sbuild-update to work with new apt split refactoring.

commit ff62b268fdea1d21431fd58bece04bb4203f49be
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 29 22:52:15 2010 +0000

    Sbuild::ResolverBase: Move chroot apt/aptitude command execution here

commit 52335729f7140308dd3c6283be68633bc026e1e0
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 29 20:14:38 2010 +0000

    Sbuild: Remove now unused srcdep lock configuration

commit 59f498f30aa290a7954e0d36980a8641dde995e6
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 29 20:06:55 2010 +0000

    Sbuild::ChrootSetup: Remove functions previously moved to ResolverBase

commit 33530770688ea5d44c561391d53d5fe9aad1ef16
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 29 20:03:53 2010 +0000

    sbuild-update: Remove unused ChrootSetup functions

commit 95c9a2700f482ffe06b6b23cd033a93cdef745e9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 18:17:23 2010 +0000

    Sbuild::ResolverBase: Cleanup with / as CWD in case build tree removed

commit 3bff8edf3bd2a4abe8b5506dc05415b49d207f73
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 18:15:36 2010 +0000

    Sbuild::ChrootSetup: shell runs as normal user

commit 92403c5ced0f485a744c18d4dc4d4d96d61a07a3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 18:14:14 2010 +0000

    Sbuild::ChrootSetup: generate_keys runs as normal user

commit 91f9228a731d91f2ed5b162d9ad536f57a075404
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 18:07:48 2010 +0000

    sbuild-createchroot: Use resolver to update chroot

commit 326da1d1d39f12cd8f8407cab5e45e50129df04d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 17:15:22 2010 +0000

    sbuild: Simplify shutdown logic
    
    Remove unused and redundant REDO/SBUILD-REDO-DUMPED code.  This hasn't
    been used for 11 months (explicitly disabled for buildds).  buildd and
    buildd-mail continue to read and write  REDO for their own internal
    uses.
    
    Shutdown sequence is aligned with the build sequence in Sbuild::Build.
    
    Temporary variables for job, session and resolver are used to simplify
    code.
    
    The same error return is issued when in buildd or user mode and killed
    by a signal.

commit f4c9c25a71a7ba6c9bc8060d94ed04947b07d0a7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 15:43:54 2010 +0000

    sbuild: Remove REDO and SBUILD-REDO-DUMPED handling

commit ffa67de3a5476e866aaabc62e19724d55b858f89
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 15:32:24 2010 +0000

    Sbuild::Build: Use resolver for all apt operations

commit 57ca90177fd8af6ad8a83ddc202ac31db909856a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 15:31:28 2010 +0000

    Sbuild::ResolverBase: Don't use Errno, and only remove archive if defined

commit b3dbca2e3c9bc02cc5adf22540c76a8d4bf44ad8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 15:30:55 2010 +0000

    sbuild-update: Use resolver to perform all apt-get calls

commit 80f811184d7c7b06a6a5ec8d646b1eac015dffa2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 14:30:17 2010 +0000

    Sbuild::Resolver*: Remove use of Build object
    
    Only use conf and session objects
    Add support for apt repository to aptitude resolver
    Add support for running apt tasks to resolver base
    Use self logging
    Set Arch from build object

commit d8950a4ddabe5e4fcec44699e7b2931d1cbc381e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 14:18:25 2010 +0000

    Sbuild::Build: Remove source dependencies support in prepare_watches
    
    Since we no longer handle sourcedeps files, there's no point in
    handling them in watches.

commit 7606c8d654b0e5aa51ec6bd43e2712f39d4baa5b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 14:14:41 2010 +0000

    Sbuild::Build: Move prepare_watches call here from InternalResolver
    
    This means the resolvers don't need access to the build object

commit 593e6e765fd0825cc88f55049836b627b1c3379b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 14:13:22 2010 +0000

    Sbuild::Build: Add Install Time to generated stats

commit 825320d50f58da8bf97d626747964bcedcb40d9c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 14:11:15 2010 +0000

    Sbuild::Build: Move install time stats writing here from InternalResolver

commit 0a1f524f7aad852dc41b196dd75cedffd576f5ed
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 28 14:07:19 2010 +0000

    Sbuild::Base: Move section logging here from Sbuild::Build
    
    Allows use in other modules making use of logging functions

commit 6482efda8c6b0bb5669f0102cf0b037badeb6e60
Merge: e2c8759 7f40701
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 27 12:54:49 2010 +0000

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild
    
    Conflicts:
    	NEWS
    	debian/changelog

commit e2c87594cf4dbf53696aeee10c32e100d055ddc7
Merge: ec75bda a820790
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 27 12:50:48 2010 +0000

    Merge branch 'apt-get-resolver'

commit a82079010180e044f6041d5074350e5402b8848c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 27 12:49:16 2010 +0000

    sbuild-update: Add --keygen option to generate GPG keys for archive signing
    
    Sbuild::ResoverBase::generate_keys now uses
    Sbuild::ChrootSetup::generate_keys.

commit ec75bda62549449f9c61a68580371f49b4107365
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 23 22:39:09 2010 +0000

    debian: Bump version to 0.60.6-1 and close #604715

commit 415ab468100c66911d8c58c90a480e5dc963f81d
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 23 22:36:25 2010 +0000

    NEWS: Bump version to 0.60.6

commit 5fd22518b73fe96546f82562c374dfb34d0e32eb
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 23 22:34:54 2010 +0000

    sbuild-update: Work on multiple chroots
    
    Correctly loop on all ARGV elements.
    Indicate chroot being updated in messages.

commit 02cabeefb003613acd9accd0147b11e1ae79101f
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 23 03:07:51 2010 -0500

    Use Sbuild::ChrootSetup::update to run apt-get update.

commit b47b01780af8337d02509e7f86e3391ea535b75f
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 23 02:58:30 2010 -0500

    Simplify apt archive creation by using apt-ftparchive.

commit 08f036513cf14fc5386244a22167884f8786071b
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Mon Nov 22 20:29:52 2010 -0500

    Generate a key on first use instead of providing the keys during installation.

commit a319faad50456cf342dc8d503566904f31b8ee52
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Nov 20 19:37:06 2010 -0500

    Use run_apt_command() instead of running apt-get explicitely.

commit 42c3e0c0ceadfca14fd900a8c52218ee42f699be
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Nov 20 17:54:25 2010 -0500

    Supply sbuild apt archive keys for use in creating apt archives.

commit 7f40701014247ed4b9dc5c1f747db46b94453598
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 20 16:33:43 2010 +0000

    Buildd::Daemon: Move should_skip here
    
    Rather than sbuild checking the SKIP file after buildd runs it, we
    check SKIP in do_build prior to running sbuild.  This means the
    use of SKIP is confined to buildd and buildd-mail, and sbuild doesn't
    need to worry about buildd's concerns.

commit 55aaf40032db56b4e076c144b69c67af241f4dfe
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 20 16:10:52 2010 +0000

    sbuild: Return 'skipped' packages with zero exit status
    
    Packages not meeting the arch check are treated as skipped.
    This only applies to user mode; buildd mode must treat skipped
    as failure for now, until it can parse the package status from
    the sbuild output.

commit c275d4bc50b9b5f6dc7350bd1b45ba5f307e0acb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 20 14:54:15 2010 +0000

    debian: Drop unneeded programs when running configure

commit 7ce884a74f5a8ba18e3a7de225bc84f3a6a201b7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 20 14:52:23 2010 +0000

    Sbuild::Sysconfig: Drop programs hash
    
    Rather than indirectly searching for programs' absolute paths and
    storing them in the %programs hash at configure time, search at
    runtime in $PATH as would be expected.

commit 353034c2ad71d9f6ec86d9af81256cb8271d5f16
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 20 14:01:22 2010 +0000

    Sbuild::Sysconfig: drop unused DPKG_ARCHITECTURE

commit 4d9f35bd7013d219ea6294356900a560b0328c4b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 20 11:41:06 2010 +0000

    debian: Bump version to 0.60.6

commit c9157ff462c5ddeb7da53ad14bebaa912312919d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 20 11:40:47 2010 +0000

    NEWS: Bump version to 0.60.6 and document environment filtering

commit cbbf001aced0825f49fd62fbc20e05acceea3a04
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 20 11:34:48 2010 +0000

    Sbuild::Chroot: Filter environment using ENVIRONMENT_FILTER
    
    Sbuild::Conf: Add ENVIRONMENT_FILTER/$environment_filter option
    The environment filter is a list of regexes.  If an environment
    variable matches any of the regexes, it is kept, or else if none
    match it it dropped.  Currently various DEB* and *FLAGS* are
    allowed.
    
    The allowed regexes are taken from debuild.  debuild also allows
    LC_* variables, but sbuild does not (it sets the locale to POSIX,
    making this pointless to allow).

commit 510398198948ae41ddb390ed600df1cc5301e597
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Nov 20 02:20:49 2010 -0500

    Add functions that setup a dummy apt archive for use with apt resolver.

commit f0e39c70da6707e2ba007a737154296f38d599e7
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Nov 18 17:00:21 2010 +0000

    Sbuild::ChrootSetup: Add hold_packages and unhold_packages functions
    
    These wrap set_package_status.
    sbuild-hold and sbuild-unhold use these functions in place of
    set_package_status.

commit 1432256a5bcb46a03ad3569ee3e1879ad71aa823
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Nov 15 21:16:53 2010 +0100

    debian/control: depend on libdpkg-perl (>= 1.15.5)
    
    Dpkg::Control changed its interface completely in dpkg 1.15.5, and the code
    relies on the new interface.

commit 7b7116d592132ac422613432e56590cd043abe0b
Merge: f07e28d aad7e66
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Nov 15 21:15:23 2010 +0100

    Merge branch 'master' of alioth.debian.org:/git/buildd-tools/sbuild

commit aad7e66da0062cf880418f55e52eacf78f2b11c3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 14 12:15:15 2010 +0000

    Sbuild::Build: Correctly report build times on failure

commit 43cf4364c5630cb5a5736cc22217197b592c3e5e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 14 12:01:25 2010 +0000

    etc: Only install 99builddsourceslist on buildds

commit 1fac57ea98d9d04308baeb643c8f0bd10f74c450
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 14 11:56:59 2010 +0000

    debian: Bump version to 0.60.5-1

commit 70c150663a6d58894ef2313d2ae20c8ded7d300f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 14 11:56:29 2010 +0000

    NEWS: Bump version to 0.60.5 and document piuparts and apt resolver

commit 329258ad45b5442b2c4848d0a6db3b6f7c4af557
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 14 11:35:26 2010 +0000

    Sbuild::Build: Remove stats delimiters

commit e56d65bad7aeb5cc47862d924288bfc993d72820
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 14 11:18:12 2010 +0000

    Sbuild::Build: Add job name to statistics

commit 32c59940679f70aef491005efabd1bb63268b1db
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 14 11:17:29 2010 +0000

    sbuild: Return buildd-style exit codes for all use cases

commit b0463acbe37e8a3ec661b3ed89fc1344c2cf49dd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 13 19:15:42 2010 +0000

    Sbuild::InternalResolver: Prune Provided virtual packages in filter_dependencies
    
    If RESOLVE_VIRTUAL is enabled, prune provided virtual packages in
    filter_dependencies.  Unsatisfied virtual depdendencies are later
    expanded in virtual_dependencies.  The pruning is needed or else
    we might expand the virtual package to a different package than
    already providing the dependency, if such a package was already
    installed.

commit 25c77aea4133c04bf956f3dc79a2e3c3a749b89f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 13 18:44:44 2010 +0000

    debian: Close #603397

commit c833c64bb7e34410c5105c5304a41e5396cbd234
Author: Loïc Minier <lool@dooz.org>
Date:   Sat Nov 13 18:41:58 2010 +0000

    Sbuild::ChrootSetup: Run dpkg with --force-confold as for build deps

commit 2033da980182f3b54a7782c5a7de72c33cd59e15
Merge: b402d90 dbf0d41
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 13 15:03:01 2010 +0000

    Merge remote branch 'origin/buildd-0.60.0'
    
    Conflicts:
    	bin/create-chroot

commit b402d9065465b8854194e85b1c960b4a03aa874c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 13 14:38:20 2010 +0000

    Sbuild::Build: Add functions for stats logging

commit 4c115f05b01b452203d26b4e43c302d7412f9a08
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 13 13:31:31 2010 +0000

    Sbuild::Build: Log stats for Distribution and hyphenate Source-Version

commit d2b52f30c3cee69d1f2f09bc8fbe415a6b6e455a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 13 11:41:55 2010 +0000

    Sbuild::Conf: Only validate lintian and piuparts when enabled

commit dc806b02c468efc19b91e220d2f982304f14ebab
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Nov 13 03:24:55 2010 -0500

    Add feature to run piuparts after a successful build.

commit 0ccb61ca018a90acc200fb20761fca98c11523a6
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Nov 13 01:35:24 2010 -0500

    Place lintian run code inside a function.

commit 1d46d853b2abfac197e40b70adbd6ca07d083ff4
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Fri Nov 12 17:26:56 2010 -0500

    Include AptResolver module in installation of libsbuild-perl.

commit dbf0d41c5d824c028daaec50203209724b62cfdd
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Nov 11 22:25:25 2010 +0100

    bin/create-chroot.sh: create edu chroots on i386, amd64 and powerpc

commit 474ad9f811e39115327034c23b08720a1121850f
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Nov 11 22:02:43 2010 +0100

    etc/99builddsourceslist: rip out support for key packages
    
    It doesn't seem to be possible to use apt-get via simple chroot
    statements in a sane way from this script.  You'd need to update
    its cache first because the new sources.list might not refer to
    any mirrors whose lists are already cached and then dpkg complains
    about its environment not being set up properly.
    
    So let's add the debian-edu key to the package and handle it like
    the backports.org key.

commit 548ee0641883b1c3170416ef61da19ab9d8d3526
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Wed Nov 10 01:20:26 2010 -0500

    Add option to refuse to ever remove essential packages.

commit 1ea5e270438db99b646fcbf28ce5ad3dd708f55b
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Wed Nov 10 01:07:31 2010 -0500

    Fix some aptitude options in accordance with aptitude documentation.

commit 0b0eb6a221ba1a16379c329ff6e5c987ed37a897
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Wed Nov 10 01:00:23 2010 -0500

    Set --allow-unauthenticated (when appropriate) and --no-install-recommends option for apt resolver.

commit 07bf78ec09d14fcc1b985158f3da36f80c84c4e3
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 10 00:01:58 2010 +0000

    Sbuild::AptResolver: Add new resolver using apt-get
    
    Like the 'aptitude' resolver, 'apt' installs a dependency package
    containing the Build-Depends and Build-Conflicts and Depends and
    Conflicts, then runs "apt-get -yf install" to force installation
    and removal of the depends and conflicts.

commit fa4cd4daa34d687f64b8b085c6aaaab0a716a3be
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 9 19:47:06 2010 +0000

    debian: Document revert of resolver to internal

commit 2e07435a301dcaae4858b3a72e00f6b33a793566
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 9 19:24:58 2010 +0000

    debian: Document resolver changes in sbuild.NEWS

commit c16ed3fe979926ab1bcbd43cc8a307703062479c
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 9 19:17:54 2010 +0000

    NEWS: Revert resolver to internal

commit 49047c1d7bc3809774920aa7fd49921759ebe16b
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 9 17:45:06 2010 +0000

    Sbuild::Conf: Revert resolver to internal by default for now

commit 77a5b174d0b518bf4fe9ee47ec56e60b9418929a
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 9 17:33:30 2010 +0000

    sbuild.conf: $lintian_opt should be $lintian_opts

commit 49d453185ee50f3b22372cc37e8e82c3cc7117c1
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 8 21:55:57 2010 +0000

    Extend sbuild compatibility mode for buildd usage
    
    Define compatibility mode in Sbuild::Sysconfig.
    Default resolver to internal in configuration (if compat).
    Strip chroot namespace when beginning session (if compat).
    [schroot 1.2.x compat]

commit aa172107b96c87a92114bac659e83fa9d56d5649
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 8 21:08:14 2010 +0000

    Sbuild: Correct chroot lock unlocking on failure path
    
    Locking failure would unlock prematurely.

commit 0266fb2124041894e5e2ff5466eab0c78c8e20ba
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 8 17:45:35 2010 +0000

    debian: Bump version to 0.60.4-1 and close #602789

commit 5076fda4c3fe4cb97685719f006a4ce0453cf3ef
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 8 17:15:46 2010 +0000

    NEWS: Bump version to 0.60.4

commit 3531b5f6f93afb490aa0cdb5981a17d7ba977d2c
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Mon Nov 8 01:38:28 2010 -0500

    Fix regression when passing source:<distribution> as CHROOT for sbuild-update and friends.
    
    Also makes it possible to override use of 'source' as namespace.

commit 413577ce20a7c10b4fce3b1d2ca5ea3f408d28a8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 22:33:26 2010 +0000

    debian: Correct version

commit af4232baa8cfdcb3d095cda75d8775c15422e184
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 22:32:39 2010 +0000

    NEWS: Document new features

commit 3761738a1f04ba481b5cbc697264bd4a081f197b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 22:32:22 2010 +0000

    debian: Fix typo

commit 5a1a17b974ccecbf09298de8697197fe7aeca9ec
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 21:59:12 2010 +0000

    Sbuild: Update copyright

commit f7d4c087cff579778da86e9567075c1c470fb46e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 21:56:49 2010 +0000

    Sbuild::ResolverBase: Don't log Build-Depends/Conflicts by default

commit 453b13890f99d87cebd187642667cb073e7eacaf
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 21:56:34 2010 +0000

    sbuild.conf: Document $build_dep_resolver

commit 88f049b81d1b080204bfef34acf7c7895988bc27
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 21:42:51 2010 +0000

    Sbuild::ChrootInfo: Support namespaces properly with sudo

commit bc11b8c21979b4f952f951411847ce6e1f36c796
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 21:33:17 2010 +0000

    debian: Close #567505

commit 6daaf332f3cf5aada99bd68e373d39ba4c50de50
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 21:25:47 2010 +0000

    Sbuild::ChrootInfo: Add support for namespaces
    
    Support schroot namespaces properly.  Read in all chroots in the
    'chroot' and 'source' namespaces.  Add a namespace argument to the
    ChrootInfo find function, and get_info functions create namespaces.
    create() also takes a namespace parameters, used by Sbuild::Build
    and Sbuild::Utility.  Utility programs operate in the 'source'
    namespace by default, falling back to the 'chroot' namespace if
    a source chroot does not exist.  Sudo chroots use only the 'chroot'
    namespace.
    
    schroot namespace support had been added previously by overriding
    the find() function and stripping namespaces, but this had several
    issues, and did not permit good use of the 'source' namespace.

commit b0a838371974cac59bdd9493d72dff668dd46cc1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 15:34:28 2010 +0000

    Sbuild::Conf: Log external command output by default

commit bf2873f3c7be181b11d630efdcc8d146242d016f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 15:34:05 2010 +0000

    Sbuild::ChrootInfoSchroot: Parse chroot namespaces
    
    Don't use yet.

commit 072312d39b15eac008e82c713bf31a1ab05c664d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 15:28:38 2010 +0000

    AUTHORS: Add lintian/external commands authorship

commit 5288ab4eb2f9b18869d3ec02e7bdf9fd7c0aefeb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 12:21:22 2010 +0000

    Sbuild::Build: Log summary statistics

commit 0586e64d0d00af7c5d3f380b0429289aa728e0f4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 10:59:09 2010 +0000

    Sbuild::Build: run_external_commands: Don't log section if no commands specified

commit b432f6b85db9e08c3a85b05f0eac1e4732f43895
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 01:42:41 2010 +0000

    debian: Close #551311 and document lintian and external commands

commit 6101a5f3f68ecefc71c30042c55ca7eb7475a269
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 01:36:16 2010 +0000

    Sbuild::Build: Log source package creation

commit 1dfc1a12c4040fb872386c1a081af3c56ed25fb8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 01:31:00 2010 +0000

    Sbuild::Build: Rearrange order of external commands

commit b06cc3d0c9634b230925301d5e57c3b7948698de
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 01:25:12 2010 +0000

    Sbuild::Base: Don't warn about undefined log streams unless debugging

commit 0827a4aab6c3082a31bee53ad97a48f31b0fae27
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 01:24:21 2010 +0000

    Sbuild::Build: Install core build dependencies separately
    
    build-essential needs to be installed before we can read its files
    Separate handling of gcc-snapshot and manual source dependencies

commit 527b434c67e92a1b871a09cb1275c9fa11ef3038
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 00:57:22 2010 +0000

    Sbuild::ResolverBase: Move get_dpkg_status here

commit 9faaef5868adf06734a882d2cc92245938e2c07c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 00:50:50 2010 +0000

    man: external_commands is a hashref

commit 9ce701f64bad5bac002e9e703dd6a06dd1934efc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 00:46:55 2010 +0000

    sbuild.conf: Remove obsolete %alternatives

commit 60daffd606d3f4db195ce6088a1dff690fb5fd1f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 00:46:38 2010 +0000

    Sbuild::Conf: external_commands is a hashref

commit d017dc360df2b68470297bbc2df294ed9ed519f1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 00:02:19 2010 +0000

    Sbuild::Build::run_external_commands: Initialise $chroot to 0

commit e58a592e6992c979a7adc5122ffd34b392599269
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 7 00:01:50 2010 +0000

    Sbuild::Build: Only log to build log during a package build

commit 0a1b0ed05bac8bbb4b6ac48fb3cd0871c6f515e8
Merge: bbdaf88 63a8944
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 6 23:46:15 2010 +0000

    Merge branch 'master' into debuild-functionality

commit 63a89444ff7b4d1e872c73825d3567d7bc6e6545
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 6 23:37:03 2010 +0000

    debian: Default $resolve_virtual to 0

commit 0e30f1b871ad5e2016c13203b1b42410fcf27396
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 6 23:36:27 2010 +0000

    Sbuild::Conf: Default RESOLVE_VIRTUAL to off
    
    Avoids changing the historical behaviour of the internal resolver.

commit 1b7c460d2421f6808708b733d1391a6beb1a4f23
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 6 22:51:35 2010 +0000

    Sbuild::InternalResolver: Move get_dpkg_status and get_apt_policy here

commit 8e39171a98e06e927ccba2f8831d78b458a1460d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 6 21:01:05 2010 +0000

    Sbuild: Handle failure paths better

commit bbdaf8862cdb66fe4cd77776772c25da2d0b6206
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 6 16:47:56 2010 +0000

    Sbuild::Build: Don't strip epoch before calling set_version

commit 09cf6bcf76822593e2f713d4cb91076e0bf86ca3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 6 16:17:14 2010 +0000

    Sbuild::Build: Remove removed install_core function call and reindent

commit ba0bd584c81b42379ca3291c0f051c365d7dd822
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 6 15:43:03 2010 +0000

    Sbuild::Build: Create Host ChrootRoot object in constructur
    
    Initialise streams later, once they get initialised for us.

commit 7e9de9242aa91c7f97cc4ea46a4802745e5e8ce0
Merge: dffb5a3 0c205b4
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 5 18:38:50 2010 +0000

    Merge branch 'master' into debuild-functionality
    
    Conflicts:
    	lib/Sbuild/Build.pm

commit 0c205b407e3446d3c6c2006e320d59b13544b821
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 5 18:33:05 2010 +0000

    sbuild-update: Lock chroot to block if a build is running

commit 379d92e3cecfdef1770c67dbf913c2ed59c7036c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 5 18:32:36 2010 +0000

    Sbuild::Chroot: Move chroot locking here

commit 9a1dda3d947e1f4aff608f0871cb02a1077eda60
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 5 16:29:58 2010 +0000

    Sbuild::InternalResolver: Remove obsolete sourcedeps override support

commit 797cdca708196c1dfd9b1923f2cd2a607f70c020
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 5 16:20:21 2010 +0000

    Sbuild::InternalResolver: Remove use of obsolete $conf::srcdep_over
    
    Source dependencies and overrides are no longer available.

commit 8990787975f051d7c098071eea5f157bce6e2e60
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 5 08:40:31 2010 +0000

    Sbuild: Internal resolver uses AptDependencies
    
    Simplify the internal resolver by using AptDependencies in place of
    Dependencies, and computing Dependencies at package install time.
    
    Allow installation of multiple package lists by merging during install.
    
    Old unused Dependencies code removed.

commit dffb5a37243c0476016196349e1dd70fb54711da
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Nov 4 02:50:47 2010 -0400

    Now really fix builds for debianized source directories.

commit 37497268dadadf446ceccdf38efbe4e3ce0591a9
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Nov 4 02:01:01 2010 -0400

    Fix where logging begins/ends.

commit e4189fa5c36f0e6be6d25e5b388780e29fb98167
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Nov 4 01:49:07 2010 -0400

    Fix builds from debianized source directories.

commit 9ad8f45c5c0fa9b8f62de6bd2f8e759f5e78a1a0
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Nov 4 00:52:25 2010 -0400

    Fix addition of lintian options to command to run.

commit 9c1fe3521c87fbd560c36249163ad2f5319469ae
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Nov 4 00:47:04 2010 -0400

    Fix logging of external commands, only logging when specified to log stdout or stderr of commands.

commit a7c64d8b1b28c87179327530f465f2e05a7de4ee
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Nov 4 00:45:30 2010 -0400

    Do not ignore options that are set to undef.

commit 66c5efd7afc35c4c9a0e76a019c3d9921b9d2988
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Nov 4 00:17:34 2010 -0400

    Setup host session with reasonable defaults.
    This fixes issue where commands run on the host would not be logged.

commit 4030d93a0de80ac58686bb023c398e535360ffde
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Wed Nov 3 17:26:53 2010 -0400

    Fix permissions on generated sbuild tarball.

commit dfbd9768d7518f229fc481e58d535dffbbff2483
Merge: c923e9e bc5ff1a
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Wed Nov 3 16:49:15 2010 -0400

    Merge branch 'master' into debuild-functionality

commit 0c4da880a762a023339ecb0a58f5c85cee663111
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 20:00:30 2010 +0000

    debian: Close #545215

commit bc5ff1a4b75ede1989da475996e952ea2771a61e
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 19:58:19 2010 +0000

    NEWS: Document sbuild-createchroot tarball creation

commit 1d5af24d07b8d5924942042580e3df42efb098a5
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 19:55:57 2010 +0000

    debian: Document tarball creation by sbuild-createchroot

commit ba5124996d4bb5cda1a6be66b0a8b0af7b99ab8d
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 19:50:55 2010 +0000

    debian: Close #602318

commit 60ef668af2f5cbca0c8d4c0dad936b257ab77c29
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 19:46:52 2010 +0000

    Sbuild::ConfBase: Never set Sbuild::debug_level to undef

commit f5d757113b57dbdba056c9ef70a2e78148cf4890
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 19:32:29 2010 +0000

    sbuild-createchroot: Correct message to print .tar.gz rather than .tgz

commit c923e9e06c032e9a41dead7e5759088de88dbc50
Merge: 085d088 cc96c84
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Wed Nov 3 15:30:22 2010 -0400

    Merge branch 'master' into debuild-functionality

commit cc96c841441b5c143ca44c7691be9d149f0bc9dd
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 19:15:22 2010 +0000

    sbuild-createchroot: Default to .tar.gz rather than .tgz

commit 085d088757bc9db0e1cc0b8f8d8a580f9106d5b7
Merge: 1c157a2 1382875
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Wed Nov 3 15:00:51 2010 -0400

    Merge branch 'master' into debuild-functionality

commit 1382875de3feba3f6ba35026ed04d379f6c79151
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 18:40:30 2010 +0000

    sbuild-createchroot: Rename --keep-sbuildchroot-dir to --keep-sbuild-chroot-dir

commit ac0789bc8a3eed723404136d4a86390c2d9a60b3
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 18:38:49 2010 +0000

    man: Add Andres Mejia to AUTHORS/COPYRIGHT

commit aa0df78ea06ed142664eca2003c848b95c164e71
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 18:37:26 2010 +0000

    AUTHORS: Add Andres Mejia and also document in sbuild-createchroot(8)

commit 07a46ffd442c55b6a7e108d2f2874b788786dfab
Merge: a583b9a 0f3af4f
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 17:58:54 2010 +0000

    Merge branch 'master' into sbuild-createchroot

commit 0f3af4f654e61b539f8d0689c96f136b7374bbff
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 17:47:55 2010 +0000

    debian: aptitude is the default resolver

commit fdd4055a8c97d60483bff461fb9f13a1f304b8bc
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 17:47:42 2010 +0000

    NEWS: aptitude is the default resolver

commit ee16cdfc1853e6716bb344b7bb21bb5d03d4b3a9
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 17:47:27 2010 +0000

    Sbuild::Conf: Make aptitude the default resolver

commit a6a655bb749d50a0bf8758414e294bccb802ec73
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Wed Nov 3 17:39:25 2010 +0000

    Sbuild: Fix uninitalised value warning in debug2

commit 1c157a27d4a149a35eeccf0e358eed2bc27cb524
Merge: 7d804de bc009a2
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Wed Nov 3 12:53:32 2010 -0400

    Merge branch 'master' into debuild-functionality

commit 6fb4da4fa3b7ec3ce049dc13d9b07cd80e21c140
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 16:38:10 2010 +0000

    debian: Close #464376

commit 75814733be9c1a70f18bb1bfb44d532364b160b6
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 16:28:41 2010 +0000

    debian: Close #403246

commit bc009a29f782936a23d488ca97e0ec243fc75f5c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 14:04:14 2010 +0000

    debian: Bump version to 0.60.3-1

commit 9adb397b46fa9a2da0c09b64fbebd7515bbe7f6b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 14:03:57 2010 +0000

    NEWS: Bump version to 0.60.3

commit ccddc5a6fbe7d8de40cd14a7a05747a0ae9eb5bb
Merge: 4f9f5f4 a994d14
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 13:53:09 2010 +0000

    Merge branch 'master' into sbuild-update

commit a994d14ad90167930a5fd3eca7e3a1d35b722a6a
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 13:09:31 2010 +0000

    Sbuild::Build: Use Dpkg::Control to parse .dsc

commit 4f9f5f459e3b431ff33a9af5702175588a79f692
Merge: 230b576 920182c
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 2 21:56:54 2010 -0400

    Merge branch 'master' into sbuild-update

commit a583b9a6369de967aca30ac8f850f6605a220688
Merge: 4505089 920182c
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 2 21:56:41 2010 -0400

    Merge branch 'master' into sbuild-createchroot

commit 7d804de33daccb2dcdd3161cd2439a34b11e6aaf
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 2 21:55:27 2010 -0400

    Fix breakage of commands that are run in root filesystem.

commit 1865adc92eb13ff15937b9fc47d3eaca0390e3f8
Merge: 1d96785 920182c
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 2 20:39:37 2010 -0400

    Merge branch 'master' into debuild-functionality
    
    Conflicts:
    	lib/Sbuild/Build.pm

commit 920182c6ffb67ea39c640434d1a7cf5b3a101c73
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 00:23:51 2010 +0000

    Sbuild: Rename BuildDepSatisfier classes to Resolver
    
    Sbuild::AptitudeBuildDepSatisfier is AptitudeResolver
    Sbuild::InternalBuildDepSatisfier is InternalResolver
    Sbuild::BuildDepSatisfierBase is ResolverBase

commit 876e60c5d428af151f678eced2acf1db5e5d6104
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 3 00:03:52 2010 +0000

    sbuild: Call unlock_chroot() on shutdown

commit e85305b85ed23f833dad944a585a8b1dfaea9765
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 23:46:31 2010 +0000

    Buildd: Remove srcdep and install locks
    
    All locking now comes under the chroot lock, making the separate
    srcdep and install locks redundant.

commit a550c88db3ae7648b4c4763ba0fffa0c64c880a0
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 23:15:26 2010 +0000

    Sbuild::BuildDepSatisfierBase: Add chroot locking functions
    
    Add chroot_lock and chroot_unlock functions.
    Sbuild::Build::run locks the chroot after beginning a session, and
    unlocks immediately prior to ending a session.

commit 023b540e03e5d0c7a8d726ddb1cd741056839a0c
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 21:51:29 2010 +0000

    Sbuild::Options: Fix warning when using gcc-snapshot

commit 4938ae861fbdcb2a9ae36ed5ca9fec56dc6c5c10
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 21:50:49 2010 +0000

    Sbuild: Fully separate internal and aptitude resolvers
    
    Not internal resolver code is now used by the aptitude resolver.

commit 2d47eaa3aa7a316e17f6b26693ed686c9a463531
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 21:28:05 2010 +0000

    Sbuild::BuildDepSatisfierBase: Move merge_pkg_build_deps here
    
    merge_pkg_build_deps becomes add_dependencies
    
    The Sbuild::Build Dependencies and AptDependencies members are
    also moved here.
    
    This change moves all dependency resolving completely out of
    Sbuild::Build and into the resolver code.

commit 321e75a71b0d716d77abbeffb67be462277ac31c
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 20:19:39 2010 +0000

    Sbuild::Build: Remove unused functions
    
    Remove expand_virtuals, expand_dependencies and file_for_name.

commit 81bd06a13a28014ef15c2786e878654f03f1ffeb
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 20:17:30 2010 +0000

    Sbuild::Build: Remove unused get_altlist

commit 9141da1ee5d4212ab124f681da070847062293a7
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 20:14:35 2010 +0000

    Sbuild::BuildDepSatisfierBase: Display toolchain packages directly from dpkg
    
    Filter toolchain packages directly from installed package list.
    Remove unused expand_dependencies from Sbuild::Build.

commit 1211c8e237366f9ace116730086602ad92b8c3d8
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 19:09:24 2010 +0000

    Sbuild::Build: Drop unused is_superset

commit 95cf9921aba0d85176c40b12fec8518bcded60ae
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 19:04:43 2010 +0000

    Sbuild::AptitudeBuildDepSatisfier: Use package build dependencies directly
    
    The aptitude resolver was using the pre-parsed dependency information
    used by the internal resolver.  Use the build dependencies directly
    from the package control file, using Dpkg::Deps deps_parse with
    reduce_arch=1 to filter arch-specific dependencies when constructing
    the control file for the dummy package.
    
    In Sbuild::Build, create an alternative AptDependencies structure which
    mirrors the existing Dependencies structure but which does not pre-parse
    any dependencies.

commit 1d9678556a25d12d92eb1df30009e0438b6a2ce4
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 2 14:16:53 2010 -0400

    Run commands only if there are commands to run

commit f82fe155b4e0e2e6a9802f939e415d0679ec180f
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 2 14:14:10 2010 -0400

    Fix comparison of $debug_level. Only compare if it's defined.

commit bde142956f4ecd7da5e4b4bd1c4330758e90641a
Merge: 6297b8e c62a210
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 2 14:13:57 2010 -0400

    Merge branch 'master' into debuild-functionality
    
    Conflicts:
    	lib/Sbuild/Build.pm
    	lib/Sbuild/Conf.pm

commit 4505089dcc3acf9c769e1d538e5b67595e592d4a
Merge: 1478ae2 c62a210
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 2 13:40:24 2010 -0400

    Merge branch 'master' into sbuild-createchroot

commit 230b5767f96d700032b02413d6b03b198c304436
Merge: b53b679 c62a210
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Nov 2 13:40:08 2010 -0400

    Merge branch 'master' into sbuild-update

commit d2e4c08a6b724729a5404423cd8c16366c689366
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 17:32:12 2010 +0000

    Sbuild::Build: Remove 'Have DSC Build Deps'
    
    All packages now have build dependencies.

commit c62a210ed548f05e4e58133e4ae86afffbefa202
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 17:26:02 2010 +0000

    build: Restore check for aptitude
    
    Without the configure check, APTITUDE isn't defined in Sbuild::Sysconfig.

commit 23e2076519f78ce2a76630cf6290a90cb978f14e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 17:25:20 2010 +0000

    Sbuild::AptitudeBuildDepSatisfier: Clean up dummy deb files
    
    We always pass through the cleanup code on all failure paths.

commit b6098d0cad24ff2bf9211a0e662d82eb7ad79f17
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 16:46:09 2010 +0000

    Sbuild::AptitudeBuildDepSatisfier: Handle Build-Conflicts and error conditions
    
    Handle errors building dummy package
    Handle errors installing dummy package
    Install dummy package with dpkg --force-depends --force-conflicts
    Remove package purge code since it's handled automatically in uninstall_deps

commit e7c549dfff1155467dfdd4f0a24752baa2a17d2c
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 15:47:21 2010 +0000

    Sbuild::BuildDepSatisfierBase: Replace uninstall_debs with run_apt call
    
    Don't use dpkg to remove packages since apt-get can do a better job.

commit 53db4e7d88f05aa7aa7ef0a1aed5bb022b8c7944
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 13:53:24 2010 +0000

    Sbuild::InternalBuildDepSatisfier: Reinstall all removed packages

commit 0b96d99af1468120a2ce981d5c36e7f5b129e84a
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 13:39:53 2010 +0000

    NEWS: Document major changes

commit 09dcb6bbb516f56881ed2bb4182f85b72b477d76
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 13:31:31 2010 +0000

    Sbuild::Build: Move package/version parsing debugging to where set

commit 2ca4acfd9ec9250eafd5310e07b5b18a12ec6bfd
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 13:03:50 2010 +0000

    debian: Document build-conflicts changes

commit fff1497d356d503e119e1da905fb3229bc4115fc
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 13:02:19 2010 +0000

    Sbuild::BuildDepSatisfierBase: Correctly reinstall build conflicts

commit 8b5e4087f522c1937144522a9181354b8e0ed884
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 12:52:50 2010 +0000

    debian: Tidy changelog

commit 3b235d765c2be95f91aa4b20ae8d8f7537770aa3
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 12:44:53 2010 +0000

    Sbuild::BuildDepSatisfierBase: Move Sbuild::Build::format_deps here

commit bbbc0d7939b6e5c4ee9b9b1439e5c601f219dba5
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 12:39:43 2010 +0000

    Sbuild::Build: Remove unused and broken code from merge_pkg_build_deps
    
    Remove essential package processing; now done in install_essential
    Remove virtual package processing; now done in BuildDepInternalSatisfier
    Move toolchain reporting to BuildDepSatisfierBase
    Remove expand_virtuals
    Remove cmp_dep_lists
    Remove Build object members 'Toolchain Packages' and 'Additional Deps'
    (both now unused)
    Remove 'Additional Deps' usage from prepare_watches
    Install core packages after fetching sources, and before installing
    essential packages

commit 640b5c734b3ddffe0864561ea3b76836ec15a78b
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 11:26:57 2010 +0000

    Sbuild::BuildDepSatisfierBase: Move Sbuild::Build::run_apt here
    
    run_apt is only used by the internal and aptitude resolvers,
    so move into the base class.

commit 039a29e3fe7f63e6fe3579ba352a353fd22ba049
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 11:26:27 2010 +0000

    Sbuild::Build: Do all DSC parsing in a single place

commit 1cb8285fb0ed3cc3b90d4fdeb4714d84fd3d8d69
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 11:23:23 2010 +0000

    Sbuild::Chroot: Use debug2 for logging chroot operations
    
    Unless debugging schroot/sudo command execution, this debug
    output is not needed normally, so log at lower priority.

commit 2a3854a5cce57497d23f55afcc0a3bc9b5672cd5
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 2 11:22:26 2010 +0000

    Sbuild: Add debug2 function
    
    This logs only when debug_level == 2, to avoid swamping normal
    debug output with irrelevant details.

commit d3d685fef59e02e5eb4bd63fc93ef84d5cf05f57
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 1 21:46:22 2010 +0000

    debian: Close #595934

commit 4f83985c0280d09767ab1384f0e3e262d575067e
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 1 21:35:24 2010 +0000

    Sbuild::Conf: Add RESOLVE_VIRTUAL option to disable virtual package resolving
    
    Defaults to enabled.

commit 9bd583320f1acab840c5b2c122f83947a30fa78d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 1 21:03:55 2010 +0000

    Sbuild::InternalBuildDepSatisfier: Resolve simple virtual dependencies
    
    get_virtual gets a list of packages providing a given package
    (or a single concrete package if it's not virtual), using
    "apt-cache --names-only search '^$pkg$'".  This appears, at
    present, to be the most efficient way of finding virtual
    package providers.  Packages are listed in alphabetical order.
    
    virtual_dependencies uses get_virtual to expand all virtual
    dependencies.  It currently picks the first returned package,
    which is the first sorted alphabetically.

commit 485d0062e39aa6a91d5103e9d19a4dd5bf90fb9d
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Nov 1 10:37:42 2010 +0100

    bin/create-chroot: add testing-edu

commit 9b8e2c224ece13b08dae8d5d4992a795d439b6a4
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Nov 1 13:17:14 2010 +0100

    [Buildd::Daemon] get rid of @todo entirely

commit 65aaeface5507e5442c652cb1cfc1642dbdd8209
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Nov 1 13:17:27 2010 +0100

    bin/sbuild: fixup_pkgv apparently not needed, according to rleigh

commit 0e5a5970ced13dcf9b63c78ec048e85c189820cd
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 1 19:09:33 2010 +0000

    debian: Close #590153

commit e5dcc2d88de715ac7d382ddc1ad572e317de4304
Author: Lorenzo De Liso <blackz@ubuntu.com>
Date:   Mon Nov 1 17:44:34 2010 +0000

    debian: buildd Replaces and Breaks ubuntu-dev-tools <= 0.83
    
    Apparently, ubuntu-dev-tools also shipped a buildd program.

commit 1e5814804ee26e99b2faa559aab128a1ca65dcf2
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 1 17:28:36 2010 +0000

    debian: Close #599350

commit ee144f81240e2d2cb8fcd95796262b7db09c10e9
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 1 17:26:15 2010 +0000

    Sbuild::Conf: Check sbuild group membership using gid and supplementary groups
    
    Previously, we checked if the user was a group member by looking
    at the membership of the sbuild group in the system group database.
    Now actually check for active posession of group privileges by
    looking at the process' gid and supplementary groups.

commit 0cd659422d758223b8681cfc56189d3ab1737799
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 1 17:19:15 2010 +0000

    man: Document sudo chroot symlink details

commit 42c41b9a065dc6b5c566dc62d94f6bd5352343e0
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 1 17:10:25 2010 +0000

    debian: Close #598054

commit b3d1efb66c521016dcfdc3a817c76465233dabfb
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 1 17:08:56 2010 +0000

    man: .sbuildrc is no longer required

commit b685f317b78a7a06a44fda2a1f0132023addb2ec
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 1 16:58:46 2010 +0000

    debian: Close #599348

commit a9c8a91eb829b9bc217572e49d126ab1bfbc1295
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 1 16:57:42 2010 +0000

    man: Remove obsolete parts of the sbuild man page

commit 860529f85472c22bb9ec9f9cdc91e6447316098d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 1 16:32:11 2010 +0000

    etc/25nssdatabases: Update from schroot 20nssdatabases
    
    Skip comments and blank lines in nssdatabases file
    Skip copying if source and destination are identical, preventing
    blanking the file if it's hardlinked or bind mounted.
    Use strict POSIX shell.

commit 74ca8ce573377cdf8eaa7ef045c512d5467847bc
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Nov 1 10:37:42 2010 +0100

    bin/create-chroot: add testing-edu

commit f07e28d7dd9c80023f65a3df19da34ca0beb5d3c
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Nov 1 10:37:42 2010 +0100

    bin/create-chroot: add testing-edu

commit 7d14ca461db2c29429f305fcd4021660ce90faed
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 31 21:59:48 2010 +0000

    Sbuild::Build: Update copyright

commit 81f82ef44da792a9d905bc6bf87f3181b5768c14
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 31 21:59:08 2010 +0000

    Sbuild::Build: Drop pointless log message
    
    Package-provided build-dependencies are no longer optional.

commit 9afe76e03d758172a8225d5c2e0d6f2d77ff7e91
Merge: 69957b4 f195fa2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 31 20:45:51 2010 +0000

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit 69957b43a7dd7893c0be17226ae07b7400f9bfce
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 31 20:45:16 2010 +0000

    Sbuild::Conf: Remove ALTERNATIVES support

commit 5d22c9fd9d89ec7bd07e37e1033d4f11fed94b40
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 31 20:45:08 2010 +0000

    debian: Close #571806

commit aeafdd9c1ab56f42e99903a7458afab8e6bb4d63
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 31 20:39:52 2010 +0000

    Sbuild::Build: Remove support for stderr parsing in run_apt
    
    STDERR wasn't being piped back by pipe_apt_command for some time,
    so this code was not actually being used.
    Diagnosing causes of failure in the build environment was pointless,
    since it was logged anyway, and if the messages changed would be
    missed.
    Virtual dependency resolving using the static ALTERNATIVES list has
    been removed.  This was also broken, and the aptitude resolver can
    do a proper job if this is required.

commit f195fa21612547491c17416e8ff824cb3ee218fd
Author: Cyril Brulebois <kibi@debian.org>
Date:   Sun Oct 31 17:28:18 2010 +0100

    Fix shell script comparison.
    
    The proper operator to compare strings is =, not ==. On dash for
    example, one gets:
        $ [ "a" == "b" ]
        [: 1: a: unexpected operator

commit be7e91ade3ad799b4d0229aed160e837a28e378d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 31 11:35:21 2010 +0000

    debian: Close #567506

commit 498e3a4671725b3b356182f5f853fe638bd45e95
Author: Jan-Marek Glogowski <glogow@fbihome.de>
Date:   Sun Oct 31 11:32:30 2010 +0000

    Sbuild::Build: Allow skipping ending of session on failure
    
    Allows investigation of build failures where otherwise the
    schroot session (including build tree) would be deleted.

commit 829471628cfaf6e31cde3295e652630fb690c5b4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 31 11:27:37 2010 +0000

    Sbuild::Build: Cache resolver to avoid repeated lookups

commit b942c93315cfa052e7dd0429b27d8eaa2821766a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 31 01:39:29 2010 +0100

    debian: Close #567821

commit cd3e456fdec4badb49ac3e28bca1ea7c784b0a0c
Author: Samuel Thibault <sthibault@debian.org>
Date:   Sun Oct 31 01:37:13 2010 +0100

    Buildd::Daemon: Use loop when reading from pipes
    
    Fixes hurd-i386 breakage, likely due to differing buffer sizes
    or message lengths.  This ensures the entire pipe contents are
    read.

commit 2418a896cca6d6c8ca38994644df03e0797faa8e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 31 01:35:41 2010 +0100

    debian: Close #567822

commit 2d31f10815748be72ce8ce90aa2d01a3a4b5322e
Author: Samuel Thibault <sthibault@debian.org>
Date:   Sun Oct 31 01:33:20 2010 +0100

    buildd-vlog: Fix breakage
    
    sleep statements are not optimal, but avoid most problems.

commit 4099778007839788eb72dc6cf798a835ebd19618
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 31 01:31:20 2010 +0100

    Sbuild::Build: Remove srcdep lock in cleanup_close failure path

commit 0eb9bafbe2bee6b90d61768f268b50da39354a18
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 31 01:29:06 2010 +0100

    Sbuild::Build: Add and handle additional failure stages

commit 77179b7848de62d94cfb7a05b86b21fc21dbaf1a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 30 18:08:52 2010 +0100

    debian: Close #579971

commit 96013d4908bbb95d12f210780d3d78f9ccb3a447
Author: Salvatore Bonaccorso <salvatore.bonaccorso@gmail.com>
Date:   Sat Oct 30 18:07:47 2010 +0100

    man: Remove trailing q from sbuild-createchroot(8)

commit bf23702b4ca1eabf3a01d298834a1aa4e946296d
Merge: ad4d401 1c8e016
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 30 17:17:03 2010 +0100

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit ad4d401756401b3b3d3dabd8de909c6979f6ddf6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 30 17:13:55 2010 +0100

    Sbuild::Build: Install core packages from CORE_DEPENDS

commit efc4055bed439649f3b9f55bb617fe5fff40804b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 30 17:13:19 2010 +0100

    Sbuild:BuildDepSatisfierBase: remove_srcdep_lock_file decrements lock count

commit 8184bf1b9ac20830bb116c8866b90c91f3a4209f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 30 17:12:27 2010 +0100

    Sbuild::Conf: Add CORE_DEPENDS key
    
    A list of core packages which must be installed for sbuild
    to function.  Currently defaults to build-essential and fakeroot.

commit 1c8e01677735335c31c55f942406a6fbde55dd22
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Oct 30 17:16:41 2010 +0200

    configure.ac: drop DPKG_ARCHITECTURE check

commit 6ce363aeffb9aa52955c747cbf0021aa70cad7a8
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Oct 30 17:15:42 2010 +0200

    [Sbuild::Build] use Dpkg::Arch::debarch_is instead of dpkg-architecture

commit 1eae88b781de3bc54e62a69810ec7166237c0132
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Oct 30 17:13:19 2010 +0200

    [WannaBuild::Database] use Dpkg::Arch::debarch_is instead of dpkg-architecture

commit c29a57c35aa44085426f4b6039c566d7f4b38345
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 30 15:58:27 2010 +0100

    debian: Close #380113

commit 768e9694db5d392cd435ee1321ba9f0f2c13e3a9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 30 15:49:01 2010 +0100

    Sbuild::Build: Install ESSENTIAL packages before build deps
    
    Modify the BuildDepSatisfiers to allow installation of package
    sets other than the current package build-deps.  Install/remove
    both the ESSENTIAL packages and the current package build dependencies.

commit e7dc24488c5c941639b0bab46e247a5bd3d96da4
Merge: 320cc46 f6090b6
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Oct 30 14:13:08 2010 +0200

    Merge branch 'buildd'

commit f6090b672f6c8f24520c0e0ab365bf8bab06ca48
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Oct 30 13:58:11 2010 +0200

    bin/create-chroot.sh: support lenny-backports-sloppy creation

commit 320cc468031f066946b181e539c3473fd4b30484
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Oct 28 22:13:24 2010 +0100

    debian: Close #569823

commit fe31bd6fbb92d5bf48c111b68ee3697356808398
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Oct 28 22:12:19 2010 +0100

    Sbuild::Build: Log source version as well as binary version

commit b483eff070d709dc9bed65f1411e72130b588789
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Oct 28 22:00:40 2010 +0100

    debian: Close #586275, #578810, #591187, #591188, #591189, #595863, #595866, #595872

commit dffa5884a0df0821ce21d62ac535b1b6a1f95d11
Author: Ansgar Burchardt <ansgar@43-1.org>
Date:   Mon Jul 5 17:35:27 2010 +0900

    Sbuild::InternalBuildDepSatisfier: Do not try other alternatives if installing default version is enough
    
    When we encounter
    
      Build-Depends: pkg-a (>= 2) | pkg-b (>= 3)
    
    and a lower version of pkg-a is already installed (or provided by
    another package), sbuild would try to upgrade pkg-b as well.
    
    This patch changes the behaviour of sbuild to not try satisfying
    alternative dependencies if the dependency can be satisfied by
    installing the default version.
    
    Bug-Debian: http://bugs.debian.org/586275
    Signed-off-by: Ansgar Burchardt <ansgar@43-1.org>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 1478ae27ba528c19c680df38c5d8ba3cc8105616
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Oct 28 13:48:04 2010 -0400

    Remove deprecated key 'priority' from being added in configuration files.

commit 6297b8e1273db9ccaccf31cffda96f053e0bcf27
Merge: db0c8dc 51d8b81
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Wed Oct 27 14:36:06 2010 -0400

    Merge branch 'master' into debuild-functionality

commit 715859d662940539b04fc2f3b5bc14065e9d3adb
Merge: 24e375c 51d8b81
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Wed Oct 27 14:35:57 2010 -0400

    Merge branch 'master' into sbuild-createchroot

commit b53b6793f306a6711213f5f134dbc100faab1931
Merge: cbbc08b 51d8b81
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Wed Oct 27 14:35:43 2010 -0400

    Merge branch 'master' into sbuild-update

commit 51d8b818c65101ec0145fb5bc53baf1c4a12aa7d
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Oct 26 23:01:33 2010 +0100

    debian: Close #588035

commit 96e37214fe8a2d36bee96b1a7d2d37c796b04e26
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Oct 26 22:59:36 2010 +0100

    debian: Bump version to 0.60.2-1

commit cc5907e0938d773a4e77e2b67eb69eeda56e2611
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Oct 26 22:59:02 2010 +0100

    NEWS: Bump version to 0.60.2

commit b572872e0ef8a26c4ab174a79304323ac9118338
Author: Ansgar Burchardt <ansgar@43-1.org>
Date:   Tue Oct 26 22:58:32 2010 +0100

    Sbuild::AptitudeBuildDepSatisfier: Do not ignore trust violations
    
    Set the value of Aptitude::CmdLine::Ignore-Trust-Violations depending on
    the $apt_allow_unauthenticated option.
    
    Bug-Debian: http://bugs.debian.org/588035
    Signed-off-by: Ansgar Burchardt <ansgar@43-1.org>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 7ac00d6608e54c9a7365451701ee12af73ba8303
Author: Ansgar Burchardt <ansgar@43-1.org>
Date:   Tue Oct 26 22:53:34 2010 +0100

    Sbuild::AptitudeBuildDepSatisfier: Do not pass -o Apt::Install-Recommends=false to aptitude
    
    The option --without-recommends corresponds to the configuration options
    Apt::Install-Recommends and Apt::AutoRemove::InstallRecommends.  There
    is no need to pass the option explicitly.
    
    Signed-off-by: Ansgar Burchardt <ansgar@43-1.org>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit db0c8dc00b881e0d7b21ac1aec7e079bd81ff62d
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Oct 26 02:35:39 2010 -0400

    Deprecate setup-hook option in favor of chroot-setup-commands feature.

commit 10f8886ae7e2c181c4b9e7ca679c18715bfd6291
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Oct 26 02:05:35 2010 -0400

    Change to using a hash of arrays of arrays as the data structure for external commands.

commit a19001a873bc504ebedd3c54f4ce8b413b66dd67
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Oct 26 01:03:17 2010 -0400

    Support running external commands inside and outside chroot.
    There's also a fix to get external commands from config files detected properly.

commit 24e375c655e57aa4d550eb502236840c29996458
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Mon Oct 25 00:43:13 2010 -0400

    Update sbuild-createchroot explaining how a tarball is generated based on a specified extension.

commit 02e2e3a82b9ff20f45d3f606af7c3388cfef085d
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sun Oct 24 23:38:45 2010 -0400

    Don't prepend 'sudo' in example command to run piuparts.
    How users run piuparts as root is at their discretion.

commit cbbc08b1610f7415bac468fe3301ce9a3b4cfca1
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sun Oct 24 23:06:39 2010 -0400

    Merge sbuild-clean functionality with sbuild-update.
    This deprecates sbuild-clean.

commit d42bb4151fdd9d1a2421dafc9edb547db60c5a09
Merge: 92464e1 2b23363
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sun Oct 24 22:23:03 2010 -0400

    Merge branch 'master' into debuild-functionality

commit 670cc71e50fb991910f72c5e0e7735623a904a5f
Merge: 1c7aab9 2b23363
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sun Oct 24 22:22:23 2010 -0400

    Merge branch 'master' into sbuild-createchroot

commit 31d85b1c4ef2c0c340152a1d82f102d1c63ea1ec
Merge: 2d2d0ac 2b23363
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sun Oct 24 22:21:48 2010 -0400

    Merge branch 'master' into sbuild-update

commit 2b2336347a1a9f747f0216eddf84831016a6cf21
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 24 20:05:43 2010 +0100

    debian: Maintainer scripts use NMU-safe version numbers

commit 0b31eb82acc2e41e493ef4b3d922b862ad5d963d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 24 19:57:39 2010 +0100

    debian: Upgrade to standards version 3.9.1

commit 93ad8d1a3321d4069f82c93003a892c3ce191453
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 24 19:57:16 2010 +0100

    debian: Migrate renamed conffiles to new locations

commit 31feb5475608ced12e038fc6ad3e1d3b539f18fd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 24 19:33:27 2010 +0100

    build: Add --enable-compat option to configure
    
    This allows compatibility features to be selectively enabled,
    which is intended to allow sbuild to build with support for
    current features when build for unstable, and with support for
    stable releases when build for stable (which includes buildds).
    This will allow both uses from a single source base.

commit 9f70d48d71aab89ace43a98751782e5ee7842f08
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 24 19:25:13 2010 +0100

    build: Drop AM_MAINTAINER_MODE

commit 657e9d8b432efed49f4d67f15f2c16a0aaebf0be
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 24 19:17:10 2010 +0100

    debian: Install schroot configuration into /etc/schroot

commit b2ce1a79dcf4f934d5892690a4600c28b412fee9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 24 19:12:31 2010 +0100

    etc: Add support for profile templates
    
    Current buildd chroot script-config files don't use current
    schroot script-config layout and naming conventions, and do
    not support non-Linux architectures.  Copy profile-templates
    template tree and genprofile profile generator from schroot,
    and create "buildd" profile templates for linux and freebsd.
    
    Update sbuild-createchroot to use sbuild/config profile, and
    create-chroot to use buildd/profile.
    
    Update buildd chroot configuration to use new script-config
    name in buildd postinst.
    
    Delete old profile files from etc, since these are now generated
    from the profile templates.

commit 30ef387e5a0da926a735341ff0b19a110939dbf0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 24 13:28:25 2010 +0100

    debian: create-chroot is installed into libexecdir automatically

commit 1d7050f68d7bd1198c2051202fbadb9560dca4bb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 23 14:05:51 2010 +0100

    Sbuild::Conf: Only validate APTITUDE if being used

commit f0644d8b3186027767d1b031958f782e9d1a0aca
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 23 14:05:37 2010 +0100

    build: Distribute apt-keys

commit 0067918798447eee2a27dcd4456ed4a108012a5e
Merge: b8bb15e 4a7fb7f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 10 20:07:15 2010 +0100

    Merge branch 'buildd' into buildd-merge

commit b8bb15e7c0de8925e19fcb3fb876c94fd28d7528
Merge: 35de096 52d1331
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 10 20:06:55 2010 +0100

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit 35de09692116a053245a5a26c1bb82b61ac156bd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 10 20:03:43 2010 +0100

    debian: Close #588818

commit 4a7fb7f1fdf8386f27df6d77be845278c9c036ff
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Oct 10 16:59:53 2010 +0200

    etc/99builddsourceslist: backports/buildd has slightly different semantics

commit e8cc34b073fbed8ee5f5be8f51bd91d2902b2802
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Oct 10 16:36:03 2010 +0200

    etc/99builddsourceslist: correct off-by-one in sloppy detection

commit cd031089f2d8481dec7505b61cfa05ac1b2be31f
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Oct 10 16:31:04 2010 +0200

    etc/script-defaults.buildd: support variants with one dash in them

commit eabd4aa861a8e353d00f860bd7a94cd2ac5be036
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Oct 10 16:23:56 2010 +0200

    bin/sbuild: remove bogus Jobs File unlink

commit 48a57289f474d6bb8dc588d195ad878d688c38fd
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Oct 10 16:19:52 2010 +0200

    etc/99builddsourceslist: fix backports URLs

commit 1128e40b3f290e88c2b7264c6b15a718d6f8f1ac
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Oct 10 16:19:23 2010 +0200

    etc/99builddsourceslist: fix debian-edu URL

commit 66ae451b4753de7d451b58453600e1f9170b9040
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Oct 9 11:32:51 2010 +0200

    Switch from www.backports.org to backports-master.debian.org.

commit e7a75141919b8789acd99a5fbf4a3b333f0292b7
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Oct 6 15:56:17 2010 +0200

    etc/99builddsourceslist: use normal string equals

commit e4bc25aea0f75940870c249151ef41b8f873fb47
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Oct 6 15:55:42 2010 +0200

    etc/99builddsourceslist: add support for backports-sloppy

commit 12f167389048c03646c4609039cfa31c41f902d8
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Oct 4 12:14:21 2010 +0200

    etc/99builddsourceslist: fix up the indentation

commit 52d13315dd1e2762e0616899012c363ab3e7ea64
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Aug 31 11:14:12 2010 +0200

    man/buildd.1.in: Ryan Murray does not maintain a fork of sbuild anymore

commit 2d2d0ac8c2feea894470159813b54da3aa96e45c
Merge: a3b9cc1 e058334
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Aug 28 19:42:45 2010 -0400

    Merge branch 'master' into sbuild-update

commit 92464e1022ec1223fbbd31309475fe2d019a150d
Merge: 9f6a358 e058334
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Aug 28 19:41:26 2010 -0400

    Merge branch 'master' into debuild-functionality

commit 1c7aab97d49e791ae378e8be6d51cd023fd3ef51
Merge: 70ebbe9 e058334
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Aug 28 19:40:28 2010 -0400

    Merge branch 'master' into sbuild-createchroot
    
    Conflicts:
    	bin/sbuild-createchroot

commit e058334813faaf8a5000ffafbc091a2bf0b9f8b3
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Aug 28 22:49:39 2010 +0200

    bin/sbuild-createchroot: fix the schroot template
    
    Dots are no longer allowed in schroot config snippets, to comply with the
    run-parts regexp.

commit 70ebbe98c68ed8a65946f4018d7f3b30c0b5fb88
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Fri Aug 20 03:54:09 2010 -0400

    Support multiple tarball compression formats besides gzip.

commit a3b9cc11490554b8967a164e28526e68182a4f14
Merge: b590629 aa08f1a
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Aug 19 20:56:22 2010 -0400

    Merge branch 'master' into sbuild-update

commit 93315a62f6c2d0d04b47e5cd9c66899cc31918d6
Merge: a5937aa aa08f1a
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Aug 19 20:56:13 2010 -0400

    Merge branch 'master' into sbuild-createchroot

commit 9f6a35823e64988868f36847166bc79ab467694d
Merge: a65357b aa08f1a
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Aug 19 20:56:05 2010 -0400

    Merge branch 'master' into debuild-functionality

commit b590629158e6a9710f0f2b9b4f49f9f00939e50c
Merge: b336ccb 3426a61
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Aug 19 16:48:02 2010 -0400

    Merge branch 'master' into sbuild-update

commit a5937aa6b3c6b7c76008cce31650359181bea187
Merge: af29218 3426a61
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Aug 19 16:47:53 2010 -0400

    Merge branch 'master' into sbuild-createchroot

commit a65357be74588914dbf7bf77bc10cac74cfe2701
Merge: c58a8c7 3426a61
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Aug 19 16:47:44 2010 -0400

    Merge branch 'master' into debuild-functionality

commit aa08f1aa63a0b46d5ea78a89f4397c6e7186f0ce
Merge: 3426a61 b336ccb
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Aug 19 21:46:46 2010 +0100

    Merge remote branch 'ceros/sbuild-update'

commit 3426a619aa9069bb88be72ea1c454acd9467c879
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Thu Aug 19 21:18:50 2010 +0100

    Sbuild::ChrootInfoSchroot: Add find function which copes with chroot namespaces
    
    schroot >= 1.4.8 adds chroot: and source: namespaces.  This
    function copes with the -source compatibility names so that
    sbuild-update etc. can work with source chroots.

commit 45fa88fd3b213719c33233eff20de1a71b900bc5
Merge: d89ed77 2cd9937
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Aug 18 22:07:39 2010 +0100

    Merge branch 'buildd'

commit c58a8c79ee4ad7049f93b58fbf67f80e2a6f1742
Merge: c59baf2 d89ed77
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Mon Aug 16 03:02:17 2010 -0400

    Merge branch 'master' into debuild-functionality

commit af2921850a42c1d7d6deb2d5409c16b1f991d5f3
Merge: b2e2161 d89ed77
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Mon Aug 16 03:02:05 2010 -0400

    Merge branch 'master' into sbuild-createchroot

commit b336ccb407a95ff95f5c06901bb97c06a60f82da
Merge: ebd0a35 d89ed77
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Mon Aug 16 03:01:27 2010 -0400

    Merge branch 'master' into sbuild-update

commit 2cd9937b3100f05991ce153a211d475880df4abf
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Thu Aug 5 19:04:48 2010 +0200

    no functional changes: cleanup lib/Buildd/Daemon.pm again

commit 9d0e838624e0c6c02c2b4899382737e2368e0566
Merge: 3f99f62 83eb51a
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Aug 4 23:11:39 2010 +0100

    Merge branch 'buildd' of ssh+git://git.debian.org/git/buildd-tools/sbuild into buildd

commit d89ed7745d8b03dc59fe07e3e4eb05155c4f8076
Merge: 27d9e40 8c0ec0e
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Aug 4 23:10:34 2010 +0100

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit 27d9e4080ec16395826ccce9b3e8e80d27df44c6
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Aug 4 23:09:35 2010 +0100

    debian: Close #591620

commit 3f99f62b7ba0ed1426e9bfbfe1b7d2e8ff8a3033
Author: Sebastian Andrzej Siewior <bigeasy@linutronix.de>
Date:   Wed Aug 4 10:35:21 2010 +0200

    buildd-uploader: don't kill the lock if not the owner
    
    The following happens to people which have to upload quite a lot on a
    slow uplink:
    - buildd-uploader is invoked, starts the upload process and creats a
      lock named buildd-uploader.lock
    - a second buildd-uploader instance is invoked. It notices the lock,
      doesn't do a thing except it kills the lock due to the following
      END statement:
      |if (defined($conf) &&
      |      defined($uploader) &&
      |      defined($uploader->get('Uploader Lock')));
    
      'Uploader Lock' is defined at this point but it is 0 because this
      instance does not own the lock
    - a third instance of buildd-uploader is invoked which will upload
      packages.
    
    Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de>

commit b85bf91ba12df6600c3a5531055db5a8a5e2242a
Author: Sebastian Andrzej Siewior <bigeasy@linutronix.de>
Date:   Wed Aug 4 10:35:21 2010 +0200

    buildd-uploader: don't kill the lock if not the owner
    
    The following happens to people which have to upload quite a lot on a
    slow uplink:
    - buildd-uploader is invoked, starts the upload process and creats a
      lock named buildd-uploader.lock
    - a second buildd-uploader instance is invoked. It notices the lock,
      doesn't do a thing except it kills the lock due to the following
      END statement:
      |if (defined($conf) &&
      |      defined($uploader) &&
      |      defined($uploader->get('Uploader Lock')));
    
      'Uploader Lock' is defined at this point but it is 0 because this
      instance does not own the lock
    - a third instance of buildd-uploader is invoked which will upload
      packages.
    
    Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de>

commit 83eb51acea1a360813267969c324a8305213a8fb
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Jul 30 16:58:41 2010 +0200

    etc/99builddsourceslist: support debian-edu

commit e6ee015d8b64e62bcc20722175093d159fdcac9c
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Jul 30 03:58:35 2010 +0200

    [Buildd::Mail] accept BD-Uninstallable state for transition to Failed

commit 465f892f5eae977cc920127f81d4b832d00e4d77
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Jul 30 01:24:44 2010 +0200

    bin/create-chroot: also pass linux32 on powerpc

commit 362abd93d5326cd7083246133c6ce83941a3fec0
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Jul 29 23:27:36 2010 +0200

    bin/create-chroot: correct two typos

commit 8c0ec0e5827b679e4bed2e461466fb45a86f1b38
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Jul 30 03:58:35 2010 +0200

    [Buildd::Mail] accept BD-Uninstallable state for transition to Failed

commit f10351dd144a7f22f6b284ab906d03f226586c23
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Jul 30 01:24:44 2010 +0200

    bin/create-chroot: also pass linux32 on powerpc

commit b9974544de626ef5bd0b9f4e9b576d3135a212b3
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Jul 29 23:27:36 2010 +0200

    bin/create-chroot: correct two typos

commit b2e2161a0f605eb89cf55d81fd32aa69c9a8b363
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Jul 24 19:54:32 2010 -0400

    Implement creating sbuild chroot tarballs.

commit c59baf2493d6b071c0a8474ab230d34e1b758a29
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Jul 24 18:06:39 2010 -0400

    Clarify that pre/post build commands in configuration file are array of array of strings.

commit 8efff5bb408387d6932ebe34a9dee89fc0c2b392
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Jul 24 18:04:03 2010 -0400

    Fix up sbuild man page.

commit edf175d510f8c71a9825f136069e4d37fdde7154
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Jul 24 18:03:29 2010 -0400

    Make pre/post build commands specified in command line to be array refs

commit aee8e7bf0183dafa6406092968ee8d0455a155dc
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Jul 24 17:05:49 2010 -0400

    Fixup various problems from merge.

commit 820c42c6a343f1cfe7c5f83261904458abf91751
Merge: d123d67 bbbdab1
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Jul 20 15:35:43 2010 -0400

    Merge remote branch 'rleigh/debuild-am2' into debuild-functionality
    
    Conflicts:
    	debian/rules
    	man/sbuild.1.in

commit ebd0a350f84d284135aad8de878c91a5827f803f
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Jul 20 15:01:52 2010 -0400

    Have sbuild-upgrade and sbuild-distupgrade exec sbuild-update with appropriate options.

commit 89a8e35a9fa18a256eba022a29f7d4b72b6aee0d
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Jul 20 15:01:41 2010 -0400

    Update man page for sbuild-update for new options.

commit a8c82a10bede6c31d6325cf6ebc674387cf046f4
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Jul 20 15:00:25 2010 -0400

    Allow sbuild-update to perform update, upgrade, and distupgrade.
    This also allows sbuild-update to perform the various commands all at once.

commit 16c7c88a80b6a377f0e1aaa604cccffd9c1cae59
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Mon Jul 19 20:13:00 2010 +0200

    no functional changes: cleanup lib/Buildd/Daemon.pm

commit d123d670099623ea9989ab3a3350f567b2b20af5
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 14 20:04:48 2010 +0100

    Sbuild: Add support for aptitude in chroot code

commit ad46454722d93c0f12096c8cd71fc5f92a660ed0
Author: Cyril Brulebois <kibi@debian.org>
Date:   Wed Jul 14 19:36:13 2010 +0200

    Fix FTBFS at dh_install step.
    
    Renaming create-chroot in 18512e3303f56a55841719e393c3e5a4653c9b70
    wasn't sufficient, its name in sbuild.install had to be updated as well.
    Fix that.

commit 750a0270c81531754c1bf99c3086571a9d459e67
Author: Cyril Brulebois <kibi@debian.org>
Date:   Sun Jul 11 23:28:02 2010 +0200

    man: Document --build-dep-resolver for sbuild.

commit 3a90456aa0cf2d1e3406bf06a55476608f06fa1e
Merge: 5e7c3c4 2ee8048
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jul 12 22:52:32 2010 +0100

    Merge branch 'buildd'
    
    Conflicts:
    	lib/Buildd/Daemon.pm

commit 5e7c3c45915f1d1865337632557ab93a9b42ae71
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jul 12 22:46:46 2010 +0100

    build: Install create-chroot

commit 136a34343120beb29a9dbeac191d5a1c0f0b9ab6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 11 22:29:22 2010 +0100

    debian: Require schroot 1.4.x

commit fcfea2516fd3abf3f100e1bc82db37928b780788
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 11 22:26:41 2010 +0100

    sbuild-createchroot: Document need for abs_path workaround

commit d61a655101c3008d17bd56274b5d1da3c8fcb28e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 11 21:44:39 2010 +0100

    sbuild-createchroot: Fix abs_path and remove deprecated keys
    
    Remove deprecated schroot configuration keys, and change
    location to directory.
    Create the bootstrap directory prior to calling abs_path, or
    else it returns an undefined value.

commit 2ee8048bdf4df07d4ff0047a7fb24ff0e1d5b5b6
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Jun 20 18:37:48 2010 +0200

    buildd-mail: accept a signed changes if the package is in build-attempted

commit 85c94c699370f378d728d8e212918620c2c16dde
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sat Jun 19 20:37:50 2010 +0200

    wanna-build interface: use api=1 for take, and accept extra-depends/conflicts

commit 4e5d142f89a6239ab8b6c1313a3ba5414b5e972d
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Fri Jun 18 18:36:49 2010 +0200

    no functional change: restructure interfaces within lib/Buildd/Daemon.pm

commit d42b53055641fe29a17e5d6bf2ad905e16ea95f4
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Fri Jun 18 00:02:28 2010 +0200

    to ease upgrades to squeeze: drop the irrelevant options run-setup-scripts / run-exec-scripts

commit 18512e3303f56a55841719e393c3e5a4653c9b70
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 12 17:29:30 2010 +0100

    bin: Install create-chroot in same location as dobuildlog

commit d331072762d30c305716123da89dbe3207b1a73a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 12 17:16:16 2010 +0100

    NEWS: Update for 0.60.1

commit 7594a18ca7b7612af3f81a637cc378d484d642c7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 12 16:58:43 2010 +0100

    Sbuild::Build: Don't use '-sn' with 'dpkg-buildpackage -x'
    
    -sn is not supported by newer source formats.  Removing
    it also makes the code more robust for non-binary builds
    if the source isn't in the build directory at some future
    point.

commit 630086f9514d9561f8b8a5abf51e35a3bd0be3ee
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 12 16:58:21 2010 +0100

    debian: Close #559533

commit 7208b117f4e483121c763b56049264605f390d0d
Merge: 9858095 70519bd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 12 16:33:13 2010 +0100

    Merge branch 'buildd'

commit 70519bdfe52251cb4aa5f80936b11ed371442dba
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Mon May 24 10:49:33 2010 +0200

    drop run-setup-scripts and run-exec-scripts from create-chroot.sh for
    lvm-type chroots: they only confirmed the default in lenny, and produce
    warnings in squeeze. Related to #579926

commit 5a10d3be7d8f29fa3259fbefa574becad1dce808
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Thu May 20 22:58:15 2010 +0200

    add copyfiles-defaults to sbuild
    set schroots COPYFILES NSSDATABASES to sbuild-specific values via 99buildd*
    put the network part in copyfiles, and the system part in nssdatabases

commit a73fd03cee260a02ae12a1a067f96ba8178030e6
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Thu May 13 00:23:10 2010 +0200

    add $defaults to .builddrc which contains default values
    if they're not overriden within $distributions

commit 9858095784235f8e4edddd4e4304f426638d9979
Merge: ba4113f 56a7d63
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon May 3 13:59:28 2010 +0100

    Merge remote branch 'origin/buildd'

commit ba4113ff5f1a38f4d694fcb1b5e79da0d4bd9718
Merge: ba54dd6 46367f9
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon May 3 13:57:01 2010 +0100

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit ba54dd628d1f5a3c72286242e5e6c6731fe3367a
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon May 3 13:55:48 2010 +0100

    Sbuild::Build: Remove DSC filename assumptions breaking new source formats

commit 56a7d6379ab880f118c8f4e38c1ea81bda0148d1
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun May 2 15:15:39 2010 +0200

    name the experimental chroots correct

commit 35e899379c71928e139f38ee8ff2e049fd317cc9
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun May 2 13:00:19 2010 +0200

    funny things break with /bin/sh=dash

commit ed1f8e3fafa1fc4a20052cf219aa0ae23c1d6cb4
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Apr 25 13:18:54 2010 +0200

    add explicit apt-key for backports.org
    as security already has unauthenticated explicitly set, this allows to
    remove Aptitude::CmdLine::Ignore-Trust-Violations
    (means one needs to add the bpo key by hand once for an non-snapshot-chroot)

commit 2e59bb2eba4c11b11f6d000a6b1354a3a0eb6d73
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Thu Apr 22 22:51:26 2010 +0200

    partly revert 99builddsourceslist:
    + remove apt-get update, as this is not needed with the right options

commit c3c1c30592e38815ac4335415a6774b26ef5faec
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Thu Apr 22 22:14:56 2010 +0200

    fix 99builddsourceslist:
    + proposed-updates: no incoming with debian_incoming=no
    + apt-get update after adding new sources
    + don't fail with lenny on exit if there is no apt.cfg

commit 2e6dadf1f9061e67dff45e01edbcc212038ed36a
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Thu Apr 22 09:32:25 2010 +0200

    fix typo for backports

commit 77ee089cf60bf42d00207d73ab97e38735a64d51
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Tue Apr 20 16:56:43 2010 +0200

    AptitudeBuildDepSatisfier: Make compatible with new aptitude

commit 6c6a12a53b31832fc9e369abc0df5ef2faefb841
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Tue Apr 20 00:24:20 2010 +0200

    write /etc/schroot/conf.buildd as root

commit efb72d2f7ac7bc33470167ffdc74532306f1d58f
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Apr 18 20:49:09 2010 +0200

    auto-add personality=linux32 for mips, sparc, i386

commit 06b1a24cecc98c359be273cf9698cb3f388ca9b2
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Apr 18 20:32:33 2010 +0200

    allow to specify another arch

commit 1d254f5d9b5b9caf7bd807e216b55dafa42d2572
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Apr 18 20:30:13 2010 +0200

    allow to not specify the mirror

commit 1f6ee50a9d141053f4c7a4801bd2fc0e7051c485
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Apr 18 20:19:20 2010 +0200

    add local mirror to /etc/schroot/conf.buildd if file doesn't exist

commit dae7a5359ff85af4c5313cbe70f26264e00de49f
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Mon Apr 5 19:50:20 2010 +0200

    cleanup: use SUITE at a few more places in 99builddsourceslist

commit 653a0a30299e958f8edddbaf4878ef8a64c14a6d
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Mon Apr 5 19:21:48 2010 +0200

    don't add incoming / p-u to >= lenny chroots on lvm devices

commit 5eff43ed067b7418528fe0fea61697c0e3ff07f1
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Mon Apr 5 18:58:27 2010 +0200

    automatic sources.list and apt.conf setup as discussed in
    http://lists.debian.org/20100405111635.GR19557@mails.so.argh.org

commit ab5117c4cf75b8dccc43ff62ed8ff2ca22e1a6e7
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Mon Apr 5 14:00:19 2010 +0200

    Don't copy files from netbase to the chroot. Closes: #576508

commit 8955f1532f246fb78180d0f22d7196ce21bd47a1
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Apr 4 10:25:50 2010 +0200

    cron: buildd watcher runs every 15 minutes

commit d514d3149b27d7de2c5498c90200213cbd3f3e44
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Apr 4 10:17:22 2010 +0200

    create-chroot.sh, if newer than lenny:
    + set force-confnew for dpkg
    + always disable pdiffs, installation of recommends

commit 8bae7dacbb9eba791dd13ea9b7cc4cdc0f5ad8fe
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sat Mar 20 19:47:21 2010 +0100

    allow to create stable chroots if unstable on already exist

commit 46367f915467e6939211c81d68e7abd4fe5a16f2
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Mar 10 14:31:52 2010 +0000

    sbuild: implement build log mail compression

commit 476f992d0029b33a8bd18735b9413aa880713d89
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Mar 10 14:25:13 2010 +0000

    debian/changelog: add missing entries

commit 894af0424be1b0597c3335ded746434c09ecd62f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 8 12:42:10 2010 +0000

    Revert "Revert "99buildsourceslist: allow removal of the chroot if the extra file isn't found""
    
    This reverts commit 1d969e2050ecfdca72d8edc97bbf7aa2ba13a1ce.

commit c63a488c1bd36aaac50e4c9a30c956a9afe29516
Merge: 4124e45 170622d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 7 23:10:09 2010 +0000

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit 4124e45186307836b2bd67a9a6a51f268f7f6fc3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 7 23:09:32 2010 +0000

    Sbuild::ChrootSetup: Move man-db debconf settings from Build to basesetup

commit 1d969e2050ecfdca72d8edc97bbf7aa2ba13a1ce
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 7 19:05:28 2010 +0000

    Revert "99buildsourceslist: allow removal of the chroot if the extra file isn't found"
    
    This reverts commit c8bd70d844dd8659542abad5bf59f31b58447975.

commit f2eca1e70de128734f6a473ac551c46105a6bb73
Merge: c20024a f0b742b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 7 19:05:19 2010 +0000

    Merge branch 'buildd'

commit f0b742b634683a3aff4e6f1c603719783e1e719e
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Mar 7 19:02:54 2010 +0100

    create-chroot.sh:
    + check if schroot chroot already exist
    + in case of lvm-snapshot chroot, add variants security, volatile, backports
      respective experimental unless such a variant chroot already exists

commit c8bd70d844dd8659542abad5bf59f31b58447975
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Mar 7 18:59:49 2010 +0100

    99buildsourceslist: allow removal of the chroot if the extra file isn't found

commit d8a0e29aec56565f1b045247e686e854324e009c
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Mar 7 11:35:17 2010 +0100

    use "git log" as upstream changelog

commit f835668346d9040ac4c7e14446e98c223f188a30
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Mar 7 11:30:23 2010 +0100

    install create-chroot.sh in package sbuild

commit e7d87c8b9af552b534a5dfbc24dae4aa9136086b
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sat Mar 6 22:50:40 2010 +0100

    create-chroot: create build-trees, avoid cd-ing to ~buildd/chroots for snapshot-chroots

commit 2f0ec61551206d969e15dd33f7119de6cbbe0e41
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sat Mar 6 20:41:31 2010 +0100

    99builddsourceslist: add dynamic lists as well for backports and experimental

commit a27178d046a98bd703b852c5bd88532393b26d89
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sat Mar 6 20:27:05 2010 +0100

    99builddsourceslist: fix typo (wrong variable) in volatile-parts

commit 88a3e9be291c35ddf2b7d4c1ba2c56593efb7e26
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sat Mar 6 20:19:06 2010 +0100

    script-defaults.buildd: verify that we use snapshots before enabling variants
    99builddsourceslist:
     + source /etc/schroot/conf.buildd if it exists
     + auto-create apt sources for security and volatile in variant mode
       unless there are specific sources. Allow additional mirrors

commit 3b52bd19ad774761c1581518cc650e3da169ca36
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sat Mar 6 18:54:05 2010 +0100

    script-defaults.buildd: prepare for auto-cloning chroots (still needs an seperate sources.list)

commit 170622d76dc24a0c5036b7f28b0bf2db36bb98d3
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Mar 5 13:44:16 2010 +0000

    [Buildd::Daemon] fix @todo length check
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit ec22f30fad76a3be4be4b36dadcdf9bc0839330d
Merge: ecf644a c20024a
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Mar 5 13:09:31 2010 +0000

    Merge branch 'master' of ssh://git.debian.org/git/buildd-tools/sbuild

commit c20024a54d3f25a68761d87984cc73729a2917b7
Merge: c888e79 2a73fcf
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 3 23:36:13 2010 +0000

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit c888e79c37784c1f680e72d2301cfd56cf858f57
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 3 23:35:42 2010 +0000

    debian: Bump version to 0.60.1-1 and close #571726

commit ef227924a1fbe406b294cb8594e51c8f31a67d4a
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 3 23:35:28 2010 +0000

    NEWS: Bump version to 0.60.1

commit 53fa1270b80eab42fbd1b84a47549eac92f3267d
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 3 23:30:51 2010 +0000

    Sbuild::Options: Add --no-source option

commit bbbdab179fb37c694ba278999a2f740a87aae30c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 12 13:46:24 2009 +0000

    Sbuild::Chroot: Simplify logic for executing on host
    
    Previously, Chroot classes had a CHROOT=>0|1 parameter
    to control whether the command was executed inside the
    chroot or on the host system.  This has been removed
    in favour of using Sbuild::ChrootRoot for executing on
    the host.  Note that user switching on the host is not
    permitted.  This means that root access is only allowed
    in the build chroot.

commit 557bda3b0d270957ce52ed300792ef54c82ff674
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Dec 12 10:45:17 2009 +0000

    Sbuild::Build: dpkg-source and lintian options may be undefined
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit f529df8ebeca7eb615c0e907c33734ab4774bd18
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 12 10:44:05 2009 +0000

    Sbuild::Build: Move object member initialisation earlier in construction

commit 536154a93e68178f857f39d63812901b440cce6d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 12 10:42:11 2009 +0000

    Sbuild::ChrootRoot: Don't inherit from ChrootPlain
    
    Don't support CHROOT parameter, so this is only usable fpr running
    commands as the current user on the host.

commit 029d5c269f53a40b83c35972bce4ba64e54c358b
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 11 23:28:57 2009 +0000

    Sbuild::Build: Use ChrootRoot for running commands on host

commit 1c3cff654828fe0613c54d443f5128ec96a33637
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 11 23:26:01 2009 +0000

    Sbuild::Build: Simplify debugging output

commit e0c299f70608966f50c3164b0b95189efb9dc0bf
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 11 23:25:03 2009 +0000

    Sbuild::Chroot: Default I/O streams to standard I/O

commit dbee280656c95278c621d3e494061eb93d5eddf0
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 9 22:14:41 2009 +0000

    Sbuild::Conf: Use arrayref for dpkg-buildpackage and lintian options
    
    Rather than storing options in a space-separated string, use
    an array for safety.

commit 1ac7f2ceea784ff03d36fb4cad8f160d8d1000e0
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Oct 27 01:17:37 2009 -0400

    Clean the source dir before building a the source packages
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit f4333fe32a5af5bf9bb4720502a361d4869a7a73
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Fri Oct 23 18:50:21 2009 -0400

    Update build system and Debian packaging
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 881fd52dda663161ae562ee13db92a194fb59c65
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Fri Oct 23 18:49:47 2009 -0400

    Update sbuild man page for new features
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 74a17bcc7a75da45a48cc87db974bb95f0f02921
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Fri Oct 23 18:48:18 2009 -0400

    Have sbuild process current directory if no arguments are supplied
    
    Also fix some issue where $_ is changed somewhere in the library code.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 9aa7b3f07ae3a8636c488b80f4f04dedbf5b83c5
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Fri Oct 23 18:46:41 2009 -0400

    Implement support for supplying directories as arguments, running lintian, and running pre and post build commands
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 8adb7124922397c5be77f5465c0c414c6d58946c
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Fri Oct 23 18:16:37 2009 -0400

    Supply more options to be used with sbuild
    
    Options are:
    
    • Supporting options to pass to dpkg-source
    • Being able to run lintian
    • Supporting options to pass to lintian
    • Being able to run external commands before a build
    • Being able to run commands after a build
    • Whether to log stdout or stderr from external commands
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit e5a5799623b5c30ff872e6663723135f0e376489
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Fri Oct 23 18:04:28 2009 -0400

    Improve the parse_file() utility subroutine by being able to handle filehandles
    
    This also provides better handling of placing the contents of fields in
    the hashes. Trailing newlines are removed as well as leading
    whitespace. Also, the first whitespace from multiline fields is removed.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit ecf644adceb5321108f1da6edef6db77679e54e8
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Feb 28 13:56:15 2010 +0000

    [Buildd::Daemon] only try to build one package at a time

commit 2a73fcf72511a26cca3d231384bef0487bbf7318
Merge: 3a7ad7e 7fb8924
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Feb 28 12:18:39 2010 +0000

    Merge branch 'buildd'

commit 3a7ad7ebe2656b1651d4e9eaa5136b1bfa2b6fdb
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Feb 27 14:42:57 2010 +0000

    [Sbuild::DB::ClientConf] search programs in PATH

commit 7fb8924e9d93442245cd2185c66032e2dc0e2bcb
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Feb 27 12:36:59 2010 +0000

    [Buildd::Conf] ssh: make the space after -l optional
    
    The configuration compatibility code tries to parse the SSH invocation
    line to retrieve host, username etc.  This change allows both "-luser"
    and "-l user".

commit 1cc61ee264ef31865b8dba39638369b4340af90a
Author: Dan White <dwhite@olp.net>
Date:   Fri Feb 26 21:50:04 2010 +0000

    WannaBuild::Database: Add missing import of version_eq

commit 00e9807bb24af2e5ad778a060af050b19b6d131c
Merge: b8b4f24 597dcb3
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Feb 25 11:54:55 2010 +0000

    Merge branch 'buildd' of ssh://git.debian.org/git/buildd-tools/sbuild into buildd

commit 597dcb36cff438fe98358e708cfa12dfd4498585
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 23 22:25:11 2010 +0000

    debian: Bump standards version to 3.8.4

commit 278349665b965b75c3e49cb3119f4a2afef75e2b
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 23 22:22:14 2010 +0000

    NEWS: Document changes and bump version to 0.60.0
    
    Also bump Debian version

commit 8a12512e0027c63d7c01eefb7850fe511c99b3c1
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 23 22:21:42 2010 +0000

    Add he and pkern

commit fb1a3e62f4b9db504f841eb4a767f2ec75e31f88
Merge: 2721377 6b4cfb7
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 23 21:39:25 2010 +0000

    Merge branch 'buildd'

commit b8b4f2461796b1cd82050e4bce5be7d6eb18ddbc
Author: Modestas Vainius <modax@debian.org>
Date:   Tue Feb 23 09:00:39 2010 +0000

    [Sbuild::BuildDepSatisfierBase] sort apt policy versions by priority first
    
    In my opinion, it makes sense to sort package versions by priority first
    (versions with greater priority will be prefered over versions with lower
    priority if they both satify the dependency). If priority is the same, then
    higher versions will be prefered over lower ones (i.e. like previous behaviour
    for all versions).
    
    This change allows buildd administrators to configure preferences for multiple
    repositories via standard apt_preferences(5) file in the chroot. What is more,
    this is similar to how aptitude 0.6 orders solutions in the same tier.
    
    Closes: #570465
    Signed-off-by: Modestas Vainius <modax@debian.org>

commit 95d14803e00e74aef5f6bab7e4e9cae7177423c9
Author: Modestas Vainius <modax@debian.org>
Date:   Tue Feb 23 08:57:47 2010 +0000

    [Sbuild::AptitudeBuildDepSatisfier] produce better solutions
    
    Configure aptitude (0.6) to:
    
    * Refuse solutions which involve removal of the dummy build depends package.
      This is done by adding a respective resolver hint.
    * Move "cancel all user's actions" (Keep-All-Tier) tier after Non-Default-Tier.
      Generally, we want aptitude to try solutions with non-default versions before
      refusing to do anything.
    * Refuse solutions which involve removal of essential packages. The source
      packages that need this are not worth building anyway.
    
    Closes: #570463
    Signed-off-by: Modestas Vainius <modax@debian.org>

commit 6b4cfb784a314e425e3139cbdd3d6f5f9227c3c1
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Feb 22 20:18:06 2010 +0000

    [Buildd::Daemon] remove changelog fetching
    
    Changelog fetching is currently broken.  I left the function in place
    for someone to fix somewhen later.  A note states the main problems with
    it.

commit 5a301b44540caaaedcff16f7164031c8f472591f
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Feb 22 15:06:13 2010 +0000

    [Buildd::Daemon] output the correct sbuild status value in the log

commit 3462742c9b6c0bdf9d2231a4c41343be2b6617c0
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Feb 22 14:59:05 2010 +0000

    [Buildd::Daemon] remove a now unused $status variable

commit 2d26ac0b52391ddcd979cd84b099f2290e8df118
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Feb 22 12:53:08 2010 +0000

    [Buildd::Daemon] only stop further building on local sbuild problems
    
    buildd used to think that three build failures (also legimiate ones)
    signal a problem with sbuild that warrants to stop the building.
    The patch makes sure that only local problems as signaled by sbuild
    cause such stops and that the counter is properly reset even after
    an attempted build.

commit 66b0bbbe234dbe3423a1200803a1f7da597770d0
Author: Andreas Barth <aba@not.so.argh.org>
Date:   Sun Feb 21 14:32:45 2010 +0100

    add config stanza to motivate packages to build in parallel

commit b1c2b28f1046b3ae8156d23f4ae723d3e7a72103
Merge: 99ec0f9 c225e08
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Feb 21 12:51:41 2010 +0000

    Merge branch 'buildd' of ssh://git.debian.org/git/buildd-tools/sbuild into buildd

commit 99ec0f92c253fecb6df4f9b7af2c800466ab3960
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Feb 21 12:51:29 2010 +0000

    [Buildd::Daemon] use $pkg_ver in the failure path

commit c225e08c39cebf5ccf162b9a3542c131d9dab0f7
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Feb 1 21:49:16 2010 +0100

    buildd: Redo default value handling for Buildd::Conf::UPLOAD_QUEUES

commit 2721377f2fdfe3d810a33457629d6355b0b07a0b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 20 23:24:49 2010 +0000

    build: Use LC_TIME=C for date formatting

commit 4b4766b55362edba764cab38e8a2401c2b085edf
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Feb 20 21:24:43 2010 +0000

    sbuild: remove EXIT-DAEMON-PLEASE handling
    
    EXIT-DAEMON-PLEASE is an implementation detail of buildd-watcher.
    buildd does not call sbuild with multiple packages anymore.  It might
    be sane for batch mode to get a similar flag file back eventually,
    but currently it even breaks wanna-build signaling because sbuild does
    not deliver the proper exit code back to the caller.

commit 6d74011c2248d4693ce4319b324def3fd7202b00
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Feb 20 17:07:57 2010 +0000

    sbuild: emulate raise(3) by sending a signal to itself

commit e0b606ac7baca0d34b365726291dda6cf8b6e04e
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Feb 20 13:34:23 2010 +0000

    [Buildd::Daemon] fix a syntax error in the last commit

commit 1f9ff1665b1fb51436d85ac2fd3f3683486aa0c8
Author: Roger Leigh <rleigh@codelibre.net>
Date:   Sat Feb 20 11:41:33 2010 +0000

    [Buildd::Daemon] handle sbuild termination by signals

commit 4fdf6c1b4b39cbdd7cb6670ce5fdc1250663f0ab
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Feb 1 16:47:16 2010 +0100

    sbuild: If the arch-check fails, we don't want no give-back

commit cc272a75a4ddea7cc28c55a6a265d7731339f4e7
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Feb 1 16:46:02 2010 +0100

    Buildd::Daemon: Avoid uninitialised values

commit 7e7631de7808cc360e4c0c9ecdea0e7bc31a03c4
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Feb 1 16:45:37 2010 +0100

    buildd: Remove more, now unneeded code

commit 9a3ca52645741434bc6439612ca77e2dd3b0c626
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Jan 31 21:25:07 2010 +0100

    buildd/sbuild: Remove all w-b interaction from Sbuild, move it to Buildd

commit c9ed70822a6f056977d44bac2267544b51e5f6b2
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Jan 31 21:22:30 2010 +0100

    create-chroot.sh: Updated, fixed various smallish issues

commit 5e116bfce1bc5d06782e12f68bcf038ced746318
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Jan 31 21:22:02 2010 +0100

    buildd: Get rid of $max_build, only allow one package at a time

commit 967190b1712910f1ce6972d87c3cbdea02e03756
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Jan 31 21:05:53 2010 +0100

    buildd: Install base script for c-o-w chroot variant creation

commit 3c713aa9bd8339a6e766b2dce241e98525463f5b
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Jan 31 15:14:51 2010 +0100

    Buildd::Watcher: Fix NO_WARN_PATTERN to not warn about build/current-*

commit 361d275e9bf200f3bdacd78b7ecf267847d20a18
Merge: 6a4faa3 c06cfc9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 24 21:27:44 2010 +0000

    Merge branch 'buildd' of ssh+git://git.debian.org/git/buildd-tools/sbuild into buildd

commit 6a4faa35581a7bae45c3053db992aba2a5a70874
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 24 21:25:55 2010 +0000

    Sbuild::Build: Re-introduce get_status()
    
    sbuild wanna-build trigger handler can never call set_status, since
    this leads to unwanted recursion.

commit c06cfc9a9ff432a89249950c51a7c779e285fb32
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Jan 24 21:07:42 2010 +0000

    etc/buildd.conf: comment out a stray curly brace

commit 09b84bc571dfccd0c02f02cc8236172bf19fd89a
Merge: e176982 d0b9c39
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 24 21:07:37 2010 +0000

    Merge branch 'buildd' of ssh+git://git.debian.org/git/buildd-tools/sbuild into buildd

commit d0b9c39eebd26bfae16bedb706bab7c251833bdd
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Jan 24 20:46:35 2010 +0000

    Revert "sbuild: Don't give back when build-deps fail to install"
    
    This reverts commit fc3efdb207ed9f4f11307e336133c755bddb982b.
    
    We would like to get this solved differently, and it was also intended
    as a band-aid so solve a wanna-build give-back loop.

commit e691a519cc7cb69aa26fade5d785bed8dbc58c05
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Jan 24 20:43:53 2010 +0000

    Revert "Sbuild::Build: Add get_status method"
    
    This reverts commit 7b1486b52dbc5cb0da637b4ec93dca5800850dd6.
    
    This triggers a loop because it updates the status and then notifies itself
    of the status change again, which causes another status update.

commit e1769825ee545179b664475095bf7980c104d794
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 24 14:11:41 2010 +0000

    Buildd::Base: Set PID in constructor

commit 6cf1478c7d4ccd38e4889cdd6d7d2e9f7b8b8c5a
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Jan 24 15:09:30 2010 +0100

    buildd: Allow to explicitly set the sbuild chroot

commit fc3efdb207ed9f4f11307e336133c755bddb982b
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Jan 24 15:02:10 2010 +0100

    sbuild: Don't give back when build-deps fail to install

commit d6395ab8e14f5132b2b1ac908f2d8e58853e8ab9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 24 14:09:30 2010 +0000

    Buildd::Base::log: Use PID rather than Build::progpid
    
    progpid is set on invocation and not updated across fork().
    Remove progpid and use PID set in Buildd::Base

commit 7af0a64ecbb825ac491c68f00aa1cfe36a7eb1eb
Merge: 3bd20db ffa6d48
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 24 13:37:02 2010 +0000

    Merge branch 'buildd'

commit 3bd20db58068b08ee12221ac0e7b482e940a1431
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 24 13:36:23 2010 +0000

    man: Document buildd-update-chroots

commit ffa6d48b92331f4be65b6a49d914e6cc345e631c
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Jan 24 14:36:18 2010 +0100

    [Buildd::Mail] Correctly handle multi-arch builds.

commit 29d21d02c9cb1149948f7b123a8a10c1e6c5a3aa
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 24 13:34:23 2010 +0000

    buildd: Create build-trees directory

commit 901f9a3113cbd108277ccb9dace415e48f3ebe5e
Merge: d6e6282 45773d0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 24 13:15:13 2010 +0000

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit 448cd5438014212d9ab9e78d48d3b721e96656d6
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Jan 24 13:59:41 2010 +0100

    mount-defaults.buildd: Don't bind-mount /home (Closes: #566315)

commit 6b64ed66eae6b8cf22f5a84fb4f038d6f3cc792b
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Jan 24 13:51:07 2010 +0100

    [Buildd::Mail] Use arch from signed .changes as filename for .changes

commit 3f47ffa08d9d19f38087f9a5c46551477bf44775
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Jan 23 19:34:17 2010 +0000

    debian/control [buildd]: make the dependency on sbuild strict for now

commit 29fa3a064cf05500ced2e9e9467c14ccc7f46866
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Jan 21 17:53:52 2010 +0000

    debian/control [buildd]: replace sbuild to take over 25nssdatabases

commit 45773d0644218d3249feebe60409a183e3ef4a93
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 23 12:17:44 2010 +0000

    debian: Close #566320

commit 0f9875ab7fd7408acf82951cf95ee7500bb7b4dc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 23 12:16:05 2010 +0000

    man: Remove incorrect -t option from sbuild-stats --top

commit d6e6282b24ad97f826b783d21746676e45fd517b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 23 00:18:46 2010 +0000

    man: Add buildd-create-chroot docs to sbuild-createchroot.8
    
    debian: Install in buildd package.

commit 3a604e662d409810ecce34dd3def7ca216219e7e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 23 00:03:27 2010 +0000

    Buildd::Base: Set autoflush using true value

commit dc85bbccfb788a9d9db6d94efebe655e977f51fc
Merge: 7b1486b d5f15dc
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jan 22 23:52:06 2010 +0000

    Merge branch 'master' of ssh://git.debian.org/git/buildd-tools/sbuild

commit 7b1486b52dbc5cb0da637b4ec93dca5800850dd6
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jan 22 23:51:36 2010 +0000

    Sbuild::Build: Add get_status method

commit d5f15dc234725b3154ecd71e93fabe6e77bcd0b3
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 18 23:38:35 2010 +0000

    man: Correct typos reported by lintian

commit ffba69849100e7cf5d9d5e5d788162f04e083933
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 17 23:28:52 2010 +0000

    debian: Bump version to 0.59.1-1
    
    Also upgrade Standards-Version to 3.8.3 and use ${misc:Depends}.

commit 0b05d47f07497eab8e2c243dcfe3cdecb74e5da1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 17 23:28:31 2010 +0000

    build: Distribute 25nssdatabases

commit 70f35717f6248f22852c344ddf0da03a2a406256
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 17 23:28:07 2010 +0000

    NEWS: Set version to 0.59.1

commit edd14d747d465c8895f700a8efff3760133e9e03
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Jan 17 22:35:50 2010 +0100

    AptitudeBuildDepSatisfier: Fix locking problem when installation fails

commit dfbd4bdc85072b378fae2f2d19ddb857a552162a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 17 15:02:29 2010 +0000

    Sbuild::Build: Remove $dsc_dir

commit 5d3bb02f1ddb801f559f36cb7493fc6ce55eaca4
Merge: f2dd426 bee90ad
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 17 15:00:19 2010 +0000

    Merge branch 'master' into buildd
    
    Conflicts:
    
    	lib/Buildd/Base.pm
    	lib/Sbuild/Build.pm

commit bee90ade863349cf82cddce0edc03a2561449c89
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 17 14:54:10 2010 +0000

    Buildd::Base: Use $devnull rather than /dev/null
    
    This saves file descriptors since it's used in several places.

commit 815fa77466670bf7270cbc246d31cae551175612
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 17 14:53:24 2010 +0000

    Sbuild::Build::run: Remove build directory only
    
    The DSC Dir is always a subdirectory, so explicit removal
    is unnecessary and may lead to errors if removed already.

commit 2dd291159e4f19d7c35dbb1ceef428b601e2ef57
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Fri Jan 15 14:49:06 2010 +0100

    Buildd::Base: Fix temporary logging to /dev/null
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 134349922a7163fc19721ad79fefc2bd00b8948f
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Fri Jan 15 14:48:43 2010 +0100

    buildd: Allow to configure the built architecture
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 12737dbbd92f972cb01975aeb02201241867f286
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Jan 13 20:30:30 2010 +0100

    Sbuild/Build: Fix removal of build dirs
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 20435eec0d43da6ffeb1934f378e7ad0e9fd761c
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Jan 13 20:22:07 2010 +0100

    Buildd::Daemon: Adapt ssh socket handling to multiarchive
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit f2dd426d37b2ef7b111a333c1ca75954a13df78f
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Fri Jan 15 14:49:06 2010 +0100

    Buildd::Base: Fix temporary logging to /dev/null

commit 246140f5cbc47caf9e36b7ea5c8a238a9ccde856
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Fri Jan 15 14:48:43 2010 +0100

    buildd: Allow to configure the built architecture

commit f18d6f0fd6c00c7197601c49362f3fc98ce2c7fe
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Jan 13 20:30:30 2010 +0100

    Sbuild/Build: Fix removal of build dirs

commit 5fb75c890af747a0c10398f5d2bc2d8e7819f858
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Jan 13 20:22:07 2010 +0100

    Buildd::Daemon: Adapt ssh socket handling to multiarchive

commit e137e364c68d3d91a46df294d72d319f3c899504
Merge: 5fbd9fd c3e2ead
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 12 09:33:19 2010 +0000

    Merge branch 'buildd-log-detach'

commit 5fbd9fda4d77b46bd670e80c19aa20255ee9d1b7
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 12 09:32:52 2010 +0000

    Buildd::Base: Revert stdout/stderr change

commit c3e2ead48f9c206c4b3e3980ac32a3cef160fec2
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 11 22:46:32 2010 +0000

    Buildd::Base: Reopen stdout and stderr to detach from TTY

commit 3789690cdd47b1cb8ede5308af54ca45bb6efb1e
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Jan 11 23:42:28 2010 +0100

    Buildd::Base: Preprend every log line with prefix

commit 42637ae095b1689b69a77efba41c34873542a94a
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Jan 11 23:42:14 2010 +0100

    Buildd::Base: Redirect STDOUT/STDERR in open_log

commit 2742c9acd654e9c90825268de65993f889193277
Merge: 5aed575 96e6b4f
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Jan 11 21:45:09 2010 +0000

    Merge branch 'master' into buildd

commit 96e6b4f62b107ddb7936b747fcb5907dc50d5d8d
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Jan 11 21:44:17 2010 +0000

    debian/buildd.install: install schroot files into the right directory

commit 5aed575e0922f5cf8a6e9cc08d7fbd8603d08972
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Jan 11 09:05:11 2010 +0100

    [Buildd::Base] Autoflush makes tailing the build.log more useful

commit b905097e7b0a2b899500720231506a9e8db524f5
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Jan 11 08:57:18 2010 +0100

    [Buildd::Base] Beautify log messages: prepend timestamp to message

commit bc0f28ee362166add84603479c3ebd6721fb658b
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Jan 11 08:56:51 2010 +0100

    buildd-uploader: Fixed to use non-forked, simple logging

commit e703aa1de287fc8c2f61d95d14bd528d5ed45320
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Jan 11 08:41:21 2010 +0100

    [Buildd::Mail] Fix: Handle Built/Build-Attempted as Building when checking pkg status

commit 0b9d688982ee37bc19b04ed0776d648df05e6621
Merge: 5498502 9cfd288
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Jan 11 08:37:33 2010 +0100

    Merge remote branch 'rleigh/buildd-plain-log' into buildd

commit 5498502bb6c05a6d82d7f728bf40bf42dc5ff8e6
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Jan 11 08:35:22 2010 +0100

    [Sbuild::InternalBuildDepSatisfier] Fix: Don't try to acquire the same lock twice

commit 0da12ee375a8ac6636c26e57fab869a15aafbc9a
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Jan 11 08:29:37 2010 +0100

    [Sbuild::Build] Fix: Write essential deps into ->{'ESSENTIAL'}

commit 61cc46581213396ffb2aeb7c709f83ba97f76311
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 10 23:50:09 2010 +0000

    Sbuild::BuildDepSatisfierBase: Fix up toolchain dump code

commit 991a6eadb92a48828bcebd69d15f912bb22494b4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 10 23:20:56 2010 +0000

    Sbuild::BuildDepSatisfierBase: Move toolchain dump code here
    
    Move toolchain and package printing code from
    Sbuild::InternalBuildDepSatisfier so it's displayed for all
    dependency resolvers.

commit 3f78a9c71075f94251eeb0a56e6bf3745d2dd0c7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 10 22:32:16 2010 +0000

    Sbuild::Base: Handle undef values when printing set debug messages

commit 9d3e17ba4cf0fae228adc25632b52a71d31f30fe
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 10 21:57:42 2010 +0000

    Sbuild::Build: Move build dir purge from build() to run()
    
    This means packages are correctly cleaned up in the case that
    there was an error between downloading packages and beginning
    the build, such as a failure to install build dependencies.

commit 9cfd2883d052fe46a4b66a3bd1859f191b22ed67
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 10 16:23:58 2010 +0000

    buildd: Log using O_APPEND only

commit 01e0af64483f88f46c440d2671ad49a2c044f141
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 10 17:58:28 2010 +0000

    debian: Close #561936

commit e59829a6f7b37552c52b0fbb63142fc081d83e9c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 10 17:57:20 2010 +0000

    sbuild: Don't give back packages failing the arch check

commit 3802634c883b05347c581ca130103168955ee1c8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 10 17:48:43 2010 +0000

    debian: Close #564528

commit f320b863436c39254ec349991b185e8752260c7e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 10 17:43:59 2010 +0000

    sbuild: Add $build_source configuration option to complement -s

commit 088519ce23887e0d416a9d85c3259bf074fc3ff5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 10 13:00:59 2010 +0000

    Sbuild::Build: remove conflict markers

commit 320798a328cdb01f1cc114115f9b2f3c0b9f337c
Merge: e0b49a6 d8d771e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 10 12:58:33 2010 +0000

    Merge branch 'buildd'
    
    Conflicts:
    	bin/sbuild
    	lib/Sbuild/Build.pm
    	lib/Sbuild/Conf.pm

commit e0b49a67b181fec7c6a589c240ff89e953f7564d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 10 12:45:28 2010 +0000

    Sbuild::Build: Fix typo

commit 77ec25895f0540d709b1ef05aceb94c978182bde
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Jan 6 01:21:37 2010 +0100

    *: Fix stupid syntax errors not noticed before

commit 18fda74ed420e6d65f009b203b17d9018ce2dd59
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Jan 6 01:15:22 2010 +0100

    Sbuild::Aptitude*Satisfier: Handle Breaks/Conflicts more correctly

commit e5e6a827b5d6c1aac255eb3d0be3a2bf8077fa4f
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sat Dec 26 23:34:26 2009 +0100

    Sbuild::Aptitude*Satisfier: Handle non-default versions better

commit 874725434880f201382e2bc09cf818d31e118fa5
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Tue Dec 15 12:23:49 2009 +0100

    Sbuild: Don't reinstall/remove installed pkgs in cloned chroots

commit 85ff81e08fc82656b4c7f9806dc0f968aff0548f
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Dec 6 12:16:33 2009 +0100

    Sbuild::Aptitude*Satisfier: Remove aptitude cruft from output

commit dc4b397e1c98105b7df137ef6b9d1a0aaa5786e5
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Dec 6 12:15:30 2009 +0100

    Sbuild::Internal*Satisfier: Fix POSIX.pm usage

commit 05da8f00616d4c0124d7eb1df6970ff5a00ed2dd
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Dec 6 12:15:09 2009 +0100

    Sbuild::*Satisfier: Fix logging to use $builder

commit 74102cfa85c63398a7266abf8ab0c1bb2289e5a4
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Nov 30 20:12:01 2009 +0100

    Sbuild::AptitudeResolver: Handle packages installed for aptitude

commit 6e37ebaee2a0434dd6027271ef6294deb9fb435c
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Nov 30 20:00:05 2009 +0100

    Sbuild::AptitudeResolver: Use last set of installed pkgs

commit d2ab2468326e62ee70bad8ef06555de913972b19
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Nov 29 23:32:58 2009 +0100

    sbuild: Add aptitude-based build-dep resolver

commit 4bbfa1f32ef38ec98d62ca89d9572521210788f7
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Nov 29 23:32:12 2009 +0100

    sbuild: Move b-dep resolver into its own module

commit ebeb0157874f6862b788bfbc5d451ef585341e6b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 9 22:23:55 2010 +0000

    Sbuild::ConfBase: Add missing method in call

commit 70a89618d6ce401d4658f431af816b8f732f6476
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 9 22:23:43 2010 +0000

    Sbuild::Conf: Add dpkg-dev to toolchain regex

commit d8d771e42a12c639adb2e2ffb2548ceb684959e1
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Fri Jan 8 14:20:42 2010 +0100

    Sbuild::Conf: SetMAILTO_FORCED_BY_CLI to an actually false value

commit 7f35f0eb333736dc9ebcc1a6ef458a48c4b2799d
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Tue Dec 15 11:57:54 2009 +0100

    Sbuild: Fix settign MAILTO based on distribution -> address mapping

commit 5e460606c4485b60c91dfa22098848e186e21540
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Jan 6 13:52:49 2010 +0000

    Buildd::Mail: put error message before mail quote
    
    Error replies were hard to read because the error message was at the bottom
    of the mail, so you had to skip over all the quoting first.  This patch
    reverses this order.

commit 6778a0232d369f41b0cb948025acc76d1e1aaf98
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Jan 6 13:52:49 2010 +0000

    Buildd::Mail: put error message before mail quote
    
    Error replies were hard to read because the error message was at the bottom
    of the mail, so you had to skip over all the quoting first.  This patch
    reverses this order.

commit e60ed3984dd8ef64d8df5110cc6c3729a3088645
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Jan 6 01:21:37 2010 +0100

    *: Fix stupid syntax errors not noticed before

commit c6720f5558de5633cc244fc389c39725660bc6e2
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Jan 6 01:15:22 2010 +0100

    Sbuild::Aptitude*Satisfier: Handle Breaks/Conflicts more correctly

commit 2d24d7a2369ad070695e5178441e44f67b780b63
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Dec 27 22:56:32 2009 +0100

    Buildd::Watcher: Redo buildd start, once again

commit 86d2c94c84a6a16731f24b255897f033dee70950
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sat Dec 26 23:34:45 2009 +0100

    Sbuild::ConfBase: Fix stupid runtime error

commit 68e74882d12229fbcd33c9470d78a8d23fe05533
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sat Dec 26 23:34:26 2009 +0100

    Sbuild::Aptitude*Satisfier: Handle non-default versions better

commit 81c08d7c57a0fe6953e230a8a13e547eaeb0b754
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Tue Dec 15 12:23:49 2009 +0100

    Sbuild: Don't reinstall/remove installed pkgs in cloned chroots

commit 90c53907c7301e811cea3134422d9b02f8673aee
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Tue Dec 15 11:57:54 2009 +0100

    Sbuild: Fix settign MAILTO based on distribution -> address mapping

commit 57d3c922d4b50a276f3707b2c4a7379394eaf0f8
Merge: 462ff96 529fc1e
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Tue Dec 15 11:34:03 2009 +0100

    Merge remote branch 'origin/master' into buildd
    
    Conflicts:
    	lib/Sbuild/Build.pm

commit 529fc1e95e517e0591d2bbabffdcf37cabb33835
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 13 23:26:25 2009 +0000

    debian: Close #521096

commit e24b16bfee99ee9f465fbb8f91e9c9141e476231
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 13 23:24:08 2009 +0000

    sbuild: Add apt-get clean, upgrade and dist-upgrade options
    
    In addition to existing update option.

commit e3592545c3096be3a1c88e973d9a31704b0842cc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 13 21:19:46 2009 +0000

    debian: Document man-db update disabling

commit f06ecf59355f9e3af19284fe5c5dff7100017b3b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 13 21:17:59 2009 +0000

    Sbuild::Build: Disable man-db updating in chroot.
    
    Set the debconf parameter man-db/auto-update to false.

commit cc946c4b17b138283f96ab01d22e723436f4c95f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 13 20:33:25 2009 +0000

    debian: Close #559659

commit 3b5e134c2f11444165268e0fdcf8062ec1e0b2d7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 13 20:30:33 2009 +0000

    Sbuild::Conf: Don't default distribution to unstable

commit b7b6938b0b12963279c19c9c2b737bd2ec700dc9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 13 19:13:43 2009 +0000

    debian: Close #559607

commit c8b2a7d4dcf8a3ee96c93e1253b4faed579fc487
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 13 19:13:28 2009 +0000

    debian: wanna-build depends on postgresql-8.4-debversion

commit 3b640189537aa3d79e52173cfb5f0a98f34b7056
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 13 12:37:54 2009 +0000

    debian: Close #553301

commit 877c58c49867dc2b1cf2770ae1e6fdce801c78d5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 13 12:36:11 2009 +0000

    Sbuild::Build: Print all installed packages and versions

commit 24d9852f9dc9f502861e2bcf12efa08a7010bdee
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 12 14:31:09 2009 +0000

    debian: Close #551917

commit 15ae719b6e383a81b602c606c1f057ca7c785b80
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 12 14:29:24 2009 +0000

    Sbuild::Conf: Add CHECK_SPACE parameter to disable free space checking

commit 462ff967f8ecefc502a227a97563c0e9df9fa4bf
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Dec 9 09:42:14 2009 +0100

    Don't keep the watcher running

commit 803bb7b509e8a97a09468fd4dd291de1bb044570
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Tue Oct 20 17:55:30 2009 -0400

    Print to the saved stdout stream from Sbuild::Logbase instead of STDERR. This will ensure output from download() subroutine don't end up in any build logs.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 5da42db604d3a92aa988574bd264a513aa1c1e95
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 6 16:54:24 2009 +0000

    debian: Document sbuild-createchroot absolute path patch

commit 1968551fe7735fa2d87db1f8b7e645d011d05a3b
Author: Cyril Brulebois <cyril.brulebois@kerlabs.com>
Date:   Sun Dec 6 16:45:10 2009 +0000

    sbuild-createchroot: Compute an absolute path for chroot location
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit e322af52d8d6815e1cf72522c4d58a45a7285a0e
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Dec 6 12:17:11 2009 +0100

    Sbuild::Build: Fix constructor call of Sbuild::InternalBuildDepSatisfier

commit c4cfe8b6791474dfdcfc3fa7e0541bf1f56a8b68
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Dec 6 12:16:48 2009 +0100

    bin/sbuild: Define needed variables...

commit 12d73766cff5d74e91c61cab2d5b4da172345f1f
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Dec 6 12:16:33 2009 +0100

    Sbuild::Aptitude*Satisfier: Remove aptitude cruft from output

commit 22b841efc48315a0f5cbec7c777d8fb81411e79d
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Dec 6 12:16:13 2009 +0100

    Sbuild::LogBase: Change program name of logger child

commit c2273bb3864808f584ae7f8564d8717ef405d110
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Dec 6 12:15:30 2009 +0100

    Sbuild::Internal*Satisfier: Fix POSIX.pm usage

commit fab735f693dcff4e87251a7547d5518485330dfe
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Dec 6 12:15:09 2009 +0100

    Sbuild::*Satisfier: Fix logging to use $builder

commit 23d9089a5226ef0b049c87e2afc62523e53577d6
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Dec 6 12:13:41 2009 +0100

    buildd-watcher: Never remove the pid file

commit 88013abff4e1dd095ae4341d4c2b5d601766d600
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sat Dec 5 19:24:12 2009 +0100

    Sbuild::Build: Fail in buildd mode if apt update failed

commit 0a6af5ccdfe6191e4fbdd42ab2fbd90aa5e6508f
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sat Dec 5 18:32:08 2009 +0100

    buildd-watchers: Don't rm other people's lock files

commit 939b196d6ae4b3f24e8fa5f4c9c7416213b15482
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Dec 2 08:57:50 2009 +0100

    sbuild: Let the dep resolver remove the srcdep lock

commit 8610563ad95a354bf5cf1bb2701cbe704445b147
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Dec 2 08:57:34 2009 +0100

    sbuild: Don't write NEED-TO-UNINSTALL for cloned chroots

commit 5a6bff94f8ec8411fedf0e607d57cc1b2a85328e
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Dec 2 08:57:10 2009 +0100

    Sbuild::Build: Put build directory clearly into log

commit 37530e4f5a2c1cdb377eac1d4eb98fee3dd93321
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Dec 2 08:56:40 2009 +0100

    Sbuild::AptitudeResolver: Remove aptitude cruft completly

commit 92e6f002cff3f45f5d3246cb9eaa05ccb45887f8
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Dec 2 08:56:20 2009 +0100

    buildd: Import send_mail where needed

commit a0b923fccf6fea35becb330b47ccd14b9d36b012
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Dec 2 00:00:52 2009 +0100

    buildd: Some support configs/scripts

commit 1342003428134a52be1b49ccdb4e0bbe605e891a
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Nov 30 23:53:21 2009 +0100

    Buildd::Conf: Actually use dupload-queue config

commit b624855b5b64fbaad904d010506f16b1abbbb774
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Nov 30 23:53:00 2009 +0100

    Buildd::Mail: Use the right config...

commit 5cdc9497b24f6b59094807c9a1a205258331a505
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Nov 30 20:12:01 2009 +0100

    Sbuild::AptitudeResolver: Handle packages installed for aptitude

commit ac1f60f10794d738637f5fe20685799a3cd9277d
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Mon Nov 30 20:00:05 2009 +0100

    Sbuild::AptitudeResolver: Use last set of installed pkgs

commit 5577a8cbe170c185d35daedf9a5bb0ccd39ef392
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Nov 29 23:33:44 2009 +0100

    buildd: Allow dists to choose sbuild dep-resolver

commit f06c98fa098a91023f07a56eabe900f3aeeac2de
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Nov 29 23:33:27 2009 +0100

    sbuild: Allow conf/options to choose b-dep resolver

commit 21c21ccb903546fc755554ff4961d6ab7df206bc
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Nov 29 23:32:58 2009 +0100

    sbuild: Add aptitude-based build-dep resolver

commit 9e5f18dca962a4ab6221e21a9ef065fa8224204c
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sun Nov 29 23:32:12 2009 +0100

    sbuild: Move b-dep resolver into its own module

commit 3a5d6679742b7fe167b6b43dfd2b8d5d709178b7
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Sat Nov 28 20:53:37 2009 +0100

    Buildd::Daemon: Fix sbuild call with mailto address

commit 3056a9eced2b93761306f49d92ffcb37f614c3a6
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Fri Nov 27 14:48:13 2009 +0100

    sbuild: Fix giving-back after failed pkg builds

commit a04f3b026a53f8e91da0daad43a9b83553e0d96f
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Thu Nov 26 16:18:03 2009 +0100

    Buildd::Mail: Make it work
    
    Fix a plethora of smallish bugs found when testing buildd-mail

commit 14a653263bf7c3edb7ddfe481392e71da66414f4
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Thu Nov 26 14:49:48 2009 +0100

    Don't try to start/restart after package installation

commit 2d6a94827e9062333dbe986e2d626e695a5ed754
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Thu Nov 26 14:30:38 2009 +0100

    Buildd: Fix EXIT-DAEMON-PLEASE handling
    
    EXIT-DAEMON-PLEASE was checked in run(), but called shutdown, which
    wasn't available. Moved shutdown() from bin/buildd to Buildd::Daemon.

commit 26077309f2a7a6f0c8b6bac801abf79df8203fbf
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Thu Nov 26 12:48:23 2009 +0100

    buildd-vlog: Fix log file name pattern for modern sbuild

commit e82f7afe1e195a78494631cf0fb37af094cd500a
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Thu Nov 26 11:43:32 2009 +0100

    Buildd: Make dupload queues configurable
    
    Distributions now move their built packages into a local dupload
    queue dir (configured for each distribution). Local queue dirs have
    their own configuration, detailing to which archive packages are
    uploaded.

commit 8adbf2de9c297a99434a7f6c0c6dd9989ffa5bba
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Thu Nov 26 09:42:57 2009 +0100

    buildd: Make multi-archive-capable
    
    Allow buildds to use a new config format allowing for building
    packages from several archives. For this, we keep a distribution
    configuration around and pass this to all methods that are doing
    dist-specific things.
    
    An important change is that there is no central 'DB' handle for
    contacting wanna-build anymore, but that it is created on request,
    depending on the distribution configuration.
    
    Old configurations are transparently converted to the new format.

commit 08a2b3166bc5db28dc0025ac0b1e70654f889d27
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Thu Nov 26 09:32:09 2009 +0100

    Buildd::Conf: Try to convert old config to new style
    
    buildds have existing configurations which should continue to
    be supported, so try to get all info from $sshcmd and put it
    into the $wanna_build_ssh* variables. Do the same for $sshsocket.
    
    Also do $wanna_build_(user|name) -> wanna_build_db_(user|name)

commit 7cc8d0a9a7c1a82973ce8ea3a498e5ed6949cb1c
Merge: 946c2bf 0027b56
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Thu Nov 26 09:22:26 2009 +0100

    Merge remote branch 'origin/buildd'
    
    Conflicts:
    	bin/Makefile.am
    	bin/buildd
    	bin/buildd-mail
    	bin/buildd-uploader
    	bin/sbuild
    	bin/wanna-build-merge-packages
    	etc/Makefile.am
    	lib/Buildd/Conf.pm
    	lib/Sbuild/Build.pm
    	lib/Sbuild/Chroot.pm

commit 946c2bf8559b3f4242903f51190beb4467b1c631
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Nov 25 19:06:21 2009 +0100

    Buildd::Daemon: Fix logic in w-b pipe handling
    
    We want to continue to work if the query was successful, and die if the
    query was unsuccessful. Not the other way round.

commit f15c39d7cbb61e50beab0f8a72e121a16b587de4
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Nov 25 18:08:53 2009 +0100

    Buildd::Daemon: Actually build a few packages
    
    The old code never built packages when no SECONDARY_DAEMON_THRESHOLD or
    the number of packages to build was lower than that. This is, of course,
    wrong.

commit 4726529bfd7303daff19a27195a1dfb443aad93c
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Nov 25 16:28:53 2009 +0100

    buildd: Fix log reopening
    
    Log rotation was implemented, but the central 'Log stream' variable
    wasn't reset to the new log stream afterwards.

commit 0370cc5145e2a0c1942603b3d3c141db99260503
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Nov 25 15:11:36 2009 +0100

    Buildd::Daemon: Log even if there's nothing to do
    
    It's nice to see that the query to the w-b db was successful, so also
    log if there are zero packages to build.

commit a3d7cfd7f9051704d5a6127386b8921ee6fc5581
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Nov 25 15:01:47 2009 +0100

    Sbuild::DB::Client: Correctly handle WB_SSH_CMD
    
    $self->get_conf('WANNA_BUILD_SSH_CMD') returns an arrayref pointing to a
    list of command + arguments. When constructing the final w-b command,
    this needs to be dereferenced.

commit a8c9486d3b23dd6791bda30f9a721cfd8eb58b2f
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Nov 25 19:22:35 2009 +0100

    buildd.init: Respect NO-DAEMON-PLEASE
    
    The system-wide init script should also respect the standard
    NO-DAEMON-PLEASE file.

commit 4144afe5c1fea83b2bef4f6715fa72a89e08a0c8
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Nov 25 14:58:16 2009 +0100

    Sbuild::Chroot: Fix undef value in debug output
    
    In some cases, %ENV contains keys with undef as value. Don't warn
    about those.

commit e41f76b9ec30a0112561c09e308a553509ae1a37
Author: Marc Brockschmidt <marc@marcbrockschmidt.de>
Date:   Wed Nov 25 11:58:23 2009 +0100

    Sbuild::DB::Client: No DB queries from chroot
    
    Wanna-build queries shouldn't be run from the chroot, as they are
    usually using an ssh tunnel to the target host, and the needed private
    key is only available outside of the chroot.

commit 27c77d98ed85a8c9174724ba9cfa4abf301618f7
Author: Mikhail Gusarov <dottedmag@dottedmag.net>
Date:   Wed Nov 25 09:04:59 2009 +0600

    Fix Sbuild::df to report free space on partition, not occupied one
    
    Sbuild::df is used for checking free space (see Buildd::Daemon::do_build
    and Sbuild::Build::build), so it is really unconvenient that it returns
    occupied space instead :)
    
    This obvious patch fixes the problem, so it is now possible to run sbuild
    with tmpfs mounted over /build (which obviously does not have enough
    garbage to pass the free space check).
    
    Signed-off-by: Mikhail Gusarov <dottedmag@dottedmag.net>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 8b987db3c6b0cb5e58e612e432513079d6ed29bb
Author: Geoffrey Thomas <geofft@mit.edu>
Date:   Tue Nov 24 08:53:31 2009 +0000

    scripts/git-version: Ask git for date differently
    
    --date=iso appears to be broken in lenny's git (1.5.6.5). This code is
    simpler anyway.
    
    Signed-off-by: Geoffrey Thomas <geofft@mit.edu>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit d30026fe8afae453d00d99c79b83602727aaafa1
Author: Geoffrey Thomas <geofft@mit.edu>
Date:   Tue Nov 24 08:52:14 2009 +0000

    build: Only use silent-rules if it's available
    
    This permits compiling with an older automake.
    
    Signed-off-by: Geoffrey Thomas <geofft@mit.edu>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 0027b564b0a00627b5dd318321a677627e9a188d
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Nov 20 13:50:41 2009 +0000

    sbuild: introduce new fail stage apt-get-update
    
    We want to auto-give-back packages that fail in apt-get update, which
    is caused by the transient situation of a lame mirror.  Thus a new stage
    apt-get-update is introduced and the status is set to failed to hit
    analyze_fail_state.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 6bc8344f3de6150f62d8f80eade8b0c51099847a
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 20 01:00:30 2009 +0000

    sbuild: Clean up on failure to fetch source, and don't skip on some failures
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 355a4dffe742445713ea089436da077fc7a40ae8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 7 13:01:12 2009 +0000

    Sbuild::Build: Flush stdout explicitly in logger
    
    This is to avoid "choppy" output when monitoring interactively.
    Autoflushing stdout appears to be broken in Perl 5.10 so flush
    explicitly in addition to enabling autoflush.  Thanks to Ryan
    Niebur for spotting this.

commit ceb709fa141d5d47f093bdf08d0c0d212b76d48e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 7 11:05:04 2009 +0000

    scripts: git-version uses version from NEWS

commit 2899e07e311144546671caaa6a173482e4c84da6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 7 00:46:39 2009 +0000

    Sbuild::Build: Cache vars used in tight loop in logger
    
    Rather than perform repeated hash table lookups for each output line,
    cache outside loop so lookups only occur once at startup.

commit 0b45461b15cc7f7e6ef290ead1ba6f671dced3ab
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 6 23:17:58 2009 +0000

    debian: Close #521096

commit 7cd3c012d7fb701c8a9e68633a551fce7c08c827
Author: Gustavo Noronha Silva <kov@debian.org>
Date:   Fri Nov 6 23:15:33 2009 +0000

    Sbuild::Build: APT_UPDATE updates and upgrades the chroot

commit ebedcac18f63acdb8102906f4e4e7c9d26b06922
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 6 23:05:20 2009 +0000

    debian: Close #538085

commit b70290f5855c4b0aa589f6696768934885d13f8c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 6 23:03:01 2009 +0000

    debian: Close #535911

commit 743d2e2bf6cb98eb923822b90fac5da9b3036f3b
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Fri Nov 6 23:02:00 2009 +0000

    Sbuild::Conf: Allow setting of $build_dir

commit 83d774431b5e439f90b017ae1344bf58f4c4ac4d
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 6 22:57:43 2009 +0000

    debian: Close #538083

commit 6ac5cae62a8062c2a416b055309d1f86e21da951
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 6 22:50:43 2009 +0000

    build: Set correct wanna-build.conf location

commit 0b0fc63b269188c6f447521d9b679eacdb4fb5ff
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 6 22:31:59 2009 +0000

    WannaBuild::Database: Fix up uninitialised var in log_ta
    
    Also fix incorrect package set method call.

commit a6a87844c08ebfd5020c7791c50f0d36cb53cd21
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 6 21:02:26 2009 +0000

    debian: Close #553364

commit dbca481033f8c5b8cc356923442a2869978901a6
Author: Felipe Sateler <fsateler@gmail.com>
Date:   Fri Nov 6 21:00:28 2009 +0000

    wanna-build-merge-packages: Remove extra parenthesis
    
    Line 46 seems to be sporting an extra parenthesis

commit 1b5716cbb6b14a8f1213ed0e77d7eddcb414a984
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 6 20:55:41 2009 +0000

    Minor documentation corrections

commit 69b0697ad640bf7992320aaf176b8564dc6ae1b1
Author: Karl Goetz <karl@kgoetz.id.au>
Date:   Sun Nov 1 21:48:48 2009 +1030

    README.buildd-admin: Rewording and reworking
    
    I note sections 2.2+ and 3.0 are blank, and probably need a TODO

commit f0de7fc841b5cc40fd206b7f53f9f10ff3bcaea3
Author: Karl Goetz <karl@kgoetz.id.au>
Date:   Fri Oct 30 23:15:37 2009 +1030

    README: Rework
    
    * Reword several sections
    * Rewrote a lot of the examples bit
    * Removed a reference to buildd.chroot.

commit 413284a54d30bb1091dc1e9fb2c0b43c99cd1c33
Author: Karl Goetz <karl@kgoetz.id.au>
Date:   Fri Oct 30 22:35:46 2009 +1030

    NEWS-buildd: Changed last few news-buildd entries to match existing entries.
    
    It involved removing whitespace so all text lines up with the * which
    indicates an item, but I'm not convinced I like it (I prefer the slight
    indent for wrap around text).

commit 2084a537cb93b5263e9affa289cfd5b5de9fd591
Author: Karl Goetz <karl@kgoetz.id.au>
Date:   Fri Oct 30 21:41:53 2009 +1030

    AUTHORS: Swapped all entries to tabs (was a mix of tabs and whitespace)
    
    Assumes 4 space tabspot

commit f43b2732ee14f67a7fdcc7ec3b8b1a7db67207e3
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Jun 15 09:48:04 2009 +0000

    [bin/buildd-update-chroots] update to work with schroot
    
    This script is not general-purpose but instead updates every chroot it
    finds, which is fine for the official autobuilders but maybe not
    others.  Likewise /root is passed into the schroot invocations because
    the buildd's home does not necessarily exist in the chroot.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 0b435d5a6fc27b7854be313da1ad7f4d53506b4e
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Mon Oct 19 20:50:50 2009 +0100

    bin/sbuild-debuild: provide debuild like functionality for sbuild
    
    Provide an sbulid-debuild script that provides debuild like
    functionality for sbuild.
    
    This script gives similar functionality as debuild. You can run it from
    a debianized package source directory to build a package using sbuild.
    The resulting package's .changes file is then processed through
    lintian. sbuild-debuild also allows for supplying debianized source
    package directories directly and for supply a .dsc file. Also,
    sbuild-debuild allows for running external commands in a similar
    fashion as you would run hooks.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit f0a28af8304ff72ba1c02dd74885d7abe9a5b420
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Oct 17 14:00:23 2009 -0400

    Make use of LWP::UserAgent optional and implement the progress indicator
    
    Progress indicator is to give better output.

commit 775aeaa6607cdc4ffb11543b0ca91568a178ce1a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 18 22:32:19 2009 +0100

    debian: Close #551310

commit cfcc3a25bf2ae15eeed0944a5ff57a3a38c76459
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Oct 17 17:46:51 2009 -0400

    Add sbuild-clean script

commit d2d5ea8cc0922d0f93078feab55a5cd705555f9b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 18 21:04:53 2009 +0100

    Sbuild::Options: Add --mail-log-to option to set $mailto

commit 365bb4dcbace508fa596728daafd32988c72e845
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 17 13:31:23 2009 +0100

    Sbuild::ChrootInfoSchroot: Add aliases from --info output

commit 071e14426d6ff63257c0afb96b644ff9217fa744
Merge: 923d5af f49d427
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Oct 16 22:04:20 2009 +0100

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit 923d5af50979cd2e31cdcea0d999860f3a7e245a
Author: Kees Cook <kees@ubuntu.com>
Date:   Fri Oct 16 13:38:44 2009 -0700

    sbuild: Drop unused code
    
    Drop the uncalled code from the end of sbuild.  (Also, it's not correct
    to ignore HUP anyway, since children may use HUP during builds, and this
    would pollute the signal masks.)
    
    https://launchpad.net/bugs/453460
    
    Signed-off-by: Kees Cook <kees.cook@canonical.com>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 6613abbfd8c9b20b1d438efd6399941be2d345b4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 26 23:17:08 2009 +0100

    man: sbuild.1.in: Document -p and remove --force-depends

commit b2b453e85098dd64c41b376d845a331878b000c3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 26 23:16:22 2009 +0100

    build: Use automake 1.10 with silent-rules

commit f49d427c21c6a9129d50ab39b340309d8e753ed5
Author: Jan-Marek Glogowski <glogow@fbihome.de>
Date:   Thu Sep 17 17:21:02 2009 +0200

    debian: Cleanup make -C and comments
    
    - Changes all cd debian/build; make to make -C debian/build.
    - Just creates the build directory if it doesn't exists.
    - Removes all debhelper comments from binary-arch

commit 7402a0ff30e134c62465b0b1633f49e413dd50f1
Author: Jan-Marek Glogowski <glogow@fbihome.de>
Date:   Thu Sep 17 17:21:01 2009 +0200

    build: Remove config.h.in~

commit 1d870e413e7efff6eb2a84a766ea0e7c50fd5668
Author: Jan-Marek Glogowski <glogow@fbihome.de>
Date:   Thu Sep 17 17:21:00 2009 +0200

    sbuild-createchroot: Cleanup symlink error mesg

commit 9c0d34d9a206612981fbdba3f7ee750ea8b804e9
Merge: 1bc5aff 138c03b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 20 18:25:15 2009 +0100

    Merge branch 'master' of ssh://git.debian.org/git/buildd-tools/sbuild

commit 1bc5aff828322089e64a7a75d99867570da2b5c0
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Sep 16 23:27:58 2009 +0100

    debian: Close #546673

commit e3dbce4338865c2a3c76c5923b32973fbedd1893
Author: Nelson Elhage <nelhage@mit.edu>
Date:   Wed Sep 16 23:25:56 2009 +0100

    Sbuild::Options: Accept -C for --check-depends-algorithm
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit aef1a608c3179fc36eb17f20d93a098abfbd26cf
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Sep 16 23:22:16 2009 +0100

    debian: Close #546647

commit 341b54887092f096cca94333e7689da71f689f67
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Sep 16 23:19:35 2009 +0100

    Sbuild::Build: Add OSVersion version
    
    OSVersion is the original version with a stripped epoch.
    This complements SVersion which is the amended version with
    a stripped epoch, and is used to set the 'DSC File' attribute.

commit f6277a76b35d6c630d56a348ce5d2162b8bfc5b3
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Sep 16 22:40:23 2009 +0100

    debian: Close #546624

commit e0eb3b4c951022fe52b9c6187fce53358c2af155
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Sep 16 22:21:02 2009 +0100

    Sbuild::ChrootInfoSchroot: Run schroot --info only once at startup
    
    Rather than running "schroot --list", followed by "schroot --info"
    for each chroot found by '--list', just run "schroot --info --all-chroots".
    Add function get_info_from_stream(), split from get_info().
    get_info_all() repeatedly passes the output of '--info --all-chroots'
    to this function to get the information for all chroots in a single
    attempt.
    
    This siginificantly speeds up startup, especially in the case where
    many chroots exist.

commit 138c03b146cd7d8a255ec37f298fb9616278f238
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Sep 16 23:27:58 2009 +0100

    debian: Close #546673

commit e1193d96dfeecb192080d8679ef8540a7952eb63
Author: Nelson Elhage <nelhage@mit.edu>
Date:   Wed Sep 16 23:25:56 2009 +0100

    Sbuild::Options: Accept -C for --check-depends-algorithm
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 8f828f90135c6297e5c99ed1f280ba8a9027ed1f
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Sep 16 23:22:16 2009 +0100

    debian: Close #546647

commit 0bbc20a5caf671c3f6d0d479a9a29ced43435212
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Sep 16 23:19:35 2009 +0100

    Sbuild::Build: Add OSVersion version
    
    OSVersion is the original version with a stripped epoch.
    This complements SVersion which is the amended version with
    a stripped epoch, and is used to set the 'DSC File' attribute.

commit abea9e90479b76bec9cdf06b13ad6e5783d478f4
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Sep 16 22:40:23 2009 +0100

    debian: Close #546624

commit 54b2d2e955e9348993ca5008d2fa409c58575272
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Sep 16 22:21:02 2009 +0100

    Sbuild::ChrootInfoSchroot: Run schroot --info only once at startup
    
    Rather than running "schroot --list", followed by "schroot --info"
    for each chroot found by '--list', just run "schroot --info --all-chroots".
    Add function get_info_from_stream(), split from get_info().
    get_info_all() repeatedly passes the output of '--info --all-chroots'
    to this function to get the information for all chroots in a single
    attempt.
    
    This siginificantly speeds up startup, especially in the case where
    many chroots exist.

commit fdd9dd75b460aad58ab3916110e562830c0cda32
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sun Sep 13 23:28:38 2009 -0400

    Implement support to detect and build from remote source files. This also changed dsc_files to support reading dsc files downloaded from the web.

commit 02f033d4d85254c7c76a4793ea0e24f03b954159
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sun Sep 13 23:27:00 2009 -0400

    Add utility subroutines that are used to check and download from a URL and parse dsc files.

commit c6bf95beac6fa22320a6efca54c128f5b8353a97
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Aug 25 13:57:27 2009 +0000

    [Sbuild::DB::Client] import Sbuild::ChrootRoot
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit b803de956b867f48f86042568ed0e7ef431f3735
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Aug 25 13:50:49 2009 +0000

    [bin/buildd-mail] do not depend on Sbuild, as that breaks with newer versions
    
    Copy the binNMU_version function that has been imported from the Sbuild
    module as this totally breaks with newer versions of libsbuild-perl.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 063224f9855894cf8ed66674458ab6d73f2385f1
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Aug 18 00:56:18 2009 +0100

    Buildd::Daemon: get_from_REDO does not return a scalar reference

commit 1dca0132f323e900f75f61f5bea4119db7c6b20e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Aug 18 00:55:36 2009 +0100

    Buildd::Daemon: Don't abort when TAKE_FROM_DISTS is not empty

commit 95ae6f5f9e576900cb5a2428e3cc9153e8a93d7b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 15 10:37:25 2009 +0100

    build: Update git-version script to handle hyphens in versions

commit 2c0336e568d1f8f761486b2bb9b592a86ef2badc
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Aug 10 22:29:31 2009 +0100

    debian: Install buildd's .forward correctly

commit 111a3d270ca1c53fedc4d283aa041ee542c8a2a1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 2 12:48:17 2009 +0100

    debian: Bump version to 0.59.0~rc1 and Standards-Version to 3.8.2

commit 8333cd6825d78b923dce750231a5ea59a16a64de
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 2 12:47:47 2009 +0100

    NEWS: Fix error in 0.59.0 changes

commit a2742a5ee5df87b4c55d6d37c974288959465fe1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 2 12:33:58 2009 +0100

    NEWS: Bump version to 0.59.1-rc1

commit 843481a1d29878576315ac09921eadc943f61551
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 2 11:17:30 2009 +0100

    Sbuild: Don't require STATS_DIR to be set.
    
    Sbuild::Conf doesn't require STATS_DIR to exist.
    Sbuild::Build::write_stats only uses STATS_DIR in batch mode
    
    Closes #539570.

commit 85e36f1f2f67a91935c81c412516a7bb08d436d4
Author: Bastian Blank <waldi@debian.org>
Date:   Fri Jul 31 14:58:45 2009 +0000

    [Sbuild::Build] Don't try to access log in nolog operation

commit d0a1c550d0d81cdb371f67d29ec13cc8a59d056d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 1 14:22:53 2009 +0100

    Sbuild: Add user options to dpkg-buildpackage invocation

commit 44810db821299a90591a0429f38bef32f7bde006
Author: Joachim Breitner <nomeata@debian.org>
Date:   Sat Jul 25 17:51:21 2009 +0100

    Sbuild::DB::Base: strip newlines on multiline fields in export output correctly
    
    Signed-off-by: Philipp Kern <pkern@debian.org>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit ffae5b3023e4e4172a4e735c44e00e339cb7d035
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 25 17:38:16 2009 +0100

    debian: Add arch wildcard support for wanna-build (#501230)

commit c6127d360f2f5aba6601cb01799e4f16da528d56
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Jul 25 17:34:05 2009 +0100

    WannaBuild::Database: Add support for architecture wildcards
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 2c3249b7a5ae7e008ac4569751c35a8e96f47e03
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Jul 25 17:30:38 2009 +0100

    WannaBuild::Database: Update package sections
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit f7541e9cdfadcda57d1ff1560d35ad33019a4b59
Author: Luk Claes <luk@debian.org>
Date:   Sat Jul 25 15:46:31 2009 +0100

    wanna-build-statistics: Fix the distributions
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit c2a849f1c0fa9d250929fcd3fbd15aeb046fd662
Author: Joachim Breitner <nomeata@debian.org>
Date:   Sat Jul 25 12:57:38 2009 +0100

    man: wanna-build: Further document --give-back
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 788fb9a018873fe058015b1d0186641a590c4893
Author: Joachim Breitner <nomeata@debian.org>
Date:   Sat Jul 25 12:55:14 2009 +0100

    wanna-build: Indent multi-line output of --info more
    
    Since the field names are indented by two, make the mult-line fields be
    indented by 4 instead of 1.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 9fc4eedabaeed61583c94351ffa1d1b4348330fc
Author: Joachim Breitner <nomeata@debian.org>
Date:   Sat Jul 25 12:54:47 2009 +0100

    wanna-build: Create valid dctrl-like output
    
    Instead of adding the dots for empty lines when reading the input, and
    adding the extra space when outputting, save the data as is and create
    the correct format when outputting. This makes sure that multi-line-data
    passed to -m is also represented correctly.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 58bcfa9614f7a9f0ec4f519fc01cfc03c98f3925
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 25 12:52:05 2009 +0100

    Sbuild::DB: Remove code duplicated in MLDBM and Postgres modules

commit 324a6c48b5ac0513e79b8b0965255c9d6b31a23e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 25 12:28:46 2009 +0100

    NEWS: Bump version to 0.59.0

commit f988aa5e040ad6e1acceded5a21d553b86302f72
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 25 12:28:23 2009 +0100

    Sbuild::ConfBase: Add FULL_NAME from passwd gecos

commit 37bdff44f23b4729deae5f39641c677eec397be3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 25 12:27:54 2009 +0100

    NEWS: Document sbuild wanna-build changes

commit b9244ad840e84d5fb4c660f380d4e5374c9cbe74
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 25 12:22:25 2009 +0100

    sbuild: Use wanna-build client interface
    
    Drive wanna-build via status trigger
    Add given-back and attempted build states
    Set wanna-build built and attempted states
    Clean up build directory when downloads fail
    Only use skipped state for SKIP

commit 30faa38c5a225a3a092386e1d2cb8d31caa9bd6b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 25 11:30:01 2009 +0100

    Buildd: Remove unused wannabuild_command

commit dbe0913ed48abda9eb1bff1d383fee83d87ee8b0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 25 11:29:15 2009 +0100

    Buildd: Use wanna-build client interface in place of running directly

commit 2c99110efd856518c9e1ef86232ce67dd8b39dab
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 25 11:25:15 2009 +0100

    Build::Conf: Use common Sbuild::DB::ClientConf configuration

commit db36f486e4447f52b394699ed4f84adad4ef59ff
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 25 11:22:12 2009 +0100

    Sbuild::DB::Client, Sbuild::DB::ClientConf: Add wanna-build client interface
    
    Interface to run wanna-build commands, and for wanna-build client configuration.
    This is to allow buildd and sbuild to share the common code they use to drive
    wanna-build.

commit 2d4aa5815cb28f1f8e013d3547e1aeeab09290f2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 25 01:07:38 2009 +0100

    buildd: Update wanna-build configuration key names
    
    Unify wanna-build usage between buildd and sbuild.
    This initial patch changes the key names and buildd.conf variable names only.
    
    Configuration keys:
    
    ┌──────────────────────┬───────────────────────────────┬─────────────────────────┐
    │ buildd               │ sbuild                        │ uniﬁed                  │
    ├──────────────────────┼───────────────────────────────┼─────────────────────────┤
    │ WANNA_BUILD_DBBASE   │ WANNABUILD_DATABASE           │ WANNA_BUILD_DB_NAME     │
    │ WANNA_BUILD_USER     │ AUTO_GIVEBACK_WANNABUILD_USER │ WANNA_BUILD_DB_USER     │
    │ SSH_USER             │ AUTO_GIVEBACK_USER            │ WANNA_BUILD_SSH_USER    │
    │ n/a                  │ AUTO_GIVEBACK                 │ n/a                     │
    │ SSH_HOST             │ AUTO_GIVEBACK_HOST            │ WANNA_BUILD_SSH_HOST    │
    │ SSH_SOCKET           │ AUTO_GIVEBACK_SOCKET          │ WANNA_BUILD_SSH_SOCKET  │
    │ SSH_OPTIONS          │ n/a                           │ WANNA_BUILD_SSH_OPTIONS │
    └──────────────────────┴───────────────────────────────┴─────────────────────────┘
    
    buildd.conf:
    
    ┌───────────────────┬────────────────────────────────────┐
    │ old               │ new                                │
    ├───────────────────┼────────────────────────────────────┤
    │ $wanna_build_db   │ $wanna_build_db_name               │
    │ $wanna_build_user │ $wanna_build_db_user               │
    │ $ssh_user         │ $wanna_build_ssh_user              │
    │ $ssh_host         │ $wanna_build_ssh_host              │
    │ $ssh_socket       │ $wanna_build_ssh_socket            │
    │ @ssh_options      │ $wanna_build_ssh_options (hashref) │
    └───────────────────┴────────────────────────────────────┘
    
    These options may be introduced to sbuild.conf in the future if required.

commit 96eb64a7d0c6e2c8bf8c3975b0f85ce2798542e7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 25 00:07:49 2009 +0100

    Sbuild::ConfBase: Add deprecated warning function

commit 6d9de4c578fb29d625967f8cfdcbfdaa0b77157f
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jul 24 23:52:44 2009 +0100

    WannaBuild::Database: Remove unused code

commit f8cb432d1deafa7b7c94ab20c4b9bccf4db0cfc0
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jul 24 23:29:26 2009 +0100

    wanna-build: Remove deprecated propagation options and configuration variables
    
    * Remove the command-line options --no-propagation and --no-down-propagation
    * Remove the configuration keys DB_NO_PROPAGATION and DB_NO_DOWN_PROPAGATION
    * Remove the configuration file variables for the old format configuration
      which was no longer supported.

commit 14c1788d9507bc924713d608f8717e1eb17718b5
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Jul 4 19:28:34 2009 +0100

    [Sbuild::Build] Add support for architecture aliases/wildcards part two

commit 33caa353d687669bca2a5d61979fc995ecb6d92b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 4 12:01:38 2009 +0100

    [debian] Close #501230

commit 3864d5f2bc8081200c8389901878297c8b5ddf1d
Author: Andres Mejia <mcitadel@gmail.com>
Date:   Sat Jul 4 12:00:07 2009 +0100

    [Sbuild::Build] Add support for architecture aliases/wildcards

commit 6dbc3fade4901e8339f9145a4d79ef6d78633123
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 4 11:59:09 2009 +0100

    [Sbuild::Sysconfig] Add DPKG_ARCHITECTURE

commit d1f7b14dcfb9fddac1ac6c28421ae5875f02c611
Author: Cyril Brulebois <cyril.brulebois@kerlabs.com>
Date:   Sat Jul 4 11:38:02 2009 +0100

    [sbuild-createchroot] Suggest reporting usecases to sbuild developers

commit 8c7b0f8f9d5e97f014d67bf2706d4f4320f707e3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 4 11:34:27 2009 +0100

    [sbuild-createchroot] Don't run commands in chroot when chroot arch is not native
    
    If the host and chroot arches don't match, don't update the APT
    package lists or run any other commands, since they most likely won't
    work.

commit 81b20242f677b73706fc8e718c38a5c393118342
Author: Cyril Brulebois <cyril.brulebois@kerlabs.com>
Date:   Sat Jul 4 11:34:11 2009 +0100

    [sbuild-createchroot] Add personality option automatically for some known cases

commit e82456772fb677bb96e0db1a2455d7eb1fa9925d
Author: Cyril Brulebois <cyril.brulebois@kerlabs.com>
Date:   Sat Jul 4 11:08:26 2009 +0100

    [sbuild-createchroot] Detect whether a personality option might be needed.

commit d3087b8ef3b72dc63a03272a82d7893ab6db2760
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jul 2 23:04:10 2009 +0100

    [debian] Close #535415
    
    WannaBuild::Database: Allow whitespace in Architecture field

commit 69d754a712066962ca2b9861154fa5e1cc37b62b
Author: John Wright <jsw@debian.org>
Date:   Thu Jul 2 23:02:21 2009 +0100

    [WannaBuild::Database] Account for multi-valued Architecture field
    
    wanna-build complains about $arch being uninitialized in
    WannaBuild/Database.pm line 1097, because the regexp for the
    Architecture field assumes no white-space in the value.

commit 6776a7c41709dc6b91821531374aaa7d33ffc135
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 25 23:07:45 2009 +0100

    [man] sbuild.1: Correct roff markup typo in --append-to-version

commit 23974c78a2c09744d1a42676d8c1057e2f408bfc
Author: Florian Weimer <fweimer@bfk.de>
Date:   Thu Jun 25 23:00:19 2009 +0100

    [WannaBuild::Database] Remove unneeded "my" use

commit 660a7a909416033d7d85b7fd26ff0606aedbf54a
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 25 22:59:52 2009 +0100

    [debian] Close #521486

commit 5f20e24788f70e7ed8e0f866ba08ae4f70085dc3
Author: Florian Weimer <fweimer@bfk.de>
Date:   Thu Jun 25 22:58:26 2009 +0100

    [WannaBuild::Database] Use Sbuild version comparison functions

commit ad411295f45d99aa7c6c6f21e7c194965859dec9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 21 15:23:24 2009 +0100

    [debian] Bump version to 0.58.7-1

commit 3af11ad67d642e6eb41d4e9610722e6643328024
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 21 15:22:45 2009 +0100

    [NEWS] Bump version to 0.58.7

commit 98cdf3305f37a6a7ef0c35bd8410004d9126200c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 20 10:50:04 2009 +0100

    [debian] control: Update package descriptions
    
    Closes: #531022

commit 3bc203a8d574661d6a80f479613a09f7500ba68d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 20 10:27:43 2009 +0100

    [debian] Close #529786
    
    Don't include Epoch in DSC filename.

commit 226569dbee1ed1bb3d61f7baee4d4aa639f4a661
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 20 10:25:04 2009 +0100

    [Sbuild::Build] Don't include epoch in 'DSC File'

commit b41be90949715119e04be3a5a7d750a44f3f7ec1
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 15 20:46:24 2009 +0100

    [.gitignore] Ignore VERSION

commit 11dd9e7befad26fb005387b7560e8617af6ff54f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 15 20:45:46 2009 +0100

    [debian] git-tag-debian: Remove echo statement used for testing

commit e6e759f023f3fccb77e06f374cd067cc192035cd
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 15 20:45:26 2009 +0100

    [NEWS] Bump version to 0.58.6

commit 43a416e0a52e0a157f26a5dd1eacab8515e5addd
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 15 20:33:10 2009 +0100

    [debian] Don't duplicate Perl modules in sbuild and libsbuild-perl
    
    * debian/sbuild.install: Don't install Perl modules, which should
      only be included in libsbuild-perl (Closes: #533143).
    * debian/control:
      - libsbuild-perl: Replace sbuild <= 0.58.4 (due to also providing
        perl modules)
      - sbuild: Depend on the same version of libsbuild-perl.

commit 401c57333d67abe50ad41c411596a665bcc9c00c
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Jun 15 09:48:04 2009 +0000

    [bin/buildd-update-chroots] update to work with schroot
    
    This script is not general-purpose but instead updates every chroot it
    finds, which is fine for the official autobuilders but maybe not
    others.  Likewise /root is passed into the schroot invocations because
    the buildd's home does not necessarily exist in the chroot.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit d6b987bf9766666ffd7b4a580d3271b202681a68
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 14 10:33:11 2009 +0100

    [debian] Install README.Debian in sbuild package
    
    Move debian/README.Debian to debian/sbuild.README.Debian.
    
    Closes: #533029

commit 1dbe4e70104b3f1a7ea305ecd64f258719ef8032
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 14 10:31:28 2009 +0100

    [NEWS] Bump version to 0.58.5

commit 65ee49b519a1df4678784bd4eed4f8c8eb7538a7
Merge: 5420ad3 6e4f2e4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 13 21:06:48 2009 +0100

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit 5420ad3f9746718a66fb6562d8499b8a469e4898
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 13 21:02:36 2009 +0100

    [build] Package versioning uses git release tags
    
    Rather than hard-coding the release version in several places,
    including configure.ac and NEWS as well as the git tags, make the
    setup simpler and easier to manage for releases since forgetting
    to update one of the versions or tag is not possible.
    
    The version is stored in the NEWS file.  This is used to tag the
    release with scripts/git-tag-release which creates a tag
    release/sbuild-<version>.
    
    The script ./bootstrap calls the script scripts/git-version which
    gets the release tag using git and uses this to create a VERSION
    file containing the release details.  The autotools read this
    file to get the version to set in the configure script.  The
    reason for this is to allow rebootstrapping from release tarballs
    without needing git.
    
    Debian releases are tagged with debian/git-tag-debian.
    
    The release procedures are documented in HACKING.

commit de829c64681a3502f88df266383f1b04d7ecdd94
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Jun 4 19:29:29 2009 +0000

    [buildd] Don't use the SysV (and non-POSIX) SIGPWR
    
    This makes buildd work on GNU/kFreeBSD.

commit 6b82face60852c3e4e362f3fc829e153c5989d65
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 31 00:14:11 2009 +0100

    Use dpkg --print-architecture in place of dpkg --print-installation-architecture

commit 6e4f2e44dd933a89078539b9b22ed674083e362d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 4 19:57:40 2009 +0100

    [buildd] Don't use the SysV (and non-POSIX) SIGPWR
    
    This makes buildd work on GNU/kFreeBSD.
    
    Thanks to Aurelien Jarno.

commit def77a50e479dca25baeddbd43b56e32a5741070
Merge: 7b0f871 2d7a93b
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jun 4 19:38:48 2009 +0100

    Merge branch 'master' of ssh://git.debian.org/git/buildd-tools/sbuild

commit 2d7a93b856158f5e6c0e7a9736156842386da312
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 31 10:33:13 2009 +0100

    [Sbuild::ChrootSetup] Add list_packages and set_package_status
    
    sbuild-hold and sbuild-unhold implementations of these functions
    are now present in Sbuild::ChrootSetup and are used by these tools.

commit 0f4cff0c3530b848480ce19fe4738b228d8852e1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 31 00:14:11 2009 +0100

    Use dpkg --print-architecture in place of dpkg --print-installation-architecture

commit 3828a48fe6a30ce9c88d8f6749a6523f2865245a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 30 18:02:06 2009 +0100

    [Sbuild::Conf] check_group_membership uses getgroups(2)
    
    Check group membership using both group database searching and
    getgroups(2) with appropriate errors to better diagnose permissions
    problems.

commit 92ad111334884b2d1dac426b3b75a76bdc2c1c00
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 30 14:50:39 2009 +0100

    [Sbuild::Build] SIGALRM handler calls kill with correct quoting

commit 1e6de646235dd1a61a0fd839af1a8aee875a106b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 30 14:49:18 2009 +0100

    [Sbuild::Chroot] Allow use of setsid when running commands
    
    Sbuild::Build sets this when running dpkg-buildpackage to allow
    termination of the whole process group.

commit 8f8da84853a8c4f8f9152734d00a1371933b83fc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 30 16:49:25 2009 +0100

    [Sbuild::ChrootSetup] Move shell invocation from sbuild-shell

commit 6618890fbd36f029b696a35cf052e032dd0e69ba
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 30 16:46:16 2009 +0100

    [Sbuild::Utility] Don't open log file
    
    This detaches programs being run from STDIN/STDOUT/STDERR which can
    cause problems for interactive use of utility programs such as
    sbuild-shell.

commit 16be96d3dad6804d788fc5381304037762c6f9b1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 30 16:45:04 2009 +0100

    [Sbuild::Chroot] Execute programs using execvp directly
    
    This avoids quoting issues and shell expansion of commands

commit 46d4a948b53653cca16d470e839b61a051f4034b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 30 16:18:18 2009 +0100

    [sbuild] Only clean up if there is a valid current job

commit 551909d1890ef786493c0e23145670d0d7cdfcbb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 30 16:07:53 2009 +0100

    [Sbuild::Chroot] Add get_option method to get option value
    
    This uses the user-supplied value if present, or else the
    default value for the chroot.

commit 28ae47ea5c7be652bea3db39c6e07c3baba69e93
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 30 14:50:39 2009 +0100

    [Sbuild::Build] SIGALRM handler calls kill with correct quoting

commit 8f254221933068ae0628f9898a23f4f8bbcf38ee
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 30 14:49:18 2009 +0100

    [Sbuild::Chroot] Allow use of setsid when running commands
    
    Sbuild::Build sets this when running dpkg-buildpackage to allow
    termination of the whole process group.

commit 7b0f871a32507c849d5fdfab6b3e6429122c637a
Author: Philipp Kern <pkern@debian.org>
Date:   Thu May 21 16:24:48 2009 +0100

    [buildd, sbuild] get rid of --no-down-propagation
    
    --no-down-propagation is the default on the official wanna-build and
    it is simply ignored nowadays.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 53e98edad6e4ac14cc5fd9024aacb324d2906e14
Author: Philipp Kern <pkern@debian.org>
Date:   Thu May 21 16:15:11 2009 +0100

    [Buildd::Mail] Allow Build-Attempted as a valid current state for retries
    
    Ryan Murray's buildd added Build-Attempted and Built as state.  It is
    perfectly valid to give-back or retry a build in Build-Attempted.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit ce5ef3dabd6a722e8cd515f0694c09343ec49bed
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 19 22:18:19 2009 +0100

    [debian] Close #509133

commit 8dc01a896e1b6f1e8a20c15c82ec0e99c8836a33
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 19 22:15:41 2009 +0100

    [Sbuild] Use Filesys::Df in place of df
    
    Rather than using an external program, use statvfs(2) via the
    Filesys::Df module.  This saves the need to parse the output of
    a program since we can just use the results directly.

commit c558cc8b0f7faa7a21077746ed003e364f2725ef
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 19 21:35:45 2009 +0100

    [debian] Close #529470

commit 8dd7b7c7e9654aa710ce22a503f8decf2014b10b
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 19 21:33:54 2009 +0100

    [sbuild] Use isin from Sbuild

commit f7f3f748811b96fac75d52e60742d6b22cac28d3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 23:53:07 2009 +0100

    [debian] Close #528312

commit a82a4b6bf9c61948c7e94053ec000c1ac71ad2f2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 23:51:36 2009 +0100

    [Sbuild::*] Add PURGE_BUILD_DEPS option to control build-dep removal

commit 94f4952004822ea10b0a0ca860ff5beb84fe0581
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 23:46:12 2009 +0100

    [Sbuild::Conf] Always purge packages by default

commit fc253611cd7a78de4405a735a63eb75e5401312d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 23:45:01 2009 +0100

    [debian] Bump version to 0.58.4-1

commit c06dfa8fd454ce5519da32456d0e01f17cb5d924
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 23:44:22 2009 +0100

    [build] Bump version to 0.58.4

commit 50802856b6b4853a21950ea7ad2a975887f75369
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 23:24:30 2009 +0100

    [man] Update sbuild.1 references

commit e925e754f84653f4a9291982431eb53ca9166f81
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 21:45:09 2009 +0100

    [debian] changelog: Update for 0.58.3

commit 1a27c42ceded9689131f3c59769f6231a6e0d13d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 21:35:04 2009 +0100

    [TODO] Remove completed items

commit 519b376baa2d52acd15129ac57c7147a10fba0eb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 21:13:58 2009 +0100

    [build] Don't generate man/sbuild-upgrade.1

commit bb874ad9f6a561d5276a62546e0f82e537fc8d5b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 21:13:01 2009 +0100

    [TODO] Add missing features for ChrootSetup to handle

commit 182a64fb01ebc8f8de9c63cfe79892f5c47284ff
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 21:12:29 2009 +0100

    [Sbuild::ChrootSetup] Default priority to avoid unnecessary messages

commit f3e8b060469ba0451c709ceaf1124317e81d613a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 21:11:46 2009 +0100

    [sbuild-stats] Include modules in correct order

commit a820bc90a65d2be6e9792ae759f62cc6e8f27af3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 21:10:18 2009 +0100

    [bin] sbuild-(update|upgrade): Use Sbuild::ChrootSetup
    
    Also add sbuild-distupgrade to run apt-get dist-upgrade
    
    Merge manual pages for all three commands.

commit 688b82958a878991394fb2003f3fedd266d7201e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 21:06:15 2009 +0100

    [Sbuild::Utility] Don't pass session to open_log

commit 532bbda92f3edc3d5d986d9bbebba30ef2cec927
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 19:24:34 2009 +0100

    [Sbuild::Build] Pass configuration to ChrootSetup functions

commit 75d097f665d998ef152655a3530d739c94014a08
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 19:23:57 2009 +0100

    [debian] sbuild.install: Don't install 50sbuild

commit d5c149db7275e371d81571c453e9c643baa7324f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 19:23:21 2009 +0100

    [debian] sbuild.postinst: Update sbuild group ownership recursively

commit 49cff2a04ddb15f846195f5743c7325b9dbb9437
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 19:22:54 2009 +0100

    [debian] NEWS: Document sbuild system group transition

commit 522bd057f6b002b43cb02c68c46c0ab526ebd63f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 18:03:58 2009 +0100

    [debian] Add libsbuild-perl.install
    
    Update .gitignore

commit 751d0c8b7dfef6d8e943a24c9e153b7b64f72017
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 18:02:10 2009 +0100

    [Buildd/*] Update copyrights

commit b8ebb98c37c50c3a37aec835f6b5bee016c9d9be
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:52:21 2009 +0100

    [buildd-watcher] Remove main namespace

commit 762b0da70fa481797482506e1d1fbe8f714cff5a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:52:01 2009 +0100

    [buildd-uploader|watcher] Update copyright

commit a719f63f4877d3905523ff9d7d513015bf11fa7c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:46:30 2009 +0100

    [Buildd] Remove write_stats
    
    Now present in Buildd::Base

commit 8040b79eee0f2168c8b037ccac69736556f526b8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:44:46 2009 +0100

    [Sbuild::LogBase] Remove main::LOG
    
    Global streams are now not created.  main::LOG, main::SAVED_STDOUT
    and main::SAVED_STDERR are replaced by IO handles exported by the
    module ($log, $saved_stdout and $saved_stderr).
    
    Code previously outputting directly to LOG uses local logging code or
    the default stream (which is redirected to the log).

commit e7ddf00b13bc68c01bec3e45c397631cb9f76498
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:40:22 2009 +0100

    [Buildd] Remove logger()

commit 2ec8b32c3edff687262e4386aa7df5c438117d45
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:34:40 2009 +0100

    [Buildd::Watcher] Move from buildd-watcher to Buildd/Watcher.pm

commit 0f599d5d09b3434662c61a0136f8eadb0261fada
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:33:09 2009 +0100

    [buildd-watcher] Split into Buildd::Watcher object

commit e057fce43732dea62b0fe4d70ac41fffda7246ac
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:29:52 2009 +0100

    [Buildd::Mail] Move from buildd-mail to Buildd/Mail.pm

commit ba7c3076aa126af3a1113f30f432c3ac4e1c96e8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:28:16 2009 +0100

    [buildd-mail] Split functionality into Build::Mail object

commit d026d64c190718b2e027b0700ec3550fe0e45b51
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:27:59 2009 +0100

    [Buildd::Base] Include open_log and close_log

commit 5b011e818a5a29fe023966e35c9af4fdb8b9c80d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:17:56 2009 +0100

    [Buildd::Uploader] Move from buildd-uploader to Buildd/Uploader.pm

commit 69fa11e6fbabdf3f6aa94d3ae60f9e63379c8f40
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:15:45 2009 +0100

    [buildd-uploader] Move logic into Buildd::Uploader

commit 7ead14eaeca6207c6f2607953aa141cc3db4f042
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:15:15 2009 +0100

    [Buildd::Daemon] Remove redundant function prototypes

commit 40d6cf166e6f27933e514ded3ec8d429c468bbe1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:05:31 2009 +0100

    [Buildd::Daemon] Move from buildd to Buildd/Daemon.pm

commit beca78d3dcb5f89601414d79da0c209f617656d2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 17:03:05 2009 +0100

    [buildd] Split into object Buildd::Daemon

commit 9df6c9ec196a0940b9c84e2001749ce89d90ac5e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 16:57:53 2009 +0100

    [Buildd::Base] Base functionality for buildd programs

commit cfbdaecd7605a567abfc3edc2d4f637c9a506b7a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 16:19:28 2009 +0100

    [TODO] Use ChrootSetup for sbuild-* commands

commit 6b6b39a788bf299e7e312c45e386293180383f8b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 16:15:25 2009 +0100

    [WannaBuild::Mail] Split new module from wanna-build-mail

commit e3c61bac12e9e86ccf8b2f1de7a6bd650c10ba0a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 16:01:32 2009 +0100

    [wanna-build-mail] Convert into object

commit c000d93b451139ebaffdcb9d216c197225045541
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 16:00:23 2009 +0100

    [wanna-build] Set $| at top level

commit f281c973e21ab03b91fd54889e80e3a22a796f41
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 15:58:35 2009 +0100

    [Sbuild::ChrootSetup] Add comment about root requirement

commit 4c614cc8c38e928fb0ad1469289b5bfda67e3cc3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 15:56:06 2009 +0100

    [debian] Handle migration of sbuild group to a system group
    
    Also remove 50sbuild setup script, which is responsible for
    setting sbuild group ownership in the chroot.  This is now handled
    by basesetup().

commit e0b9953668fab0c34c4b427ea878c3acd6de68b1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 15:47:18 2009 +0100

    [Sbuild::ChrootSetup] Fix permissions on /build in chroot

commit 1eac3bb417af16049102bd102d7e42dd33ef27eb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 15:02:42 2009 +0100

    [debian] sbuild.postinst|postrm: Use addgroup|delgroup --system
    
    Previously, a system sbuild group was not created.

commit eaee2c13510f25c5dcd725b29ffdd6fe348c7541
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 14:58:20 2009 +0100

    [Sbuild::Buildd] open_log: Simplify message formatting

commit 8d3445e46ba4acb308e2a87107e4ca22daf6988d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 14:57:51 2009 +0100

    [TODO] Add option to disable package removal

commit 84e9f32f302982a631151350bca3a9665fdb8d20
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 14:56:49 2009 +0100

    [sbuild-createchroot] Use Sbuild::ChrootSetup during setup

commit ef316bf1e6fbca3f3432f3b65cc192a4e8b6424c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 14:55:16 2009 +0100

    [sbuild-createchroot] Add --setup-only option to skip debootstrap

commit 40eb8e27943878cd3bd4a10cb862819eb3dae651
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 14:53:45 2009 +0100

    [Sbuild::Build] Use ChrootSetup for updating chroots

commit ee71513411468c9363369f08ee17a8dfe8c7e5a8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 14:50:56 2009 +0100

    [Sbuild::Chroot] Use Sbuild::ChrootSetup
    
    ChrootSetup::basesetup is used to set up the chroot.
    
    Also add additional diagnostics and error handling to _setup_options

commit 0fd597b9829f18577daf338511ad06fbff3afb2f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 14:49:39 2009 +0100

    [Sbuild::ChrootSetup] Add new module containing common chroot setup tasks

commit 9a2c1985c5a8f1343ad7bab9325e15ad1bc031ca
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 14:46:06 2009 +0100

    [Sbuild::Chroot*] Return an error if _setup_options fails
    
    This was likely the cause of sbuild-createchroot running apt-get
    on the host system, since _setup_options bailed out prior to
    setting up the environment for split apt usage.

commit be9ab94c7dfa5a74b7a8b3651df904e4444b11f5
Merge: ee19517 fae3496
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 12:16:01 2009 +0100

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit fae34962a3016ac0585fd98b981096f493f1daf6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 12:09:15 2009 +0100

    [buildd-mail] Remove lockfile use for log stream locking

commit 96d6e03977c8ea572e36c7d10414b5f92c87a04c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 12:00:42 2009 +0100

    [Sbuild::Build] Logger ignores fatal signals

commit 686fcc039bee161c3e888afadf8c27bb67d20479
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 11:58:11 2009 +0100

    [TODO] Plan logger removal

commit 89b32ae9fa688aec3bdba6f8e4ceeb6b993e04bf
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 11:56:29 2009 +0100

    [buildd-watcher] Remove use of $main::HOME

commit 2c4f6ef873eff2e9b75a6a4593929a9dd7e67cef
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 11:54:38 2009 +0100

    [buildd-uploader] Remove lockfile use for log stream locking
    
    The locking was fundamentally broken, and it's not needed due to
    using O_APPEND in any case.

commit 60a78d36dc93c6f5bcb49525654031742704b919
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 01:17:53 2009 +0100

    [TODO] Update pending buildd tasks

commit e48de595821d84e9b15299164b43839c4a9d2c6a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 01:16:07 2009 +0100

    [Buildd::Uploader] Use Sbuild::ChrootRoot to run wanna-build

commit 0faabb8c54f9a94eaa93716740f39f1937fbe40f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 01:06:55 2009 +0100

    [TODO] Fix buildd-mail statistics reporting

commit 6094e1a56f031f6f5b1603c892e080072574b880
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 01:06:05 2009 +0100

    [TODO] Update

commit 49d51dc932aaf12b3c31074023a7618c3639f8f4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 01:04:01 2009 +0100

    [Buildd] Logging functions use Sbuild::LogBase

commit fd978e40ece184f1e82df05d4a540e41f58f0f91
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 01:02:57 2009 +0100

    [Buildd::Conf] Add NO_DETACH options to prevent CTTY detaching for debugging

commit c583632b65bd9da4561a042ca7c58fcc2ba5ff2d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 00:58:15 2009 +0100

    [Buildd::Conf] SSH_CMD is an ARGV array
    
    To avoid quoting issues, and to use the Sbuild::Chroot command
    executing, piping and logging infrastructure, execute wanna-build
    within an Sbuild::ChrootRoot context in buildd and buildd-mail.
    
    $sshcmd is no longer specified in the configuration file; separate
    command, user, hostname, options and socket options are provided and
    are used to construct the real SSH ARGV for wanna-build executing.
    
    Buildd::wannabuild_command is used to construct the final
    wanna-build command with all SSH setup and socket options.
    
    Buildd::Conf only sets array variables if set.
    
    Buildd::isin is used without namespace prefix in buildd

commit 68a85e04ff3430faad2cea89c3a89ac79d9147e8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 00:41:35 2009 +0100

    [TODO] buildd needs to remove pidfile correctly

commit 6a09f3211d2ba6b384bf5715078ab973e35b46bd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 00:40:58 2009 +0100

    [buildd] Only unlink pidfile if we are actually a daemon

commit 54c096e7f331ac01e9235d33789fb45060acc0ec
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 00:36:10 2009 +0100

    [TODO] Update buildd items

commit 2c6f4d19b5a33cfc286f244f6377ffd64437f21e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 00:35:31 2009 +0100

    [buildd] Execute commands using Sbuild::Chroot interface

commit 0ad2690c5508ceefedafdaae6b70e9f957d1b82b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 00:15:49 2009 +0100

    [Sbuild::Build] Remove completed TODO comment

commit 3a81b73a7f7c2958f5948874a9208b10cebc04bd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 00:14:36 2009 +0100

    [Buildd::Conf] Add BUILD_LOG_FILE to remove hardcoded daemon.log

commit 6ba9a2350306929916f5b6849ca13fed48ebe2a9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 17 00:04:00 2009 +0100

    [buildd] make buildd pidfile configurable, rather than hardcoded.
    
    Also simplify signal handling with shutdown_fast replacing lamba function.

commit 68c31668f90c045ac71e165e5aa3f563040e048b
Author: Philipp Kern <pkern@debian.org>
Date:   Fri May 15 22:10:58 2009 +0200

    [Buildd] repeat checking for the lockfile is $line is undef
    
    Let's hope that this is the right fix.  I'm a bit unsure in which case
    $line would be undef.  If the file is indeed empty then we're screwed
    and this gets a spinlock chewing CPU endlessly.  Either way we'll
    notice it pretty fast.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit d1f78410f3d5c5ad47de13d06a08759c35d704b9
Author: Philipp Kern <pkern@debian.org>
Date:   Fri May 15 20:37:12 2009 +0200

    [buildd] get rid of --no-down-propagation
    
    --no-down-propagation is the default on the official wanna-build and
    it is simply ignored nowadays.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 81ac71bb41e451d396121b2f86f584e355a478a9
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 12 21:11:57 2009 +0100

    [Sbuild::Conf] Rename $setup_hook to $chroot_setup_script

commit 773d1a8e2c45bb138e3c0ae4d4655c37e7716c02
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 12 20:00:27 2009 +0100

    [man] Document --setup-hook
    
    Also add to example configuration.

commit 6cd6ff09bd1aaeb6a504bf8281664e20ddd1fdcc
Author: Kees Cook <kees.cook@canonical.com>
Date:   Tue May 12 19:53:54 2009 +0100

    [Sbuild] Add --setup-hook to run in chroot before build
    
    This adds the --setup-hook command line argument that allows a
    program to be run from inside the chroot just before the build
    started.  All the scalar build and config settings are exported
    to the environment so the script can examine them to take any
    needed actions.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit ee195178b218e216e6807a3797eef986fb6699a8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 3 00:13:30 2009 +0100

    [build] configure.ac: Add WANNA_BUILD_SYSCONF_DIR

commit 65334f06cdf6f633a7ed86659120b20d6fe96f5b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 19:21:24 2009 +0100

    [NEWS] Document DEBEMAIL change

commit 0b64ae5a0900ac943f54a4cda50d4fa2c45da7dc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 19:16:07 2009 +0100

    [*::Conf] Use eval in place of require
    
    Using require means that %INC has to be messed around with in order to
    read the same configuration file more than once.  It also means that by
    default any invalid variables in the configuration file are not
    reported.
    
    Also move wanna-build configuration back to wanna-build.conf, but using
    the new syntax.

commit 5887ce8efd86e39345ff8914302634382563b609
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 19:08:55 2009 +0100

    [build] Distribute Wannabuild::Database

commit d512f3150113fa61da5c091b2b0aa27dcb1661d7
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Apr 29 23:42:06 2009 +0100

    [Sbuild::Conf] Remove SRCDEP_LOCK_DIR check
    
    This is not needed on the host.  It's already created by the
    50sbuild setup script and sbuild-createchroot.

commit eec387f67daf5dbba1e5aa7d5ea139ba7c66ffb6
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Apr 30 22:16:06 2009 +0100

    [Sbuild::Build] Fix incorrect debug statement

commit a377cccdb7bfe738c2dee5ea4196e40edd243e40
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Apr 30 20:59:03 2009 +0100

    [.gitignore] Ignore generated db.sql

commit b11230c6d41c39110371a87eb60f1c3048008230
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Apr 29 23:41:30 2009 +0100

    [Sbuild::Build] Quote newlines with double quotes

commit 7c031ba8dec7e7473da35c0a822463337e056290
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Apr 29 23:40:28 2009 +0100

    [Sbuild::LogBase] Reopen streams in reverse order to avoid deadlocking
    
    Blocking of fatal signals is needed to prevent the parent of the logger
    getting a SIGPIPE, and to prevent loss of final log messages.

commit 7e0c64243c6fdb2fb1816402fbe6e05b5019190c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Apr 29 23:02:06 2009 +0100

    [Sbuild::LogBase] Don't close STDOUT or STDERR
    
    When reopening, we can't guarantee getting the same fd (1 or 2).
    Therefore just reopen in place.
    
    Redirect whether or not in verbose mode (since we might want to log
    what's printed to STDOUT or STDERR, and the real original fds are
    still open in the logger coprocess; output to STDOUT or STDERR in the
    parent will therefore be redirected to the logger and logged both to
    file and/or standard output depending upon the configuration.

commit fa3da651871b6184518f8140c267a871838c044c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 18:20:02 2009 +0100

    [Sbuild::LogBase] Log to file if NOLOG is not set

commit 9e2c7e13893695f259cbfd3592ca22193c1eaf7e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 15:59:56 2009 +0100

    [debian] Close #520158

commit 5010c78fb4d3306e724aece968add8435e3b0787
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 17 21:18:16 2009 +0000

    [Sbuild::Conf] Don't default MAINTAINER_NAME
    
    Set to $DEBEMAIL only if no maintainer, uploader or key-id have
    been set.

commit ce20dbc27bb76609a4d461c2cfcf7287a9b69177
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 15:39:15 2009 +0100

    [debian] Split common library functions into libsbuild-perl package

commit cbbbee0eb5ddec8635123984d339dfe8aef9f7ab
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Apr 30 20:56:49 2009 +0100

    [debian] Add buildd mail forwarding to buildd-mail

commit bc4b34fcfbd5d4504b21e53a805c9431603d4c63
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Apr 30 20:57:41 2009 +0100

    [man] Add buildd-vlog manual page

commit f5b5db5b4bd01d05c59b04722058a1b9dba16e1f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 14:51:22 2009 +0100

    [TODO] Add wanna-build work

commit 99a0d5b4d932bc65f64682eb270e356c8f5ce1c3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 14:49:42 2009 +0100

    [Wannabuild::Database] New module split from wanna-build

commit bae1d22aab859c20aca301e87b4943dc21b8d8c2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 14:47:30 2009 +0100

    [wanna-build] Move invocation under alternative names to top level

commit 2ad351b786095c54faa65628e66340b034622322
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 14:46:55 2009 +0100

    [wanna-build] Close databases on program termination

commit a2ff64e83be10bd1858690f86ae2a93917ff98bc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 14:40:14 2009 +0100

    [wanna-build] database variables are class member data
    
    'Current Database' replaces $db
    'Databases' replaces %databases

commit 2702c23fc1ca0275585bc541c0831d3f12df17a1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 14:33:41 2009 +0100

    [wanna-build] value hash variables are class member data
    
    'Priority Values' replaces %prioval
    'Section Values' replaces %sectval
    'Category Values' replaces %catval
    
    These may be later specified in the configuration file.

commit 8cead28c95afa2545114a35e984daf47a5b3c46d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 14:22:32 2009 +0100

    [wanna-build] 'Merge Bin Src' member replaces %merge_binsrc

commit e9786b291bccabeede68bd4c1698f640ce3fa352
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 14:21:08 2009 +0100

    [wanna-build] 'Merge Src Version' member replaces %merge_srcvers

commit 2ff05cc3461e02238b088462db72957e63739e9b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 14:19:13 2009 +0100

    [wanna-build] 'New Version' member replaces %new_vers

commit eb86cb89ab7941587c55685a10fe9f61e3eeeb9f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 13:58:53 2009 +0100

    [wanna-build] Date and time variables are class member data
    
    'Current Date' is $curr_date
    'Short Date' is $short_date
    'Current Time' is $ctime

commit 70f17b63d6979a3ab94fa1b749c1e4fb7c775c19
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 13:50:05 2009 +0100

    [wanna-build] 'Mail Logs' member replaces $mail_logs

commit 2a5f9c6a187c7b770fb684527bc328ae12a77b43
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 2 13:45:31 2009 +0100

    [wanna-build] Convert to object Wannabuild::Database

commit ba7c5c326f74f27fc5c4563ecb5699be1363bad8
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 1 19:33:03 2009 +0100

    [Sbuild::Chroot] run_command_internal: Don't create pipe
    
    This avoid incorrect interleaving of stdout and stderr due to
    buffering.

commit 1bfb0f16ec76d5213c04fa35aa064ca7d6aa9c51
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 1 19:33:03 2009 +0100

    [Sbuild::Chroot] run_command_internal: Don't create pipe
    
    This avoid incorrect interleaving of stdout and stderr due to
    buffering.

commit abb50d3e56a81cc8f475ed285728ee575497df4f
Author: Philipp Kern <pkern@debian.org>
Date:   Fri May 1 19:23:54 2009 +0200

    [Sbuild::Build] Correctly create log symlinks
    
    Remove check for log existence, by creating in the logger
    coprocess after opening the log.
    
    Conflicts:
    
    	lib/Sbuild/Build.pm

commit f0c94b435e0b3a3b58ccc099cf0f6ef053993a88
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 1 18:15:35 2009 +0100

    [Sbuild::Build] Correctly create log symlinks
    
    Remove check for log existence, by creating in the logger
    coprocess after opening the log.

commit 66a8aaecf5f57c0ce157ecd85505c855d12d50ba
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 18 10:51:26 2009 +0100

    [Sbuild::Conf] Only set array and hash variables if used.
    
    If set unconditionally, they override the defaults.

commit 01c65919d3589861689735a3f3000c65218ce4c3
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Apr 30 21:30:08 2009 +0200

    [buildd-mail] allow Build-Attempted as a valid current state for retries
    
    Ryan Murray's buildd added Build-Attempted and Built as state.  It is
    perfectly valid to give-back or retry a build in Build-Attempted.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 1e5164c1f6d27248993e352ddcc3a494a5712f53
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 22:38:35 2009 +0100

    [Buildd::Conf] Only be verbose if not detaching from TTY
    
    Previously defaulted to verbose mode if initially attached to a
    terminal before becoming a daemon.

commit e541f3967487dab8b00901f407bd22a3311f8a7b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 22:15:25 2009 +0100

    [Sbuild::LogBase] Default logging function only outputs to single file

commit 2b47351847eb6fede491b5d2b959af2fe2b9cedd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 20:44:06 2009 +0100

    [Buildd::Conf] Default mail addresses to root
    
    This is not useful for a real buildd setup, but will allow the
    package to function until properly configured.

commit 0e1ec956b7938c9a70cb348fa4ede03ddef76305
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 19:29:52 2009 +0100

    [shlibdb] Remove last obsolete sourcedeps components
    
    Manual source dependencies are no longer supported.

commit 97b092fef077e91658977c1406a7a88bcd9c0dae
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 19:23:15 2009 +0100

    [wanna-build-merge-*] Remove do-merge-* references

commit 7b32004591c9f2c73c2d6dbc3dc17adc6fbf3d16
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 19:14:59 2009 +0100

    [buildd-clean-upload] Remove
    
    Obsolete, and replaced by buildd-mail.

commit ad4ec26b9ee5facc29d44ca7c17ed6204ad950d3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 19:10:31 2009 +0100

    [buildd-clean-upload] Use standard options parsing

commit 174e8364e80e8cd6979ef3433de0da3c53cde8bf
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 18:56:52 2009 +0100

    [buildd-vlog] Make it work and distribute with manual page

commit 2d6a48bfe885baa09417d91d0a5b3f2f89acf150
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 18:24:09 2009 +0100

    [Sbuild::Build] Eliminate last uses of main::PLOG

commit 5fb93d1817f285ffe6bce7bb17d757fdf1c382b0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 17:09:45 2009 +0100

    [Sbuild::Log] Split into generic Sbuild::LogBase
    
    Retain sbuild-specific log functionality in Sbuild::Log, and
    move generic logging infrastructure into Sbuild::LogBase for
    reuse by buildd and wanna-build.
    
    Restore --nolog option operation.
    
    Unify logging paths for all combinations of verbose/nolog
    to improve robustness.  All logging is now performed in a
    separate logging process under all use cases.
    
    The logging process uses a user-specified lambda function
    for doing the logging to enable the addition of timestamps
    in a general manner.
    
    Update copyright.

commit 2f9448d7032c45966d2fc6e954ec7f5e6095fe2b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 11:44:57 2009 +0100

    [Sbuild::Sysconfig] Add SSH

commit 867ede36acee623e182de3e598fd3fdc13cdb55d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 13:52:12 2009 +0100

    [Sbuild::Build] Remove username from logs, and create build symlinks
    
    When in user mode, create a $dsc_$arch.build symlink in place of
    the current symlink.
    
    In the log directory, don't embed the username in the log file name.

commit 3c630f43f92c0d6b732f63640a1b639f9ba54a6d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 22:19:38 2009 +0100

    [debian] buildd.cron.d: Enable cron jobs

commit 953c51f699f89f548f17a8268fa59877fa1693ed
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 22:17:46 2009 +0100

    [debian] preinst maintainer scripts are executable

commit 6021424441bfd6f8e5834399062034d366fdefa9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 21:54:13 2009 +0100

    [build] Add all buildd directories

commit 071d71538fa600e9da73a4029ae05b1551346a59
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 21:53:38 2009 +0100

    [debian] buildd.postinst: Set ownership and permissions for all buildd dirs

commit 0df118d59e3d38139844a04bf998bd7f26c2b172
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 21:53:08 2009 +0100

    [debian] Correct getent conditional in maintainer scripts

commit 3db3a9cdc0bb50ead3706bcd352dc25c6f5aba4c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 21:52:10 2009 +0100

    [debian] Update buildd init script to work

commit f1d4f027ac2302066f508f8475cf958070ee3889
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 20:56:28 2009 +0100

    [debian] Install buildd-abort symlink compressed and depend on adduser

commit de7dccdf650751af231c11a887be6c6a5ad2c6bd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 20:42:38 2009 +0100

    [debian] Install all directories under /var
    
    Remove /var/sbuild/srcdep-lock, since it's only used inside the
    chroot.

commit c19f53e9da6a0ff0a7de97d76690b6cd07ca02f7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 20:43:25 2009 +0100

    [build] Install /var/lib/buildd and /var/lib/sbuild

commit 2dfd604c42d98021999bcbbdce04a214462245e3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 20:26:17 2009 +0100

    [debian] buildd: Add maintainer scripts

commit ebfdc2f1e3bc73d768c24e104d9952c2ff6287b9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 20:23:47 2009 +0100

    [debian] sbuild: Update maintainer scripts

commit 40607ec5e5290789b4b30adec3b638e0ef54bd29
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 11:42:02 2009 +0100

    [.gitignore] Ignore buildd and debhelper files

commit a4bdc24376d3ab3a62bafe74abc7935ccd28c6e6
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 20 22:15:33 2009 +0100

    [debian] Restore buildd package

commit 570cb7754c9b68d9e0cbdf9de998587615cdeb23
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 26 14:14:10 2009 +0100

    [Sbuild::Build] Don't fail on apt-get update error in buildd mode

commit 5a4ec6c3bfb27ef13945f4f3234a04a205587229
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 18 11:16:52 2009 +0100

    [db] Add schema table to track schema change history

commit d568b8df546218b0d949772a9650928f0770a07f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 18 11:16:18 2009 +0100

    [TODO] Update

commit 985579b26f5f8efba31fcfb502697a5e92eceb07
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 18 11:14:50 2009 +0100

    [debian] Close #524564

commit 8951e06623f1a4213aa075590ab3b72bf4fdd79a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 18 11:10:05 2009 +0100

    [Conf] Make $HOME visible in all configuration files

commit e79e71f17396841adc42c4f42c3e4167bca61f89
Author: James Vega <jamessan@debian.org>
Date:   Sat Apr 18 11:08:43 2009 +0100

    Sbuild::Conf] Declare $HOME as a global variable.
    
    This allows config files to continue using $HOME instead of requiring
    them to use $ENV{'HOME'}.  (Closes: #524564)
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 552c8ffd7f80c97290c38b461b3a45781aa71e9f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 18 10:52:34 2009 +0100

    [Buildd::Conf] Don't use logger() which isn't available at startup
    
    Calling logger() requires open_log to be called, and this hasn't
    necessarily happened.  Use STDERR for the time being.

commit 3be172608585c4cf745886b0058009ad5a8c46e0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 18 10:51:26 2009 +0100

    [Sbuild::Conf] Only set array and hash variables if used.
    
    If set unconditionally, they override the defaults.

commit 109730daccd51ed3711dfa156c6c77241376ff82
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 18 10:50:17 2009 +0100

    [man] Update sbuild-hold description

commit e89bf63dc538faccf22ab75b0a7837f1cb34cf5a
Merge: d9aae45 4daa9c7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 18 10:32:17 2009 +0100

    Merge branch 'buildd-conf'
    
    Conflicts:
    	lib/Buildd/Conf.pm

commit 4daa9c7281a7508154ea0dc3131f2564f10145f1
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 17 00:42:45 2009 +0100

    [buildd] Reflow wanna-build command running over one line

commit f897d9d84c537eeefb627f0e8c13c6b599861bf9
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 17 00:42:08 2009 +0100

    [buildd] Force complete configuration reload on SIGUSR1

commit beed360c64902a5317522a882680ad3c7b5af5bf
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 17 00:41:21 2009 +0100

    [buildd] Correctly parse PID from buildd.pid on restart

commit 10cbf332c1ef6d436123fb5412391f1ab1cf7890
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 17 00:26:12 2009 +0100

    [buildd] Reimplement configuration file reloading

commit 2b6c544a963467904186d9b899e47db44aea5611
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 17 00:25:45 2009 +0100

    [buildd] Remove redundant use of $conf

commit 3247ed34b00b004d3ea7dc7a4a6ad0a699904f16
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 14 21:46:43 2009 +0100

    [buildd-abort] Remove and replace with a symlink to sbuild-abort
    
    sbuild-abort is a perl rewrite of the original buildd-abort imported
    into sbuild.  buildd-abort is now a symlink to the current
    sbuild-abort.

commit e14fc0031ba3aa97eea32bcfe8322186ae727ddf
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 13 23:11:19 2009 +0100

    [buildd*] Add generic options parsing logic

commit 53fa075c405827550fb5f4da9bd1f8aa46c7ddb5
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 13 23:07:16 2009 +0100

    [Buildd::Conf] Derive from Sbuild::ConfBase

commit d9aae4581757dfbb6dc88002b88163ba521a2e96
Merge: d9359ce 1ba6bf1
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Apr 13 21:14:05 2009 +0200

    Merge commit 'origin/master'

commit 105f9b19842f6d620cfe1e6580a4841eea611d78
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Apr 13 12:20:50 2009 +0200

    [Buildd::Conf] correct a typo in schroot's declaration
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 1bc8766817b738d89bbdf235f254d227a02b183e
Merge: 083a1c4 d9359ce
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Apr 13 12:14:28 2009 +0200

    Merge branch 'master' into buildd

commit d9359ce7f228b4ee0b728ab093eadfe6d7d28131
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Apr 13 12:13:18 2009 +0200

    [buildd] correct invalid function signature
    
    And it only took half an hour of debugging to get to that.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 020576186c6d9d3c3161299be937501f695ebdd4
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Apr 13 11:31:46 2009 +0200

    [Buildd::Conf] fix apt_get, sudo typo; add schroot
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 1ba6bf1f7a5b6c954adc49ee43e5165bdfed5809
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 12 16:44:09 2009 +0100

    [debian] Close #523670

commit 665d2e95e652d6b80ed9a699f9bb503cb27a763d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 12 16:07:49 2009 +0100

    [Sbuild::Options] Remove unused modules

commit d923a3ddeb17390d8cbe5d47fe324fbf6ed72997
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 12 16:07:09 2009 +0100

    [etc] 50sbuild: Only change directory permissions to 02775

commit 4fb36df7b4cf06a9bbbd132be29acc74e7c8e69c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 12 16:06:22 2009 +0100

    [Sbuild::Conf] Don't automatically check for sbuild group membership
    
    bin/*: Add check if appropriate.
    
    Also skip check if running as root.

commit 3bb2408846c378b23fd88749de8422aa1976ab33
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 12 16:01:28 2009 +0100

    [bin] All sbuild programs use generic Sbuild::OptionsBase options

commit 72de42c96d0bcfd8664cee9035f5692c162d53a3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 12 02:49:09 2009 +0100

    [Sbuild::Sysconfig] Use double quotes to allow prefix expansion

commit 8297ccbe5e0ec8056b0fc2f7ddce4ba501a1a393
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 12 02:48:16 2009 +0100

    [WannaBuild::Options] Remove options duplicated in Sbuild::OptionsBase

commit ed6c917524e7b9e264f3185f6a1405bd6bea62a2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 12 02:47:28 2009 +0100

    [WannaBuild::Options] Use Sbuild::OptionsBase

commit fc6b07dffd34691616968dbc6910979b2f688701
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 12 00:28:41 2009 +0100

    [Sbuild::OptionsBase] Generic options parsing base class
    
    Sbuild::Options derives from Sbuild::OptionsBase, which
    provides basic --help, --version, --verbose, --quiet and
    --debug options common to all programs.

commit dcf030bdda12df5018f68ddee9129fb978d23abc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 12 00:02:42 2009 +0100

    [debian] Close #475777

commit af44d7adf82cf51b7392893a5f11f272f7c9ea6b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 23:57:28 2009 +0100

    [sbuild] Avoid warning if no packages given

commit 6a22249bcc44226e8adffbec4236e6e09e45eabf
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 23:56:08 2009 +0100

    [Sbuild::Conf] Move --append-to-version check from Sbuild::Options

commit 623512a078f61e714d6edd33be64c77a76ebd835
Author: Tim Abbott <tabbott@mit.edu>
Date:   Sat Apr 11 23:46:46 2009 +0100

    [sbuild] Add support for appending a tag at the end of version numbers
    
    Signed-off-by: Tim Abbott <tabbott@mit.edu>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 6434176b3279fdc39d96fb6aca2777c33934aca8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 20:00:37 2009 +0100

    [Sbuild::Build] Add callback trigger for status changes
    
    sbuild will rewrite build-progress on status changes.

commit 76bff6f39e965b888265094321f54b3d3c52636f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 20:00:02 2009 +0100

    [buildd-vlog] Use correct build-progress status name
    
    Use "building", not "currently building".

commit 71dc4fcbabf45383eceea8d93d49af2b9bf0bd15
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 19:21:05 2009 +0100

    [build] Move all job handling code from Sbuild::Build
    
    Sbuild::Build only knows how to build one package.  Managing jobs
    is not its responsibility, and is a layering violation.  Push all
    job management, including skipping, error reporting, wanna-build
    givebacks, etc. right up to the sbuild mainloop.  It can
    subsequently be moved out of sbuild into buildd.  Unless running in
    batch mode, none of these features are enabled.
    
    Added a JOB_FILE configuration property for the build status
    reporting.

commit 6598e76dca42b590a5a223997d329e710078d45b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 13:52:12 2009 +0100

    [Sbuild::Build] Remove username from logs, and create build symlinks
    
    When in user mode, create a $dsc_$arch.build symlink in place of
    the current symlink.
    
    In the log directory, don't embed the username in the log file name.

commit 817aea8c6dbf7f953765d42a78eb938ae156bdf0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 13:50:19 2009 +0100

    [Sbuild::Build] Simplify binNMU version handling
    
    binNMU versions are all now computed at initialisation time,
    and we distinguish between the orignal version (OVersion), real
    version with binNMU version added (Version) and real version with
    epoch removed (SVersion).
    
    Old redundant tree checks for binNMU version checking and changelog
    modification have been removed.

commit 8bf803251bd4c9cda914afd67e397b0cc8d20b73
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 12:43:31 2009 +0100

    [Sbuild] Support manually specified build dependencies
    
    Retire parse_manual_srcdeps and --force-depends and --add-depends
    options.
    
    Replace with --add-depends, --add-conflicts, --add-depends-indep
    and --app-conflicts-indep to fully support modern build dependency
    handling rather than the old sourcedeps format.  Append directly
    to package build dependencies.

commit de53710f379b909ee163195383202b4507829cd0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 12:42:23 2009 +0100

    [debian] control: Update to Standards Version 3.8.1

commit 2288703f3b86f469585493b2a684c69da8214101
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 12:39:57 2009 +0100

    [build] Bump version to 0.58.3

commit 6bd7e28467d9973e2d297a2603e4ca3c4d7f1813
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 11:40:06 2009 +0100

    [Sbuild::Build] Move initial setup from sbuild into run method

commit 6baf7247ad7caf8b7361fac40e66adcc0980b961
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 10:50:55 2009 +0100

    [Sbuild::Conf] Move check_group_membership from sbuild

commit 2a35efe5454ae358a27a0d632233e9295f9d8aa9
Merge: 0ed0c0e 6c6c949
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 10:25:51 2009 +0100

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild
    
    Conflicts:
    	debian/control

commit 0ed0c0e05eddb71edb335359ce1d3df02cf513a6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 11 10:24:55 2009 +0100

    [debian] Remove buildd packaging for 0.58.2

commit 083a1c4ee8ce79c55002c68c94a5d4ca3643a670
Merge: fea35f9 6c6c949
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Apr 9 13:18:55 2009 +0200

    Merge branch 'master' into buildd

commit 6c6c9499a2cef75e0a1cc5e00f6765572510fc8f
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Apr 9 13:18:41 2009 +0200

    [Buildd::Conf] correct variable typo
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 24832ce99a8587eeebf1669d90b67f9b2cf42833
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Apr 9 13:13:20 2009 +0200

    [buildd-uploader] use Buildd::isin
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit fea35f9a81a11f1b7c9fe9da5ee2e06dc628a494
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Apr 8 12:58:42 2009 +0200

    Temporarily install a nssdatabases copy script for schroot.
    
    schroot will already provide a means to copy dumps of the NSS databases
    into the chroot in its next revision.  Sadly this is not available yet
    for use on the d.o boxes and so we resort on a temporary copy of the
    script with configuration in `/etc/sbuild'.
    
    We should take care of applying http://www.dpkg.org/dpkg/ConffileHandling
    properly to get rid of this as soon as we can depend on a backported
    newer version of sbuild.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 04f88f5a0e243fa1ab45c76749dc2f21df03f460
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Apr 8 13:07:09 2009 +0200

    [debian/sbuild.install] install all schroot scripts we find
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 7492f3f8314fbf43336c13e4354fc25e65654707
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Apr 8 12:13:09 2009 +0200

    [buildd-mail] use arch and HOME out of Buildd::Conf
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 355c9d4c7c118914b84ee657fd62e0f83035ebb1
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Apr 8 12:10:28 2009 +0200

    [Buildd::Conf] use "$arch" instead of "arch" in $wanna_build_dbbase
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit c93104cbafb535fdb910aefd755d82f5cada4086
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Apr 6 16:51:59 2009 +0200

    [Sbuild::Build] fix 95538e9 by using localtime somewhere else
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 9e6f004149293a7089436d67b7dbaaff4e03279c
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Apr 6 16:48:35 2009 +0200

    [buildd-mail] import binNMU_version out of Sbuild
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 002d69e3b29896eca96ffa45e0052e583f7b4b63
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Apr 5 14:46:58 2009 +0200

    [debian/control] buildd, wanna-build: depend on exim4
    
    exim does not exist anymore, so use exim4 as default alternative instead.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 707839ae1445a4effbfc20214e5cb45650fd1ee9
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Apr 5 01:11:24 2009 +0200

    [buildd-watcher] avoid warning about the (valid) usage of exec
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 95538e909d26151fff7071bbe3dca78ebeda7467
Author: Philipp Kern <pkern@debian.org>
Date:   Sun Apr 5 01:09:11 2009 +0200

    [Sbuild::Build] display a valid "finished at" time in any case
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit c07c294aa7a2eef29f7ca0faf70b3db7a5da5fee
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Apr 4 23:41:20 2009 +0200

    [buildd-watcher] use Buildd::Conf
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 3f59513837683d3a35c4169c086e32dae74bf234
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Apr 4 19:37:20 2009 +0200

    [Buildd] lock_file: initialize optional nowait if not set
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit b87b5581292b5d105fb409b28a596ecda70265f6
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Apr 4 17:43:32 2009 +0200

    [Buildd::Conf] update scalar ref correctly
    
    Thanks for Stephan Gran to telling me how Perl works.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 2de585d82f245c6eb9503d679e53db6539a379f3
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Apr 4 17:35:59 2009 +0200

    [buildd-mail] check if content-transfer-encoding is present at all
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 88b567ea7cdd7404abb8c8bb65aed7cc56d06635
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Apr 4 17:21:48 2009 +0200

    [buildd, buildd-mail, Buildd] move isin to the Buildd module
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit fd90e484d08f5325a87b8de3181f716181760bfd
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Apr 4 17:11:15 2009 +0200

    [Buildd::Conf] fix global configuration file location
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 6248bdcb731f14f9383ccd9774f1dcb02a438850
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Apr 4 17:07:08 2009 +0200

    [buildd-mail] use Buildd::Conf
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit d211c2284ebefc0916a6a70d6eda1d222b48b6e0
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Mar 18 12:54:14 2009 +0100

    [buildd-uploader] initialize the configuration
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 8b045b6a2a01842e3e06ee43ede1ff8bb2e4b543
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 29 23:03:51 2009 +0100

    [debian] Install example buildd crontab

commit 0f1b86e987d15d790c92a8305e536b6f204c6f78
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 29 22:22:04 2009 +0100

    Sbuild::ChrootInfoSchroot] Run schroot in C locale
    
    This avoids localisation of the output which breaks parsing.
    This was preventing the detection of chroots in some locales.
    
    Closes: #520755

commit 5eba1b2cb805b26ac3f03d9a4f493a14a000795b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 29 22:06:30 2009 +0100

    [etc] 50sbuild: Don't create user home directory in chroot

commit 608fa5556d8a268d6221e7213513cb09225a5646
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Mon Mar 23 22:04:47 2009 +0000

    [db] Add a "type" column in binaries, to specify 'deb' or 'udeb'
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit efc2393a7cd8d9798224004540980e00b0c63d71
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Mon Mar 23 22:04:07 2009 +0000

    [db] Fix name of the build_status_history table in update_history()
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 9b0eab3e3bfd94716c3fe9a775e339523d3105f0
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Mon Mar 23 22:03:24 2009 +0000

    [db] Drop NOT NULL constraint in build_status_history.builder
    
    The "builder" column can be NULL in build_status, so it should be
    nullable in build_status_history as well.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 44d7f216d9830bfa78e01eb1a477b3acaf17ce01
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 21 02:00:09 2009 +0000

    [buildd-mail] Remove redundant assignment of $main::HOME

commit 9ac1ba29f5b32401f15c4c93023b3a3ecda358cb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 21 01:57:33 2009 +0000

    [buildd-watcher] Correctly prototype ST_MTIME()

commit 9279d84ffa67c5eb9dd8de24124cff6d469fefc5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 21 01:53:16 2009 +0000

    [bin] Don't add $main::HOME/lib to @INC
    
    Now that buildd is installed into standard system paths,
    there's no need to look in $HOME/lib for perl modules.

commit 67ac2279858f30ea80396aa118ed4fde079d66ea
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 21 01:47:31 2009 +0000

    [buildd-mail] Remove unused $main::keep_running

commit 538492d130cee21bf1af18d0f8f26b57df540c69
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 21 01:32:09 2009 +0000

    [bin] Remove hardcoding of PATH in executables
    
    Now that all of the wanna-build and buildd programs are installed
    into system paths, there is no need to add $HOME/bin and
    /usr/local/bin to the path explicitly.
    
    Also remove unnecessary setting of PATH in Buildd.pm.

commit b6902ec5a588455529fbadbd50fa9cb1efe0ac24
Author: Cyril Brulebois <kibi@debian.org>
Date:   Thu Mar 19 23:05:05 2009 +0000

    [man] sbuild-setup.7: Create symlink in /etc/sbuild/chroots
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit eab82c63466d4b2dd87fcf6320b455a02e552432
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 19 21:47:12 2009 +0000

    [debian] Bump version to 0.58.2-1

commit 527eb10d805aed18415204440dc7f436f5d8e60c
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 19 21:45:28 2009 +0000

    [debian] buildd: Add buildd man pages

commit 4047da073b7154c08e67329af68cb27ab300e0af
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 19 21:44:30 2009 +0000

    [man] wanna-build.1: Reflow paragraph to avoid leading dot

commit 570ae72303c3885a47e1b68f6acc619d2d59a973
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 19 21:44:03 2009 +0000

    [man] buildd-mail.1: Document buildd-mail-wrapper compatibility

commit 97048f35ad4d878685677f5881c397dabe826173
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 19 21:43:32 2009 +0000

    [man] Make buildd-mail-wrapper.1 a symlink to buildd-mail.1

commit 04e75e8db6386a22a318554ab056dd4935757665
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 19 21:30:33 2009 +0000

    [man] Add skeleton buildd manual pages
    
    Document buildd, buildd-mail, buildd-uploader and buildd-watcher.
    Remove old buildd and buildd-uploader manual pages.

commit 042c634488cf4c9f4be4a658c8a8a334c6f6fa3c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 18 23:40:17 2009 +0000

    [sbuild] Use new hash-based Sbuild::Chroot::run_command
    
    Call run_command using hashref rather than old-style
    multiparameter function.

commit d6fda107b959fe1bd076a5483f99b6d8bf363578
Merge: 9da2406 d235069
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 17 23:44:26 2009 +0000

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit 9da2406200b58d8e8c0c2dffd511def4d38ded94
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 17 23:43:50 2009 +0000

    [sbuild] Remove last use of get_apt_command
    
    Use run_apt_command in place of removed get_apt_command
    method.

commit d23506952cddaf20ea84c059b722c104b23e68b5
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Mar 18 00:01:09 2009 +0100

    [buildd-uploader] use the correct Buildd::Conf module
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit e665a7d77e3034f4a42bee3fe06562a6ded18bf2
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 17 23:48:39 2009 +0100

    etc/buildd.conf: update defaults
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 9f0ace298c84ee4d62b0a67ff1f681b1d85bea96
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 17 23:48:16 2009 +0100

    debian/rules: remove handling of config.{guess,sub}
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 2295de78e97545de802e39521f2aa8580dd9ac95
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 17 23:41:38 2009 +0100

    [Sbuild::Build] fix log subject to state arch if set
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit fca9bfbdc1c20e3b345f7be6063a2ea39b153dd4
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 17 15:17:45 2009 +0100

    [buildd] initialize the configuration and check take_from_dists
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit d4caee7db2e32fb60d764de476c0f1b420b1f056
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 17 15:17:36 2009 +0100

    [Buildd::Conf] do not set a default for take_from_dists
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit c22428f7f52a1eee2dc6ac4bf18a46ec8dde7667
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 17 17:51:49 2009 +0100

    configure.ac: remove checks for C/C++
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit f73f50dfdfb2d11e331c4d2cc6e48a4ec492622a
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 16 22:08:25 2009 +0100

    [buildd] drop POSIX::SigSet usage
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit cc46898dc11d1b7e7960c708ca12b4f6a8659b6c
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 16 21:54:35 2009 +0100

    [Buildd] logger: remove spurious regexp match usage
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit ea0564c5f65d7ef8cc88f64edf25fd8d62a4fffe
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 16 21:36:53 2009 +0100

    [buildd] get rid of more configuration file loading stuff
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 0ae8aab39edec0a90dfed963e57f8744240288a3
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 16 19:27:43 2009 +0100

    bootstrap: drop the libtoolization
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit f82d92981b1aabc0637afbabed3329ee9e209389
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 16 19:26:17 2009 +0100

    [buildd] fix configuration lookup by using Buildd::Conf instead of Conf
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 1e31da431bbc9f484f8502c9c22f40318d0592b6
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 16 18:39:57 2009 +0100

    [buildd, Buildd::Conf] move check_reread_config into Conf module
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 0a9e4ec2d0006bac581a4b49149ca85bea1f2395
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 16 13:13:39 2009 +0100

    [buildd] call logger instead of writing to PLOG
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 825ec61ad5ae172aa0af7ac3dc0c9d5a028b62f2
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 16 12:56:08 2009 +0100

    [buildd] remove unused DSC variable
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 0de309578ee2cadf13099b3f626f3efb11a82c5e
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 16 12:51:19 2009 +0100

    [Buildd] do not import IO as it is not used anyway
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 7ce72856c0800672e7fb5c0be5e3d8df958c4eb5
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 16 12:40:03 2009 +0100

    [buildd] put all weak_no_auto items to the back of the dist todo
    
    The former syntax was wrong.  Either we want @lowprio_todo or
    $lowprio_todo[0].  I opted for the former.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 7579c33a1c59e73db6b826afc8a9e205cb59451d
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 16 12:37:30 2009 +0100

    [buildd] copied isin from Sbuild and removed that module import
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit fcc11913118fe4688b003309131b8d45a4220925
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Mar 13 14:12:13 2009 +0100

    [buildd] use $arch from Conf module
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit e43ce27e8f4fe137fb19c6da69866eee76aa1084
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Mar 13 14:11:55 2009 +0100

    [Buildd::Conf] add $arch configuration variable
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 131dd5a162be5f7cfc25888cf44267a34034dc28
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Mar 13 14:10:59 2009 +0100

    [buildd] Do not attempt to unlink buildd.pid if $pid is undefined
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 81e3ce2a2085ea6aecc06e0dbfa52531b4d5e22e
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Mar 13 13:42:49 2009 +0100

    [buildd] Fix get_changelog by calling schroot instead of host's apt-get
    
    We rely on schroot's presence now and also on the standard form of
    naming the chroot (i.e. $dist-$arch-sbuild), which needs to be present
    at least as an alias for this to work.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 431453dc094b79942c051d9bd9cc82ea7137de5d
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Mar 13 13:18:53 2009 +0100

    [buildd] Remove apt cache updating through host apt-get
    
    Using the host apt-get only works if the binary format of the cache has
    not changed and especially not if the host architecture differs from
    the one of the chroot.  sbuild will run apt-get update if told to do so
    before building anyway so we could just delete the lines responsible
    for this.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 1693bda26cc0e5e616a6e1744f882495835083d8
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Mar 13 13:16:06 2009 +0100

    [debian] Build a buildd binary package
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 89f6650390b1d4cd8ab0e751132f0ff3ee89501b
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Mar 13 12:35:17 2009 +0100

    bin/Makefile.am: install buildd binaries and handle buildd-mail-wrapper
    
    Only install buildd, buildd-mail, buildd-uploader and buildd-watcher for
    now.
    
    buildd-mail-wrapper disappeared so symlink it to buildd-mail because the
    wrapper will still be in .forward files on the buildds.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 4db7d8561d9a622f3cd904a8ef0435ef205b5510
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 10 15:17:36 2009 +0100

    [buildd] pass --apt-update to sbuild
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit d6a046c79b33117e52cdf5da9d1aca7d96084850
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 10 15:17:08 2009 +0100

    [Sbuild::Build] Log which positive and negative dependencies were tried
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 15476c78ba2648e41ed6e9626825032451384bcf
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 10 15:06:07 2009 +0100

    get rid of sourcedeps helpers
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit fd063bdd434854740352f77029cd9b0c2c3012d7
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 10 15:01:03 2009 +0100

    [Buildd::Conf] increase default min_free_space to 50M
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit a4f06cb73ed8b84b66e48e80199800e6ee91005d
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 9 23:51:26 2009 +0100

    get rid of buildd-mail-wrapper
    
    buildd-mail can be called directly.  The packaging should ensure a
    symlink from buildd-mail-wrapper's old location to buildd-mail,
    though.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 07908f17d43377d1d05f1abda292b7951b5585c6
Author: Philipp Kern <pkern@debian.org>
Date:   Mon Mar 9 23:38:13 2009 +0100

    [buildd-mail] remove own queue handling
    
    The queue handling could be done by the MTA invoking buildd-mail
    nowadays.  buildd-mail should just process the mail it gets feeded
    on STDIN.  It will still lock the daemon.log, however.
    
    This patch also gets rid of two unused functions: dist_cmp and
    dist_list_ge.
    
    Based on a patch by Bastian Blank <waldi@debian.org>.
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 1d554a1d8d5aa8a581c6aa1b581e78f7776c1951
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 12 21:41:45 2009 +0000

    [Sbuild::Conf] Don't require FAKEROOT binary on host system
    
    Because the FAKEROOT binary is only required in the build chroot,
    it doesn't make sense to check for it on the host system.

commit f118a69798cce4b0f1bf43b8e4716f820c184b7d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 12 21:41:26 2009 +0000

    [build] Bump version to 0.58.2

commit 5ba6126dd2abe41448cb71cbea87a209c86b1349
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 11 23:19:34 2009 +0000

    [debian] Close #519276

commit 508cec92f2b85c1cab6df7301d859b49cececa7b
Author: Francois-Denis Gonthier <fdgonthier@kryptiva.com>
Date:   Wed Mar 11 23:16:08 2009 +0000

    [sbuild] Don't erase default chroot environment
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 3f15b8166d4f94dea041fbb837312b6b7f83577b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 11 22:49:18 2009 +0000

    [debian] configure sets DCMD, SCHROOT and SUDO explicitly.
    
    Closes: #519097

commit 04d7105f14309bce23c6adb99152719dbc8846c6
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 11 22:44:48 2009 +0000

    [build] Bump version to 0.58.1

commit b8e50ae888d7a15a0e6c6a5efc53d2d566845734
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 21:54:33 2009 +0000

    [debian] Install NEWS

commit a492624655d0ddd107b8c3e1804d8f3a9e7aa424
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 21:53:13 2009 +0000

    [debian] Update NEWS and change distribution to unstable

commit 5209a862ef5d1d8f98fd520e90a9bfae2fa82c88
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 21:51:53 2009 +0000

    [man] Add wanna-build-statistics manual page

commit 0e2041c5b79614c40aff4ae0d897beb14285e2a1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 21:51:15 2009 +0000

    [NEWS] Document additional user-visible changes

commit b8272e23af0f6a9d8cb2506c491bcc38d3a67bb2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 20:57:10 2009 +0000

    [man] Add wanna-build-merge-packages manual page
    
    Also add symlink for wanna-build-merge-quinn.

commit 6f6b9dd1636a9a18493b8f4ebcc2d829aa366f52
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 20:46:41 2009 +0000

    [README] Remove README.mail, documented in wanna-build-mail.1.in

commit 71dbec1b3e27a751f03044aab58da895899deda8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 20:44:46 2009 +0000

    [man] Add wanna-build-mail manual page

commit 9e6d2aaa3ff7485ba951c47b80e60d9aaee9a691
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 20:19:07 2009 +0000

    [build] Install WannaBuild::Options

commit 3d90c58ad548d9c73ba5684be398f03ecf3b9ed9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 20:18:29 2009 +0000

    [man] Add wanna-build-catdb.1 manual page
    
    Add symlinks for wanna-build-catgdbm and wanna-build-catmldbm.

commit ecba364e577a0606b78362b8374bf9811200efca
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 19:54:25 2009 +0000

    [wanna-build] Add missing parentheses

commit 55f4104f17c6a0100a00783d6809a4bea683ef4a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 19:53:52 2009 +0000

    [wanna-build] Make $ctime global

commit 5274e736b660eb58d13017cd99e47d63c2275a0e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 19:43:43 2009 +0000

    [debian] Don't configure with --with-postgresql
    
    debversion code has been moved to postgresql-debversion.git.

commit 034ee591d4bda54da18c865bf088e77ea4a9c914
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 19:41:31 2009 +0000

    [debian] Use dh_prep in place of dh_clean -k

commit 54282ed31e530558463b59687e07d311c9a5b5ba
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 19:28:39 2009 +0000

    [db] Install Sbuild::DB modules

commit e7f1a4dee9b5f6f769b305231c940b57f8e597fa
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 19:13:09 2009 +0100

    [db] Populate the suite_arches table
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit e06ce9d5ca4985ed28f0d44ea2463432ba7a4337
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 19:13:08 2009 +0100

    [db] Use long VALUES lists instead of separate INSERT statements
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit aaf0e7c0424adc2b16b3a7649e953c8a5adbe687
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 18:42:49 2009 +0100

    [db] Delete extra comma in build_status_properties

commit 45e24615beef6724832e974603ab3a0c93b689eb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 18:08:08 2009 +0000

    [build] Install SQL database creation scripts
    
    - db.sql is generated to use the correct paths for sourcing files.
    - SQL files are installed and distributed correctly.

commit 56ef2c201726579dd0e77ecdbc7b0a98d4c89284
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 16:47:12 2009 +0000

    [debian] control: wanna-build recommends postgresql-8.3-debversion
    
    Needed for the debversion datatype install script sourced by db.sql.

commit b27487008883dbb7e7ac8824d9a73bdca636dd14
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 16:36:29 2009 +0000

    [db] Split database creation into separate files
    
    archive-data.sql: Initial data for archive tables
    archive.sql: Tables for archive information, Packages and Sources data
    build-data.sql: Initial data for build status
    build.sql: Build status, history, logs and buildd information
    db.sql: Sources all other files
    functions.sql: Functions and triggers

commit 065e54512f67b6491945d65ec5f5595524bbcdef
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 16:24:30 2009 +0000

    [db] language.sql: Split procedural language setup from db.sql

commit ac4acf683741eb2602fc0c6a383d4df9717723a1
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 15:59:17 2009 +0000

    [db] set_ctime: Add missing semicolon
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 7c538b99dd490295e93a7d38c1bc56bcbad033d2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 15:52:50 2009 +0000

    [db] install.sql: Split database creation into a separate file

commit ed1d0504b1457b081d528fbf9f36237691fa66a9
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 15:30:07 2009 +0000

    [db] Create a "suite_arches" table to list the architectures in a suite
    
    The database schema was missing a list of architectures in each suite.
    This is needed, because one can't simply use the "architectures" table
    to decide what arches to act on, eg. when importing packages
    information, or when creating a web interface: that table may contain no
    longer active architectures (which are kept around for build_logs), and
    many actions really need the list of architectures specific to a suite.
    
    This commit introduces a "suite_arches" table, with a relation of what
    architectures are available in each suite. It also adds foreign keys
    towards this table from suite_binaries and build_status; this way, it is
    ensured that dropping an architecture from a suite will clean up those
    tables from no longer relevant entries.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit a1d33bd7650f8c7ad1afa6ad4698d92f74cd7135
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 15:23:49 2009 +0000

    [db] Add triggers for build_status
    
    Triggers keep the ctime column up to date, validate the
    bin_nmu field and insert the record into build_status_history.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 0d0dbc8b27f7615d83a5b2393ae70c5b98f7141c
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 15:14:55 2009 +0000

    [db] build_status.ctime defaults to 'epoch'
    
    Value will be set with a trigger.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 3925f5712b726ec947cc10665c1c8cfbb389623d
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 15:13:50 2009 +0000

    [db] build_status.builder can be NULL
    
    This allows changes to be made by people as well as buildds.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 9703826459a9ff4e800acdf7d76e8f2d67685882
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 15:12:37 2009 +0000

    [db] Add bin_nmu column to build_status and build_status_history
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit b099ba631062c23a26ca2c5558f5b0d1d3d255bb
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 14:58:53 2009 +0000

    [db] Drop index on build_status.ctime
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 5e73ac9b178fbe6724b2988579775dbb64c705e2
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 14:57:25 2009 +0000

    [db] Rename build_state.state to build_state.status
    
    Also rename in build_status history.
    Reformat build_state.user.
    Update comments.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 2731512af04222f58a0b3f7af5b2b95cc1f30558
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 14:48:14 2009 +0000

    [db] Remove job id number from build_status and build_status_history
    
    Also update build_status_properties to use the new primary key
    of build_status.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 253d6d0514657eb69c006b785abbd2888843a70f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 7 19:35:43 2009 +0000

    [db] Rename job_states to package_states (update comments)

commit b15007cd6a3273162315f54d3b02b87aa46a8513
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 7 19:34:23 2009 +0000

    [db] Rename job_states to package_states

commit a6075a18c1a05499d68f57623ab296b21a02c87b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 7 19:31:41 2009 +0000

    [db] Duplicate build_status as build_status_history
    
    This will store a history of the changes in the build_status
    table.  Currently, it retains all of the constraints, but
    future commits will drop referential integrity on some of the
    columns.

commit 6d87fa6a3b94f15d945ecd53bc87c2098ad75fec
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sat Mar 7 19:10:52 2009 +0000

    [db] Rename build_jobs to build_status
    
    Also rename build_job_properties to build_status_properties.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit d30083905929c2a1bbf9123a74f912f93ccac819
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Fri Mar 6 07:54:27 2009 +0100

    Create indexes for (pkg_name, version) in suite_{sources,binaries}
    
    These two indexes make faster joins between sources and suite_sources,
    and binaries and suite_binaries, since the join key will be indexed on
    both sides. The difference is particularly noticeable for the binaries,
    since suite_binaries has more than half a million rows.

commit 4d30d593bd3348d0e7529ddd82c9275634c9627c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 7 17:55:34 2009 +0000

    [db] Add missing semicolon
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit c73f479b7ab766b46a4f4f96d8a77ad8125f56bd
Author: Adeodato Simó <adeodato@debian.org>
Date:   Thu Mar 5 23:15:37 2009 +0000

    [db] Rename "version" to "source_version" when it refers to source packages
    
    Rename all columns named "version" to "source_version" when they
    refer to the version of a source package. This is done to ease JOIN
    statements, making it possible to use NATURAL JOIN or JOIN ... USING()
    between source and binary packages.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 3c0e9372aad31e507bb57dd47b149f90a81b731d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 5 22:34:56 2009 +0000

    [Sbuild::Sysconfig] Fix typo in %programs export

commit 486858fdd58b1d56af9c49defd32be626514d65d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 5 22:30:31 2009 +0000

    [Sbuild::Build] uninstall_debs: Don't use uninitialised $output
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 32bf3914b992430bea8866ae0739b354740b4640
Merge: 7ca714b 641feb8
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 4 23:53:34 2009 +0000

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit 7ca714b6f6771339812bab91f999064dc5be6945
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 4 23:53:10 2009 +0000

    [build] Remove DISTCHECK_CONFIGURE_FLAGS

commit 7efcaa609880204fb8d943dadf5cf6bbb41cc5cd
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 4 23:51:00 2009 +0000

    [debian] Remove postgresql-8.3-debversion
    
    rules: Comment out binary-arch commands
    control: Remove package and build-dependencies

commit e749b27e3e722712ca3d393f41161aa0151d3362
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 4 23:47:23 2009 +0000

    [db] Remove debversion
    
    debversion has been split into a separate git repository
    (postgresql-debversion).

commit 641feb85078e18440b4b98116d1eaa3dbdc46c66
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Mar 4 14:11:36 2009 +0100

    [Sbuild] declare charset and transfer-encoding in sent mails
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 0a6140e14bc8ea4e5ef006f487d14e0814a0b3c5
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 3 23:56:47 2009 +0100

    [Sbuild::Conf] obey $arch in .sbuildrc
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 07a9756f553b370ab9ee96208e797cbb16316e96
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 3 23:41:36 2009 +0100

    [build] lib/Sbuild/Makefile.am: add ConfBase.pm
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 7e91bb9dc7dc49ea86ae33ea3f8b9d0cfb3985fd
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 3 00:26:23 2009 +0000

    [debian] Correctly package postgresql-8.3-debversion
    
    debian/rules calls configure with --enable-postgresql, and
    adds a functional binary-arch target (previously was for
    arch-any only).

commit 7bf8c497551ab8bf934526638870682254016b8d
Merge: e620116 2415b95
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 2 23:22:18 2009 +0000

    Merge branch 'wb-backend'
    
    Conflicts:
    	debian/changelog

commit 2415b957d6f64659cc644d23da93e3751ff2f9c1
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 2 23:20:13 2009 +0000

    [debian] Add postgresql-8.3-debversion to changelog

commit fe2104f1083535ed9bfeddc1fd2c9c237b6bdc15
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 2 23:16:07 2009 +0000

    [debian] New package: postgresql-8.3-debversion

commit 5d6e581e396cc23ef2357c83375df8d585a29a23
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 2 23:15:29 2009 +0000

    [build] Add support for conditionally building debversion type

commit e62011685f1a35419691aa1b39efc0dfc3f40030
Author: Luk Claes <luk@debian.org>
Date:   Sun Mar 1 16:17:32 2009 +0100

    Set sectval to -125 = 165 + 40 (highest used value) if used section is not in the list

commit 92efcaae42e708f1da87e19593233b319d683b5d
Author: Luk Claes <luk@debian.org>
Date:   Sat Feb 28 15:35:54 2009 +0100

    Add 'a'ge before 's'ection

commit 95b9263713cf9748affc6b0585d1ccab97528a20
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 28 13:03:26 2009 +0000

    Add .gitignore for db

commit 71a83bd9e0dd230374c970402371c8d2fd3d8e5b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 28 13:03:02 2009 +0000

    [db] Add PGXS Makefile for out-of-tree building

commit 20549cb13d20ad07c182ab546e0a5b02540d2707
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 28 13:02:05 2009 +0000

    [build] lib/Sbuild/Makefile.am: Add DB to SUBDIRS
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 369d90a58bdb1b8ada295c1f4158185b1c1d528b
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sat Feb 28 11:06:36 2009 +0000

    [db] Fix the primary key in the suite_binaries table
    
    The primary key in "suite_binaries" was a composite key of (pacakge,
    suite), but it is obvious that (package, suite) has to be duplicated
    once per arch: add "arch" to the primary key.
    
    Additionally, the UNIQUE constraint is unnecessary: with (package, arch,
    suite) being unique already due to the primary key, there'll be only one
    version for each combination.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit dbfda1cbb8dfdecf54d3f2b84cd627bac5756d63
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sat Feb 28 10:58:08 2009 +0000

    [db] Add "oldstable" to the suites table
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 5c6e57be5ade416af970cc8f32291c41ef3d3ea2
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sat Feb 28 10:57:48 2009 +0000

    [db] Add "hurd-i386" to the architectures table
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 7afc324c2a8612e7b32bb2345b6ccbf08ae5ef4c
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sat Feb 28 10:57:00 2009 +0000

    [db] Add a new value "skipped" to the build_log_result table
    
    The build log database on buildd.debian.org shows this state was in use
    until 2004-06-24 (and contains around 1150 logs in this state).
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 7e8521a088ee7ce48b843969558a6386833a23e0
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sat Feb 28 10:20:35 2009 +0000

    [db] Update name of constraint for build_logs.result to match column name
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit ecea578ab208c4b63812f67012718e30dacb4229
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 28 09:36:50 2009 +0000

    [Sbuild::Options] --make-binNMU doesn't reset binNMU version if already set
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit da9d8c46857a2e003f26427fbdba7fbb0200372a
Author: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>
Date:   Sat Feb 28 09:33:00 2009 +0000

    [man] Fix WANNA_BUILD_LIBEXEC_DIR
    
    WANNABUILD_LIBEXEC_DIR got renamed to WANNA_BUILD_LIBEXEC_DIR
    
    Signed-off-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 360f4e3d70ff2c7567e640abee7c936c777cbb2f
Author: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>
Date:   Sat Feb 28 09:31:36 2009 +0000

    [build] Fix WANNA_BUILD_LIBEXEC_DIR
    
    WANNABUILD_LIBEXEC_DIR renamed to WANNA_BUILD_LIBEXEC_DIR
    
    Signed-off-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit a0f1083f6804e7e05254b41057ca528fadca5113
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Feb 27 22:24:45 2009 +0000

    [WannaBuild::Options] Use Sbuild::DB::Info

commit 88a42fa05f67f6a8606a83adda28a76413cac19c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Feb 27 22:23:58 2009 +0000

    [Sbuild::DB::Base] New common base class for database backends

commit 5d5e0ce6d89cf560cf5c67a9c8a509b1224c26da
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Feb 26 19:40:41 2009 +0000

    [Sbuild::Options] --make-binNMU doesn't reset NMU version to 1

commit 890de1e0cec0e9b9a25f207a95a475bda7e56345
Author: Kees Cook <kees@outflux.net>
Date:   Sun Feb 22 11:04:36 2009 +0000

    [debian] Close #505747
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 1509eca85db68a7b762d06ae28c0555880eee9a9
Author: Kees Cook <kees@outflux.net>
Date:   Sun Feb 22 11:02:09 2009 +0000

    [Sbuild] version_compare: Handle =*=PROVIDED=*= by never matching
    
    If we're trying to compare versions against a provided package,
    always return "not satisfied", forcing an install attempt.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 82bb1190f20da3f5fc3fd93e8b08b8dd0539ef5d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 31 11:25:03 2009 +0000

    [db] Default to using the public namespace

commit 2c9a523e32089d6100d8f5176ec7e8cbf46c7da0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 31 10:49:39 2009 +0000

    [db] Update debversion copyright and quote LANGUAGE

commit 28bd34d2cc73ff29ef2b37d59a83a8481923c737
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 26 22:01:54 2009 +0000

    [db] Update copyright notice
    
    Add Adeodato Simó and update dates.

commit 4861ff29c0a7945017d119a28d4ba606a53e3846
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 22:00:43 2009 +0000

    [db] Add table to list the admin(s) of each buildd
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 8d73c33722f8fef06ee02a1554f1b76ee974c18a
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:59:14 2009 +0000

    [db] Add an "arch" column to the builder table
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 911aab0a77b0059718312da2e2c31793f97cad15
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:58:27 2009 +0000

    [db] Prefer column names derived from table name, and drop _name suffix
    
    Instead of using a column "name" in every table, use a name derived from
    the table name, eg. "source" in sources and "arch" in architectures. Also,
    when creating references, don't name such columns with a "_name" suffix;
    instead, just use the name of the referenced column if possible. (It is not
    possible, for example, in binaries, where there are two version numbers.)
    
    With this, it is possible to create queries more easily, and natural joins
    are possible.
    
    Incidentally, this commits removes the long listing of package section,
    which is unnecessary given that they will be auto-inserted via a trigger
    when populating the sources and binaries table.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 42ec770e8f1c7397b43a848d65f255a7c7f72a73
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:53:48 2009 +0000

    [db] Add a build_logs table to store a list of all available build logs
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit c79e87a6e7735a6be73a8730dba1aa5bce216b07
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:49:46 2009 +0000

    [db] Make "uploaders" be a one-to-many mapping, rather than a single value
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit ce831262b4b0e081f4c56196eec20ffac3c5a8cc
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:48:02 2009 +0000

    [db] Distinguish between arches with buildds, and the Architecture field
    
    Previously, the architectures table was holding real architectures like
    "alpha" and "mipsel", and other values like "any" and "all". However, the
    architectures table is referenced from places like build_jobs and builder,
    where only the former group makes sense.
    
    This commit splits the two groups, keeping the architectures table for the
    real architectures (or, rather, architectures supported by each wanna-build
    instance), and creates a new table package_architectures for values found in
    the Architecture field of Sources/Packages files.
    
    Additionally, a trigger is created to populate package_architectures upon
    insertion on source_architectures and binaries. It is not feasible to
    populate this table in advance: at the time of this writing, there are 38
    different names in the Architecture field in Sources.gz, with more appearing
    in an unforeseeable manner.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit dd2fefc430dcdc79061c180e3bc04475808f8999
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:44:58 2009 +0000

    [db] Add a "value" column to package_priorities so that they are sortable
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit fd046185cb8c69cee92a7fdf25e245bed231d01c
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:43:42 2009 +0000

    [db] Add an "address" column to the builders table
    
    This column is meant to store the address of the buildd software in the
    remote machine, to which eg. ACCEPTED mails from dak should be sent to.
    
    It should be stored in the database so that there is no duplication of
    information between the DB (list of builders) and our aliases file (list
    of builders and their addresses).
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit b3a5c26fd55df7e54d9712ddaf8396d518a92ada
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:42:44 2009 +0000

    [db] Ensure names for all PRIMARY KEY constraints end with _pkey
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 797f875aab6263225f80b9a9881109682cf896cb
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:41:54 2009 +0000

    [db] Rename "distribution" to "suite" (to be consistent with dak)
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 6d423c452bc4b1dcd0771705c3c63e3a44660217
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 26 21:40:24 2009 +0000

    [db] Create PL/pgSQL language if not already present
    
    This is needed by the package_checkrel() function.

commit 6bc50fa0cfeb376fd8e7b1367a28a8a8a21b94eb
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:15:39 2009 +0000

    [db] Source debversion.sql and not version.sql from db.sql
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit bca3939151fa730128762937cca7fea29811a5a1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 22:06:41 2009 +0000

    [db] Add code to uninstall debversion type from database

commit 3f47147c79f8ec32078b47dc6311c94e7a5c35ce
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 22:06:17 2009 +0000

    [db] Add hash operator class to debversion type

commit 361687c421f3ad1ca182711ec3dada56f2e39ff1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 22:05:06 2009 +0000

    [db] Keep faster C implementation of debversion only

commit 692678942060152824a727b20b9aa69e14444191
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sun Jan 25 17:48:18 2009 +0000

    [db] Don't insert arches that have not ever been in the official wanna-build
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 730ee723b2c3c4acdab2ce3e1dd8225de02bf82d
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sun Jan 25 17:47:03 2009 +0000

    [db] Rename sections to components
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit a27b1b4b88f98a93b01188422e6b2599f77ca440
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sun Jan 25 17:44:08 2009 +0000

    [db] Change order of package sections
    
    This makes it easier to spot missing sections.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 11b5134d2bbdf439526a33bc253296653661ad09
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 17:40:24 2009 +0000

    [db] Remove commented out debversion domain

commit 81fd39259953853632a7d0e2198cfc745d270fe3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 15:14:30 2009 +0000

    [db] Add C implementation of debversion type

commit f34d6ddfea81d9bd0951e4d30345c64a16c93038
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 15:10:56 2009 +0000

    [db] Rename debversion_compare* to debversion_cmp* for compatibility
    
    Other implementations use the latter naming

commit 40c71b43c8c2c4e271dbb00213ff26e827053741
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 15:08:49 2009 +0000

    [db] Add untrusted debversion type
    
    This type uses PL/PerlU to use Dpkg::Version directly, to avoid code
    duplication.

commit 0f26a15ffdba21464669777ff5023a662f85d386
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 15:06:45 2009 +0000

    [db] debversion type is created from text primitives
    
    A domain based upon text as used previously can define its
    own operators and operator class, but postgres does not
    allow these to be used by default in place of the base
    class operators.

commit fa9829e5744883d8305599249acb0c24dcf9e07d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 24 18:42:21 2009 +0000

    [db] debversion: Add btree operator class

commit 1b7d81df055bed0906a82fc566bd1e03a5934a77
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 24 18:41:17 2009 +0000

    [db] debversion: Use correct procedure for operator !=

commit 38dd87a21b925eca2c936adb9530530b1854cd07
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 17 16:08:37 2009 +0000

    [db] Update schema comments and constraints
    
    - Comment all relations, functions and triggers.
    - Clean up dependent relastions using ON DELETE CASCADE where appropriate.
    - Add triggers to create missing references, where appropriate.
    - Remove complex architecture group ↔ source package mapping tables, and
      replace with simpler mapping at the expense of using more disc space.
    - Add additional unique constraints and indices.
    - Add log table for storing changelog.

commit e74599278f8ad59aab37b171fcf49149c13d16eb
Merge: 366f398 29db70c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 17 11:56:55 2009 +0000

    Merge branch 'wb-object'

commit 29db70c9a36aa0fe6807e7e500babee4bf909c4a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 17 11:56:17 2009 +0000

    [wanna-build-statistics] Document needed options parsing work

commit aed9d5426bd503ac4ad0cec14de886fdbfccaac7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 17 11:47:06 2009 +0000

    [wanna-build-statistics] Update valid wanna-build states

commit 17f3a48dbb882fb37bae8fec6a2214c1a0c3f2d6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 17 11:46:18 2009 +0000

    [wanna-build-statistics] Add oldstable and oldstable-security

commit 19c4efe397081f5067774ffc8730d916d11301ad
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 17 11:45:04 2009 +0000

    [etc] sbuild.conf: Remove extra newline

commit 366f3981916a9ddfb6a69253c0f3c967a5117196
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 11 23:35:58 2009 +0000

    [debian] Close #511314

commit 2546b0249e49effeb32839e792cb6bac570bc528
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 11 23:01:34 2009 +0000

    [debian] Close #511095

commit 1dddc9d19d00d807eaa8543f0f3272da63d8581a
Author: Robert Millan <rmh@debian.org>
Date:   Sun Jan 11 23:00:13 2009 +0000

    [build-mail-wrapper] Use getloadavg in place of sysinfo.
    
    Use more portable BSD getloadavg in place of Linux-specific sysinfo.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 7e7abc543283c59a3cbe193bb7432eb0b6d24747
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 10 20:46:33 2009 +0000

    [db] Use debversion

commit 8fc4f2d8ee5bba8d8d1b8688380b33684f344115
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 10 20:45:51 2009 +0000

    [db] Correct version check to not recurse infinitely

commit e151e7bb96567817a580118c8c0d5b6cf1fa9b38
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 3 18:49:26 2009 +0000

    [db] Add debversion type and operators

commit 92f8ab18e1ca7c6e0c07737788da2b8031bffed2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 28 23:06:33 2008 +0000

    [db] Add initial PostgreSQL database schema

commit 9cf5cc02f982afc1406c871fe18ac7086c295fb0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 28 23:05:14 2008 +0000

    [build] Distribute database modules
    
    Add missing modules to Makefiles.
    Adjust module package names for new location.

commit 544956b701a1901c267f0d7cb3bba647d182ba80
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 28 12:03:13 2008 +0000

    [wanna-build] Rename %dbs to %databases

commit 2fb4e05291f023b5a36618ce47ec43400d3bbe0a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 28 11:59:34 2008 +0000

    [Sbuild::DB] Rename to Sbuild::DB::MLDBM
    
    Also rename Sbuild::DBInfo to Sbuild::DB::Info

commit cd7e85fb5689b19c533b8c77da9f943b84014117
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 28 11:56:13 2008 +0000

    [Sbuild::DB] Move MLDBM functionality from wanna-build

commit 2c83e55c4de613241977311a994ee81bd0642c28
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 28 11:42:52 2008 +0000

    [WannaBuild::Options] Use Sbuild::isin

commit 12c6e902c67d560dae04f58ab49396bd2c4ca142
Merge: 89ccc1c e6273c7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 22:10:37 2008 +0000

    Merge branch 'wb-object'

commit e6273c7b03c2a2513e59030002e5fd9c067ea83a
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Dec 27 22:06:18 2008 +0000

    [WannaBuild::Conf] Introduce a buildd mail domain

commit 7a5a8c57990d5c210f5c57b9be16776a437e44bc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:31:18 2008 +0000

    [wanna-build] log_ta: dist and db are no longer arguments

commit 41b9be5801c3e345592688aa5490da24cb7e979e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:30:16 2008 +0000

    [wanna-build] Replace usage with Sbuild::usage_error

commit 648ae83520352a6c18f0155f735864117c1189f0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:29:17 2008 +0000

    [wanna-build] Remove set_dep_wait

commit a384b946a114d8ab0029ebdb918ed84e8d63513c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:28:41 2008 +0000

    [wanna-build] Remove exists_in_other_dist

commit 6c49457365f96f97e4ad920fca724ca114d4a121
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:24:48 2008 +0000

    [wanna-build] Update regex, version and dependency handling

commit e0d865b68d9fb818abc37751c854362b04c61608
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:22:29 2008 +0000

    [wanna-build] Add missing brace

commit 62e4d98741f909cd2b794091d0d6bf38da85ce16
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:21:50 2008 +0000

    [wanna-build] Update bin NMU logic

commit 8a95cf973db1ace9ce928711a1d82bbb4c564712
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:19:50 2008 +0000

    [wanna-build] Use auto_dep_wait, add_one_built and add_one_attempted
    
    Use new build states.

commit 034cf819b3ac697b7a5d5db383167dc2dc30c0da
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:14:01 2008 +0000

    [wanna-build] Don't import Sbuild::Sysconfig variables into namespace

commit 253cef775e8e008b2bf81406866a7f892cc8db26
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 19:27:11 2008 +0000

    [wanna-build] Remove Dep-Wait-Removed

commit d865650d45cb798f09a0efe142d2a4e2bd3d9852
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 19:17:40 2008 +0000

    [wanna-build] parse_deplist: Check dependency syntax

commit c3bc666779ef218e7eb3b81860fe23fb9be64219
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 19:12:22 2008 +0000

    [wanna-build] Remove propagate_ta

commit 0f1e5b9d626637e6022f9bf547b2134c30abbf05
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 19:11:00 2008 +0000

    [wanna-build] Remove use of propagate_ta

commit 936e795be9795b4651f24c7abcb4ec0677081cf3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 18:39:04 2008 +0000

    [wanna-build] Add add_one_attempted and add_one_built functions

commit 2fae9e0d01aeeff8efaded618d398e5163e07ba7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 18:20:46 2008 +0000

    [wanna-build] Add get_unsatisfied_dep and auto_dep_wait functions

commit 85ebbf24a50fa88fa517908042781f74fa96d054
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 18:18:45 2008 +0000

    [WannaBuild::Conf] Add priority, noadw and hidden distribution parameters

commit 89ccc1c2ce81f5cfdf86030c65c739206fd9ff9d
Merge: ad04168 74e1e62
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 12:47:25 2008 +0000

    Merge branch 'wb-object'

commit 74e1e62aa4795e777349e5f7cfb67435d665b18c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 12:47:07 2008 +0000

    [Sbuild] Use timegm in place of timelocal

commit ad04168c6a297d7e536f1524327038f29087a6af
Merge: 8db88f4 2f31371
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:57:02 2008 +0000

    Merge branch 'wb-object'

commit 2f313711ffa393dc09d85395c321ab942ed18159
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:56:35 2008 +0000

    [TODO] Add explanation of reference issues

commit 911afbe40b274307e44031e876b8601c58b4c5c2
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:53:26 2008 +0000

    [TODO] Add new items

commit 3674c7e4cff6368242e90a16b5c6c21e2939b200
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:52:28 2008 +0000

    [WannaBuild::Conf] Merge DB_DISTRIBUTIONS and DB_DISTRIBUTION_ORDER

commit 1275d2a43a30a5d9285d00fcd7453652043d4507
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:36:37 2008 +0000

    [wanna-build-statistics] Add Built and Attempted

commit b13d2463c90891c0a0e662f3d7970d23e927abec
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:35:34 2008 +0000

    [WannaBuild::Options] Add new --built and --attempted options
    
    Also update list states

commit bb10748357b43644e9d737cd468e32fef9116c44
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:34:39 2008 +0000

    [WannaBuild::Conf] Deprecate propagation and down-propagation
    
    Also remove from WannaBuild::Options.

commit ebac97b7d9dc29c023a24b15220ce820b191db5b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:30:17 2008 +0000

    [wanna-build] Use gmtime in place of localtime

commit 8db88f4e0e3b4b890671284a7d0ee80be5620404
Merge: 82b6b08 52332cc
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 23:18:43 2008 +0000

    Merge branch 'wb-object'

commit 52332cc6070129697d1bbc58cab33c44624cf80e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 23:11:27 2008 +0000

    [bin] Add comments for future work

commit cf4ae61569dc91a8fe0c02d51f58bca8e1387b1e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 15:18:47 2008 +0000

    Remove redundant function prototypes from object oriented code

commit de421674aa234d0fa344eb4f164712563d2ac3d4
Merge: 38b051a 1dc51c9
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 14:48:32 2008 +0000

    Merge branch 'wb-object' of ssh://git.debian.org/git/users/rleigh/sbuild into wb-object

commit 38b051a1777ad2a3fc0d717d5939509363b6857d
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:19:34 2008 +0000

    [Sbuild::Utility] Use Sysconfig program paths

commit c9b8961aed77145a3e3bc037dc59530d29761189
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:19:04 2008 +0000

    [WannaBuild::Options] Use correct program name

commit a0a0b600ac7b32e19192641a2ff02d219c39aa06
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:17:11 2008 +0000

    [Conf*] Use DEFAULT values in configuration setup
    
    All "our" variables used by configuration files are now
    undefined, so that the defaults will be used if they are
    not set.

commit d07c49da637e6ade1254bf9f79e6106790946ccb
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:14:51 2008 +0000

    [Sbuild::ChrootSudo] Remove unused modules and use Sysconfig program paths

commit 043a28a3da22dc8fb7b8f22a25b60d26ef474a77
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:14:11 2008 +0000

    [Sbuild::ChrootSchroot] Remove unused modules

commit 702ec289dae92dd9453226693071cf89702c0208
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:13:32 2008 +0000

    [Sbuild::ChrootPlain] Update to use new option hash chroot commands

commit ce43ffe7362b0de99efbb458d05768b67053917b
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:11:38 2008 +0000

    [Sbuild::ChrootInfo] Update arch handling for default arch in Sbuild::Conf

commit 1e1cbd7d8a790cd8cc0f6f2dcb449b29885bf2d4
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:10:39 2008 +0000

    [Sbuild::Build] Use Sysconfig release_date and program paths

commit 59fb8f1ecfe1f16ec422a8c5898fb4557b74b132
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:01:18 2008 +0000

    [Sbuild::Sysconfig] Add additional programs and paths

commit 9b881119617320175ab916d7cbf64e1fadb24060
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 22 10:32:24 2008 +0000

    [sbuild-*] Use new Sysconfig paths and chroot command exit status

commit 1dc51c997047712b8610bff954c1fb563b06b15b
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 19 21:21:59 2008 +0000

    [wanna-build] Include DB_BASE_NAME in transactlog name

commit 82b6b08d8502489ceb44d6be789c673798c9eb4a
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 19 21:17:37 2008 +0000

    [wanna-build] Revert transactlog initialisation

commit f85a86ac75d35ad5af0ab75869640eaa5f0541d7
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 18 23:25:52 2008 +0000

    [Sbuild::Conf] Split into Sbuild::ConfBase and WannaBuild::Conf

commit c23db98c1888267364337862004c9af891563d9f
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 16 23:04:38 2008 +0000

    [Sbuild::Sysconfig] Update copyright

commit a0b09c87efe3ffbbf1bd9d1fffdffa27e596db24
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 16 23:02:56 2008 +0000

    [Sbuild::Sysconfig] Add paths and program paths from configure

commit e570d719d156ec236a9bcece1e852b072c76fe7a
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 16 22:16:22 2008 +0000

    [Sbuild::Conf] Split check_config into separate validation functions

commit 34686a86299fc79223ebf9deb47bd059e3ac22c4
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 16 18:10:36 2008 +0000

    [Sbuild::Conf] get and set can call key-specific methods
    
    Used to validate values, and perform additional tasks.

commit 718a0ef9fec51175ccc1dcf1883d6274c49656b4
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 16 18:02:43 2008 +0000

    [Sbuild::Conf] Store defaults and values inside allowed keys hash

commit c385a490e994f99d44ef2727f88741d5b431fbb8
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 15 23:11:07 2008 +0000

    [wanna-build] Use Sbuild::Conf in place of WannaBuild::Conf

commit d9c4201acdea03f351e10644c9e708be038e0357
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 15 22:02:06 2008 +0000

    [WannaBuild::Options] Add Getopt::Long options parser for wanna-build
    
    * wanna-build uses both the new Sbuild::Conf options, and this new parser.
    * wanna-build also uses hostname from Sbuild::Conf, and version and release
      date from Sbuild::Sysconfig.
    * Sbuild::Conf sets HOSTNAME to the FQDN.
    * Sbuild::Conf sets additional allowed keys for non-configuration file
      configuration options required for option processing.
    * Sbuild::DBInfo.pm provides additional metadata needed by wanna-build.

commit bb67fc851d3609e079a5f46661466d8f698e08aa
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 15 00:49:53 2008 +0000

    [Sbuild::Conf] Add roles to parse different key subsets

commit 95374ad78dd858c5557e10f26c2d9c3c845b2c58
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 15 00:05:24 2008 +0000

    [Sbuild::Conf] Add wanna-build configuration with db_ prefix

commit ff011c3d182174f48d85eee3653be89d9d7d49c7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 22:40:26 2008 +0000

    [wanna-build-merge-*] Rename from do-merge-*

commit 6be633a3bc25083bd105746372f239b68784e2b7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 03:22:54 2008 +0000

    [build] Install wanna-build-catdb* symlinks

commit 6d899809640787a1a3958333dd204b5aaa2b8777
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 03:19:21 2008 +0000

    [Sbuild::DB] Update module description and copyright dates

commit b3fc8dfb96cbdc176b01decc1724d5dfd21a258e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 03:18:25 2008 +0000

    [wanna-build-catdb] Support MLDBM format databases

commit 1ad37c2bbbcdddc974c5c94c268eab05f9dafb9a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 02:50:39 2008 +0000

    [sbuild-stats] Remove support for avg-pkg-build-* symlinks

commit 30a62010d31a8bce1c0480462fd18c3ca8780593
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 02:49:53 2008 +0000

    [debian] wanna-build: install state directory and script symlinks

commit 7ee1dceae160f17364438d9ab20c038eee673110
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 02:17:53 2008 +0000

    [wanna-build] Reindent parse_quinn_diff regexes

commit c2ab50a4f8b59ddf16eec26fb06fbfc585a153b0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 02:17:19 2008 +0000

    [wanna-build] import and export _userinfo data

commit 5dfb390b872afe3e15c9f33f963a2334bb8469ff
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 02:15:42 2008 +0000

    [wanna-build] Use isin from Sbuild

commit 8e3bf427cbf8a97fcf3f839d3b869244cf14919f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 01:09:41 2008 +0000

    [wanna-build] Fix uninitialised variables

commit 078a88b1e3f40697a7bcdcc121f804cb4c489656
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 11 21:09:09 2008 +0000

    [Sbuild::DB] New wanna-build database abstraction class

commit 22a8bc66dc64b1275644c28a656364f4de98333d
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Dec 4 20:14:22 2008 +0100

    [Sbuild::Build] add hostname to log output

commit 51424d5835235702e2d9d6f44f5538d63cc675ed
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 3 01:06:28 2008 +0000

    [Sbuild::Build] Use Source: rather than Package: when parsing DSC

commit a2a7457bbb783792660447d68848712fa5d8ccbb
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 3 00:54:19 2008 +0000

    [Sbuild::Build] Split set_dsc version logic into set_version
    
    set_version is called after downloading sources with the
    version set in the DSC file.  This prevents the epoch
    being lost (since it is not part of the downloaded DSC
    filename, which was previously used to get the version).

commit 2745141596f438de9c2603728bd5f62ff1bf9630
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 3 00:37:13 2008 +0000

    [Sbuild::Build] set_dsc splits version into epoch, upstream and debian parts
    
    The DSC Dir parameter now only uses the upstream part, which will
    quell dpkg-source warnings about the directory used to unpack
    the sources containing the debian version.

commit 9ff060b7633587b6a7e98c94e137a26b3a4426c6
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 2 23:49:32 2008 +0000

    [Sbuild::Build] filter_dependencies apt policy checking fix
    
    Check that a package exists in the apt policy results before
    doing version checks.
    get_apt_policy returns a hashref rather than a hash.

commit 6e717cff0023e877aa46287b1148535033163af9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 29 23:28:13 2008 +0000

    [Sbuild::Build] Don't display "Hack binNMU" message by default

commit 95b45d121cf051479ac636414d916db8251ae2ee
Merge: 800f332 b065f5a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 29 23:26:35 2008 +0000

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit b065f5a476a2bc5900df1e25f24f26bccbebc81a
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Nov 29 21:15:44 2008 +0100

    [Sbuild::Build] check if BIN_NMU_VERSION is defined

commit ee2f32a4228c3d0faf9a97d26e138ef940e14e43
Author: Luk Claes <luk@debian.org>
Date:   Sat Nov 29 20:55:21 2008 +0100

    Add the binNMU version if any

commit 800f3321c8201523ebcf57befc19f9eca74904ac
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 29 10:11:09 2008 +0000

    [Sbuild::Build] Restore log symlink for non-buildd use

commit 4ec8035e34e20bd588e56f663c8bd0736fd7c0f9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 29 00:35:44 2008 +0000

    [Sbuild::Build] uninstall_debs: Don't concatenate array members

commit 1e6c59748bd2f349c23eded7318a339654ed0182
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 29 00:34:45 2008 +0000

    [Sbuild::Chroot] Remove default use of global environment
    
    sbuild sets environment in chroot defaults.

commit d1a73cbf35b3d5c05029a26fe553576a6075858e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 29 00:02:49 2008 +0000

    [Sbuild::Chroot] Add run_command_internal and run_pipe_internal
    
    Needed to define INTCOMMAND without clobbering it if
    previously set by run_apt_*.

commit 6a14627241847129cc8d190b8b0de16e81282a71
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 29 00:02:02 2008 +0000

    [sbuild-upgrade] Upgrade rather than update

commit 7d6d752310b9f4b08c8bff10f118715499c36a3a
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 21:11:24 2008 +0000

    [TODO] Remove completed items

commit da9085830dd6733471509fee0114f8a23cac12c9
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 21:07:25 2008 +0000

    [Sbuild] Add devnull stream

commit ac36369c8e049f44c2177288c746b746b8150aae
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 21:06:35 2008 +0000

    [sbuild] Set default chroot command I/O streams

commit ec49ae9cc6669b9a60d04b0a9186181b93748153
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 21:08:39 2008 +0000

    [Sbuild::Chroot] Update to use command defaults
    
    - Redirect streams if set in command hash or in
      command defaults
    - Set environment correctly
    - Set split mode APT command correctly
    - ChrootSchroot and ChrootSudo handle host commands
      correctly
    - ChrootSudo re-quotes argv for su shell execution

commit 15fa28a7494dbc1ea2ffe2fa3da830a2e382b73b
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 21:05:27 2008 +0000

    [bin/sbuild-*] Update utilities to use new chroot exec hash functions

commit efc3a0cbfec037248034aa526ac5c9d411bf4617
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 21:01:46 2008 +0000

    [Sbuild::Conf] Fix typo in sudo sanity checks

commit d561e9949fa1602be8f0e61f4d13052578bedb65
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 21:00:54 2008 +0000

    [Sbuild::ChrootInfoSudo] Add get_info method

commit e25f798dc248d920dc163683909735424242c03d
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 20:59:06 2008 +0000

    [Sbuild::Base] Log to STDERR if Log Stream is unset

commit 68adb64c25730c6f1fd47ad4e314a46fa6f8fa4f
Merge: a88e709 2d0d8dd
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:56:53 2008 +0000

    Merge branch 'master' into chroot-exec-hash2

commit 2d0d8dd7a21e1e417c6cf0ede383e5ad32022cd5
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:55:14 2008 +0000

    [sbuild] Set build Log Stream before and after opening build log

commit a88e7096186491b9d0f2eb0e996137b36339d291
Merge: 92d7501 35883e6
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:43:52 2008 +0000

    Merge branch 'master' into chroot-exec-hash2
    
    Conflicts:
    
    	lib/Sbuild/Chroot.pm

commit 35883e645d5f22a883e2d16333ac5f511939dd96
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:28:39 2008 +0000

    [Sbuild::Build] Don't default Arch; it must come from chroot_arch()

commit d96b06307aadc51ab7b0d228e5a1252614064f1c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:25:50 2008 +0000

    [Sbuild::Conf] Allow ARCH default specification as $arch

commit 0c0b22289b0880022381d5829aa07492e7ab3d63
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:21:34 2008 +0000

    [Sbuild::Conf] Rename USER_ARCH to ARCH

commit 850c881527bf89c57da7420095413e3b3c2fc6ac
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:18:22 2008 +0000

    [Sbuild::Conf] Rename ARCH to HOST_ARCH

commit 05f19e48a6f63429f77c43e47eddf0c7bbf7a5fa
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:14:02 2008 +0000

    [Sbuild::Build] Use chroot-specific Arch in favour of global ARCH

commit 92d7501acac145e75003281645d796f979aaadd6
Merge: 2b1231d e176d54
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 12:23:39 2008 +0000

    Merge branch 'master' into chroot-exec-hash

commit e176d541cc363283f6aca543ff8a8e2cb0aa88d9
Author: Luk Claes <luk@debian.org>
Date:   Fri Nov 28 12:44:44 2008 +0100

    Also show the architecture in the subject

commit 29ea88b2dea55224a640244bad32467c92cf5de4
Author: Luk Claes <luk@debian.org>
Date:   Fri Nov 28 11:42:36 2008 +0100

    Temporarily make ARCH user configurable

commit e0424f9c957586aed6d123bd9f207b29f97e78d0
Author: Luk Claes <luk@debian.org>
Date:   Fri Nov 28 10:28:27 2008 +0100

    Don't barf when main::current_job is not set

commit 60fb8e6850ad1b2822ae8b6b1c0ab6f826b87125
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Nov 28 10:16:38 2008 +0100

    [Sbuild::Options] tell getopt that --archive needs a string argument

commit 13f40aa248a07b1a588f3ec8d12653006f5b8059
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Nov 27 20:49:29 2008 +0100

    [Sbuild::Options] correct a typo

commit 15f02471ac9db4fb6dbc50780fd0a35229632f17
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Nov 27 20:48:45 2008 +0100

    [Sbuild::Conf] declare $archive

commit ecf47d17540569730d4ea8b8523d47ef7bb46fdb
Author: Luk Claes <luk@debian.org>
Date:   Thu Nov 27 19:44:52 2008 +0100

    Multiple archive support

commit 6d1f3dcb6e4b1b9d8ce86618f3cabfaa3d7d2673
Author: Riku Voipio <riku@debian.org>
Date:   Tue Nov 25 21:26:41 2008 +0000

    [buildd-mail] Decode Base64 and quoted-printable mail
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit e3686a370e51461151861659c356f3df5404c5ef
Author: Kumar Appaiah <akumar@debian.org>
Date:   Tue Nov 18 22:44:25 2008 +0000

    [man] sbuild.1.in: Document --use-snapshot
    
    Thanks to Kumar Appaiah for this patch.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 2b1231d0ff8adf60a8a5f28ecdb5f47a738365b2
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 11 00:10:48 2008 +0000

    [Sbuild::Chroot] pipe_command can open pipes in both directions
    
    Piping is now possible in (stdout from child to parent) or out
    (parent to child stdin) using the PIPE command option.

commit 74c2c35b45b96830157521ed4b0fe82e9867e284
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 11 00:09:53 2008 +0000

    [Sbuild::Build] Pass files with correct pathnames to check_space
    
    check_space now always runs on the host

commit 692933a9fa2eedce0fdf401e77a397d5b72cdaaa
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 10 23:16:35 2008 +0000

    [Sbuild::Chroot] _command functions take single hash argument

commit f95ac6af7c9f4d9e07d07310f0fcd9f8ca8e90fe
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 21:52:31 2008 +0000

    [debian] compat: Update to debhelper version 7.
    
    debian/control: Build-Depend on debhelper 7.

commit 623b23020380e891a52cfc7e4afa2c14b6c20c31
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 21:50:53 2008 +0000

    [debian] rules: Clean up old unused code
    
    Also correct patching of config.status and config.guess.

commit c8efa2815c4d93b6e351bacf35b26bc51e1bf056
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 21:26:50 2008 +0000

    [Sbuild::Build] Improve startup message logging
    
    File lists at build end use subsubsections to log package names.

commit 90dd74524e5f5cbf21ee636ceea4180fbfb0262e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 20:32:37 2008 +0000

    [Sbuild::Build] Use chroot pipe functions
    
    Replace use of IPC::Open3 with Sbuild::Chroot pipe functions.
    This handles piping, logging correctly in all cases.
    
    DEVNULL stream removed from sbuild, now reimplemented in
    Sbuild::Chroot.

commit 0d9d909ee580ac0abf9fb3f8d4ec0028ca024637
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 20:28:49 2008 +0000

    [Sbuild::Chroot] Add pipe functions
    
    pipe_command and pipe_apt_command underlie the current
    run_command and run_apt_command functions, and call
    exec_command in the child process.  These redirect stdin, stdout,
    and stderr appropriately.
    
    Logging functions moved from Sbuild::Build to
    Sbuild::Base, so any derived class can use the log stream.
    
    The build log stream is set in the chroot object after creation.

commit 0b027c1f32017ee5d32f4d2e0313b6a072117126
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 20:22:51 2008 +0000

    [Sbuild::Log] Rename SAVED_STDERR to main::SAVED_STDERR

commit a19e3f90143dc07673ca9e23fa846c9285e3d04d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 20:21:55 2008 +0000

    [Sbuild] Move send_mail from Sbuild::Build

commit b2bed97c17e8f2cdc340098bd373e9bb6f6ee0be
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 8 14:49:28 2008 +0000

    [Sbuild::Log] close_log takes Sbuild::Conf as an argument

commit 8ac73f1498ba5a0766bc4c75e4b885b4d3ad3068
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 13:10:25 2008 +0000

    [Sbuild::Log] Remove *_pkg_log, log_symlink and send_mail
    
    These functions are now merged into Sbuild::Build

commit 6491a380e91bf44079028b199cb024b26aa7ea9e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 8 14:45:50 2008 +0000

    [Sbuild::Conf] Be verbose by default on a tty
    
    Move from sbuild, to allow user to override.

commit b0913071f7ef1f6d2b8c0a23b8da7cb1a14f6e5d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 13:04:12 2008 +0000

    [Sbuild::Build] Merge Sbuild::Log::*_pkg_log into *_build_log
    
    Sbuild::Log saves STDOUT to main::SAVED_STDOUT instead of
    SAVED_STDOUT to make it accessible to other code.

commit f4cb3520c9db209d01db560b4cb6e4723f884cfe
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 13:03:34 2008 +0000

    [Sbuild::Conf] Override MAINTAINER_NAME only if unset

commit a47d89036198897f9125a7276c7e036fdb6f1d58
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 13:02:50 2008 +0000

    [Sbuild::Conf] Add LOG_DIR_AVAILABLE

commit e82ee2b9390b7f95e71bca9d4251160b120ffbf4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 11:14:49 2008 +0000

    [Sbuild::Build] Add and use log_info, _warning and _error functions

commit c3143a1700822da934eaa45a4aa6c74477fa7510
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Oct 13 00:30:04 2008 +0100

    [Sbuild] Move debug logic from Sbuild::Build
    
    Sbuild::Conf sets global debugging state

commit 2baf96c4da6fca7a90a4d84384c076e855299c33
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 12 19:32:56 2008 +0100

    [Sbuild::Build] Set 'Sub PID' to undef

commit db25caae9e230cdee841f9817f5d8ff60bc29e7b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 12 19:09:29 2008 +0100

    [TODO] Remove completed items, add new item

commit bbb85a66ff73d268f52e9d77beb474cf6e718bae
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 12 19:06:45 2008 +0100

    [Sbuild::Build] set_dsc: Add debugging message

commit f4eb70bec598bb57e9e0c7679a1986bf79be9522
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 11:10:23 2008 +0000

    [Sbuild::Build] build: Don't access member data directly

commit 7e05780199144eafb87b7e2b53f060a4fd729883
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 11:09:39 2008 +0000

    [Sbuild::Build] Use get and set methods outside strings

commit b41da7dddac3c9866b668a6e9cab0bbab368a13b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 11:04:45 2008 +0000

    [PATCH] [Sbuild::Build] Add log and debug functions
    
    Rather than using PLOG and STDERR directly, add logging functions to
    abstract logging.
    Also use build get and set functions in sbuild.

commit 9b2e4b124414a0ecbce0160b57199121b9dd5f66
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Oct 1 00:27:23 2008 +0100

    [Sbuild] check_packages takes a chroot argument directly

commit facb2b0dd3c540f34aaf167e7d0d54d3e2586d5a
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 30 22:49:40 2008 +0100

    [Sbuild] Move package checking from sbuild-checkpackages
    
    sbuild-createchroot now calls check_packages to set initial
    packages reference list after chroot creation.

commit cbf1d41c38847051bf684a93b3b77499423db01d
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 30 22:49:19 2008 +0100

    [Sbuild::ChrootPlain] Always use split mode

commit 25e134e4c65dbfae4a9b6c9403ace3c63c10c6f9
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 30 22:48:37 2008 +0100

    [Sbuild::Utility] Use new Sbuild::ChrootInfo chroot creation

commit a2e6716f315252816a15d6901b2aef7eee4eca91
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 30 21:25:07 2008 +0100

    [TODO] Remove completed item

commit 22409663cd7233dd4f3531829c5a78147060b51c
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 30 21:23:21 2008 +0100

    [Sbuild::ChrootPlain] Fix to match new chroot interface
    
    Use in sbuild-createchroot to update package lists

commit b0aaeb35eb59fdc05949a2ebbd3c54775bdd31dd
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 30 21:22:15 2008 +0100

    [Sbuild::ChrootSudo] Remove redundant use of ChrootInfoSudo

commit 77c0d179d41ebe3bf1dc9336521df95be6215768
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 30 21:21:06 2008 +0100

    [sbuild] Refer to chroot, rather than schroot in message

commit 720176b07d5bbaec2f3c25efc2cb2b42d9025081
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 29 23:23:21 2008 +0100

    [Sbuild::ChrootInfo] Add create factory function to create chroots

commit 2570eb5a05e6b2505915181c365fe8881ec56f22
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 19:31:47 2008 +0100

    [sbuild-createchroot] Use POSIX calls instead of system where appropriate

commit 8c0292ece3826e1daeea704624268a9e4ac970d5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 17:05:57 2008 +0100

    [sbuild-adduser] Document sudo tasks and update user instructions
    
    User instructions now refer to helper programs in /usr/bin.

commit ed36a780817b1e8df76ae0ff04f640942b7b6d9a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 17:05:26 2008 +0100

    [sbuild-createchroot] Add sudo setup tasks and use new Sbuild::Conf

commit 553a001014b5fd248e38eec1ed2819bfbb0d3249
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 17:01:14 2008 +0100

    [man] Document /etc/sbuild/chroot

commit d89b4ebaca73910509e1e59887d6815df5f1eeed
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 16:58:50 2008 +0100

    [Sbuild::ChrootInfoSudo] Look for sudo chroots in /etc/sbuild/chroot
    
    Look in /etc/sbuild/chroot in user mode, and in the current dir in
    buildd mode.

commit c4372d5e7524da2ec5088ae68673c2f5b937d948
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 16:58:14 2008 +0100

    [Sbuild::Log] Only create log symlinks in buildd mode.

commit bd415ac39b66adc07b1b966f5246cce75a07796c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 16:57:44 2008 +0100

    [etc] Document expanded use of $sbuild_mode

commit 506bc431fb7d231ef5c330a81954aeb41cd78f8d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 13:49:17 2008 +0100

    [Sbuild::Chroot] Remove debugging statements

commit 9f63af855b130074b701316e39c0f4d2241b65cc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 11:56:10 2008 +0100

    [Sbuild] Remove explicit namespace use in BEGIN block

commit 6b99b0c8f912c4f8740af66258276d3ac658bdf9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 11:06:59 2008 +0100

    [Sbuild::Utility] Use Sbuild::ChrootSchroot and Sbuild::ChrootSudo

commit a462d19bdd6a40ef59f7bccc0c30d29695d9743f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 11:06:39 2008 +0100

    [Sbuild] Don't include Sbuild::Conf (circular use)

commit 8e03bc2b82b4d35a1741614df9f8de84c9f7304a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 11:05:56 2008 +0100

    [man] Remove incorrectly added patch rejects

commit 904d2f9454480e76720bf425b9a6d0a51b042639
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 01:47:43 2008 +0100

    [build] Distribute new perl modules

commit a9e54d1d8e53c82fe85f08b334af4596c5395ddd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:57:21 2008 +0100

    [Sbuild::Conf] Default MAINTAINER_NAME to DEBEMAIL if set in environment

commit 2a4bdbb0da3dc06cc1210c37804d97cd50217b7c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:56:47 2008 +0100

    [man] sbuild.1.in: Document DEBEMAIL default for maintainer name

commit b06776951f696d4a8d49d3c5825cf5362049911a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:56:17 2008 +0100

    [TODO] Remove completed items

commit 9fa24be0b86b26f55d18f8fd2ee5cbae0a746c4b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:52:29 2008 +0100

    [etc] Update $maintainer_name documentation

commit 300026d49ca9202eedf7f5688aa76284bce124ff
Merge: 8cc4945 49ccd83
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:48:35 2008 +0100

    Merge branch 'sudo-branch' of /home/rleigh/sbuild/ into sudo-branch

commit 8cc494583af5fc604902e5d338a3a63a74fe8733
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:48:09 2008 +0100

    [debian] control: Depend on schroot or sudo, update minimum schroot version

commit 49ccd8395862285e7b15beead2e52b3e2af270c7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:31:52 2008 +0100

    [NEWS] Document CHROOT_MODE and CHROOT_SPLIT

commit 5b14c3cf6f42a4a9328b5aa421e47540255f0d50
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:28:39 2008 +0100

    [Sbuild::Chroot] Introduce CHROOT_SPLIT
    
    CHROOT_SPLIT allows apt/dpkg to be run outside the chroot for all chroot
    types.  sudo may now run entirely in the chroot.  schroot may run split,
    but needs sudo for root access outside the chroot.

commit a14229b5871c2819b02d1f283e2afd0faada214e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:25:46 2008 +0100

    [Sbuild::Chroot] Don't strip 'APT Options' in debugging messages

commit fd9e511b9082fce0abd69a97d98fb6c98d55b28f
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Sep 25 23:04:13 2008 +0100

    [Sbuild::Chroot] Remove redundant chdir calls

commit fca323478bd467c0271f0d1314ef322393494b9e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 22:28:23 2008 +0100

    [Sbuild::Chroot] Add apt_chroot virtual function to remove code duplication

commit 5557666211e639ce5280c34a9c23ecf42a9ec72e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 21:45:34 2008 +0100

    [Sbuild::Chroot] Move chroot-type-specific code into derived classes
    
    Move schroot-specific code into Sbuild::ChrootSchroot.
    Copy for Sbuild::ChrootSudo but merge old sudo code.

commit e2b4fedf82762acdbbfdc77295476f9a80e53547
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 21:44:39 2008 +0100

    [sbuild] Only print USER_ARCH when debugging if defined

commit 1c9e05f2012c64a9d1686291c876ee211112771a
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 19:29:02 2008 +0100

    [Sbuild::ChrootInfo] Move get_info_all to derived classes, and specialise

commit ab82d39a12fc29b8d5b393ac1a9532dae3df6be7
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 19:27:37 2008 +0100

    [etc] sbuild.conf: Update header comments

commit 864e66fe7b96e27d478ba8beb49f2848960a611e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 19:25:31 2008 +0100

    [Sbuild::Conf] Don't default USER_ARCH to ARCH
    
    This prevents Sbuild::ChrootInfo::find from finding the chroot when the
    arch is not specified, because this requires USER_ARCH to be undefined
    in order to not fail.  If ARCH is defined, it is required to be found.

commit c1c453d182164dc08574b7d80941166d73a7712d
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 00:36:07 2008 +0100

    [Sbuild::Chroot] Subclasses set subclassed ChrootInfo

commit 98f792924fd6e6392e9f2d4d175547947f4edc18
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 00:35:13 2008 +0100

    [Sbuild::ChrootInfoSchroot, Sbuild::ChrootInfoSudo] Add new subclasses of Sbuild::ChrootInfo

commit 3ad11c7b01ff86ac563b52b46bf6e88ac512cb8e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 00:24:08 2008 +0100

    [TODO] Add items for sudo support

commit 9c76f2e7dec7374fb58a224f96f8ec01dc549670
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 22:45:47 2008 +0100

    [Sbuild::Chroot] Update comments regarding root use of host system

commit f47af0c1d78ff31b9f3f56c40557590dc2dd2a83
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 22:45:30 2008 +0100

    [Sbuild::Conf] Add sudo sanity checking

commit b826a6197cc51ab0d85ee8f330d01d7ebd13771b
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 22:44:27 2008 +0100

    [man] sbuild-setup.7: Document sudo setup

commit 2ce3bb19e287c32e5a1052da774d88db6f8dd653
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 22:07:22 2008 +0100

    [etc] sbuild.conf: Add $sudo and document $chroot_mode

commit 5c699c42529d36a31261ad29a423ab900abf8e62
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 20:56:10 2008 +0100

    [Sbuild::Base] New class containing common class functionality
    
    Sbuild::Build, Sbuild::Chroot, Sbuild::ChrootInfo and Sbuild::Options
    derive directly from this base class, eliminating duplicated code for
    common get/set functions for local and configuration variables.

commit 4edb6bdc714755c9ad4720539abadd2104e083ee
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 20:37:58 2008 +0100

    Derived classes' constructors chain up to parent class constructors

commit 94d33ec6dbcb1634fea7c73b3389d2f8d9af0207
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 10:02:49 2008 +0100

    [Sbuild::ChrootSchroot, Sbuild::ChrootSudo] Add new classes
    
    Derived from Sbuild::Chroot

commit d0243f6daaffc7ebb99cbffdea5b21ff87de3826
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 09:58:20 2008 +0100

    [Sbuild::Conf] GCC_SNAPSHOT defaults to 0

commit f1ede44288de2f6a3d7db6a54b9db85106b08c8d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 09:43:34 2008 +0100

    [Sbuild::Conf] Re-add $chroot_mode

commit d44ec9359be1e4fab7f2e79ee56390aa496e3ccf
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 09:27:47 2008 +0100

    Use perl class methods to construct objects

commit efca075185cd92942e135e3d6f0f874e8b886fef
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 15:12:05 2008 +0100

    [Sbuild::Build] Don't use Sbuild::Options

commit 87221274a5b158f1e434771cc6f8cb540daaeecd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 15:10:56 2008 +0100

    [Sbuild::Conf] Move SIGNING_OPTIONS from sbuild

commit ab768d78207bc4d7fdd1dd098b81933f02f85127
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 14:51:49 2008 +0100

    [Sbuild::Conf] Move validation logic from Sbuild::Options

commit dba3de63c48c046344271956c9ad5f76f4fa0943
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 14:40:47 2008 +0100

    [Sbuild::Conf] Move GCC_SNAPSHOT from Sbuild::Options

commit 8d2f5866ee1749190f9b47d412a5f602f86f238c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 14:22:48 2008 +0100

    [Sbuild::Conf] Move LD_LIBRARY_PATH from Sbuild::Options

commit db05e4cf945abd414be4d9c217c921400b8a1158
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 13:58:22 2008 +0100

    [Sbuild::Conf] Move CHROOT from Sbuild::Options

commit 602bf5b7929f860504f299e59ef2777ee1596e51
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 13:43:44 2008 +0100

    [Sbuild::Conf] Move BIN_NMU and BIN_NMU_VERSION from Sbuild::Options

commit 2228b4c8c9bfcb7b31f9c5586f69066f68836977
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 11:17:03 2008 +0100

    [Sbuild::Conf] Move BUILD_SOURCE from Sbuild::Options

commit 3eac0bd75779e6c0cf139944c8431058d12b07bd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 11:05:26 2008 +0100

    [Sbuild::Conf] Move MANUAL_SRCDEPS from Sbuild::Options

commit e97c119c82fcd82146114bfd8af6c137527bf2d3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 10:47:07 2008 +0100

    [Sbuild::Conf] Move BATCH_MODE from Sbuild::Conf

commit 8c3eedf9e83e922a43896d4d889c60d57a0c4387
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 10:31:57 2008 +0100

    [Sbuild::Conf] Move AUTO_GIVEBACK* and WANNABUILD_DATABASE from Sbuild::Conf

commit 5ae832c07b1970e0a6594be5dd44649c0cda6428
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 01:17:20 2008 +0100

    [Sbuild::Conf] Move BUILD_ARCH_ALL from Sbuild::Options

commit 6cfcdae55f68c883d646a1876986283ab314dd51
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 01:05:18 2008 +0100

    [Sbuild::Conf] Move DISTRIBUTION and OVERRIDE_DISTRIBUTION from Sbuild::Options

commit 15899e3189e3580bb1704bfc0cc7b53b37a9e362
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 00:04:32 2008 +0100

    [Sbuild::Conf] Move USER_ARCH from Sbuild::Options

commit 55dbdf34d3422799552f42d678fca7f9c652270f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 23:09:39 2008 +0100

    [Sbuild::Options] Add get_conf and set_conf methods

commit 7f9cb30656f81aef6c6ca514ed7e53beace2ded4
Merge: 8ace4d8 28e2fb2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 20:22:43 2008 +0100

    Merge branch 'conf-object'

commit 28e2fb2ac1c7e91852026e50e4a6ebeda8676b5c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 20:18:04 2008 +0100

    [TODO] Add new items

commit c7d7b18cd5e066a0f6954865e24103c08033c293
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 19:48:37 2008 +0100

    [Sbuild::Conf] Move globals into read_config

commit 6d3a7deae0aec7eb6f804a1f7be72c61a39e7d75
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 18:12:29 2008 +0100

    [Sbuild::Conf] Remove initialisation functions

commit f8d612ccb462a24e084ece1c091e7d542e7ef360
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 18:09:29 2008 +0100

    [Sbuild::Conf] Don't export %watches

commit ecf17fb355b82d02f4e9961ddc1aeac9467f84ee
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 17:42:56 2008 +0100

    [Sbuild::Conf] Don't export , , or

commit eb98ee56369fa5f44d420c508fbd4a916bcf7104
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 15:59:37 2008 +0100

    [Sbuild::Conf] Don't export /home/rleigh/bin /home/rleigh/bin /usr/local/bin /usr/bin /bin /usr/bin/X11 /usr/games

commit 46252effad307571563e8b68718b96654afab597
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 15:21:14 2008 +0100

    [Sbuild::Conf] Don't export

commit bc6d782275ba13531f950319df21b7cb5769bd58
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 15:18:16 2008 +0100

    [Sbuild::Conf] Don't export

commit 493a45e8d5f1026cfbf9bdb8123af74a288ae645
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 14:48:29 2008 +0100

    [Sbuild::Conf] Don't export

commit cce8ca9d39961de52d99e7d7463527069424a9aa
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:34:36 2008 +0100

    [Sbuild::Conf] Don't export

commit 582c1fa8a7a6ae5aa505fea04ad5fd996e272940
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:27:26 2008 +0100

    [Sbuild::Build] Add missing variable in write_stats

commit c3214aec92953fe932025fc97adef63218e3a39f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:26:30 2008 +0100

    [Sbuild::Conf] Don't export @ignore_watches_no_build_deps

commit 5fb7b377940152f63b7eaf04267507b4aa1c1750
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:23:16 2008 +0100

    [Sbuild::Conf] Don't export $max_lock_trys or $lock_interval

commit 8be1c9b63c5aab6d41dfdd9af06f1052ce5acbd9
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:16:06 2008 +0100

    [Sbuild::Conf] Don't export $srcdep_lock_wait

commit 86a8c6f2f5ad6b8615d2943636f5ee0cf69e25d1
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:13:45 2008 +0100

    [Sbuild::Conf] Don't export $srcdep_lock_dir

commit 6e92e91d5e11b6cd337041e4a6818de65a67bb3d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:07:58 2008 +0100

    [Sbuild::Conf] Don't export $stalled_pkg_timeout or %individual_stalled_pkg_timeout

commit 7199cfbdfe31595428455a279cbace3df79b1573
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:02:05 2008 +0100

    [Sbuild::Conf] Don't export @toolchain_regex

commit 1c028626d2c5f92566d5dce14a114de97b64cc4b
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 20:57:54 2008 +0100

    [Sbuild::Conf] Correct typo in DCMD diagnostic

commit bc0ad01b834077ceafae9d2242ebeb6208636c68
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 20:56:30 2008 +0100

    [Sbuild::Conf] Don't export $purge_build_directory

commit f30f395afea8e3a82839ef37e08df895b50fea8d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 20:38:32 2008 +0100

    [Sbuild::Conf] Don't export $check_depends_algorithm

commit c36605e5549a6d64c46a15cc5b8a61029e899dd6
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 20:11:10 2008 +0100

    [Sbuild::Conf] Remove unused @no_auto_upgrade

commit 748b80dac838971fcd41522d78b36c1af9afb6f5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 21:38:03 2008 +0100

    [Sbuild::Conf] Don't export $mailfrom

commit 151fc53f2f27e32434d89bea9738bdae5159951d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 21:34:46 2008 +0100

    [Sbuild::Conf] Don't export $mailto, and support %mailto

commit 0020050d05b72cc1c3e15fd9317e2f20d7a9941a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 21:21:15 2008 +0100

    [Sbuild::Conf] Don't export $log_dir

commit 5c89a38a951aba78731fe9d7518bf08622f1b6ff
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 21:06:11 2008 +0100

    [Sbuild::Conf] Don't export $pgp_options

commit 36c1bce55ee536a9b566769a3329e6884801cb92
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 21:02:17 2008 +0100

    [Sbuild::Conf] Don't export $build_env_cmnd

commit 2ed9a86edfb4c7e93246b74ca8e4c23deeb122eb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 20:57:54 2008 +0100

    [Sbuild::Conf] Don't export $package_checklist

commit 08dcf8c669f20bac106e940da0a249478192f91c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 20:55:05 2008 +0100

    [Sbuild::Conf] Don't export $avg_time_db, $avg_space_db and $stats_dir

commit edddf90f7c8f128a1222cc46d16b854f6e268446
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 20:35:45 2008 +0100

    [Sbuild::Conf] Don't export $avg_time_db and $avg_space_db

commit 654a9da9aa8cfb0af1bf506d4bfe610926c9b53b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 19:00:36 2008 +0100

    [Sbuild::Conf] Don't export $md5sum

commit 62fa43afef5a4af74e1283082a25f4b2fbdb3cd4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 18:58:53 2008 +0100

    [Sbuild::Conf] Don't export $dcmd

commit dfe00b7d1ee4bcaecfd037f8888df40eea1818a3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 18:48:49 2008 +0100

    [Sbuild::Conf] Don't export $dpkg_source

commit bc4824859c5d3906c678dc68e553c288d01a08af
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 18:31:01 2008 +0100

    [Sbuild::Conf] Don't export $apt_get or $apt_cache

commit 11c0ca22fbf3cf3b1dc5d33609664a135ad133bd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 15:06:03 2008 +0100

    [.gitignore] Ignore emacs temporary files

commit 560d5b857e344cf04362e1aa4c6842382100e4fc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 15:05:40 2008 +0100

    [Sbuild::Conf] Don't export $schroot, $schroot_options or $fakeroot

commit e06cc9fa0e449276701d3934f2c90dff0a03ac11
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 14:51:01 2008 +0100

    [Sbuild::Conf] Don't export $su

commit fb99ea7bb872068e68193bedcd686c9415782da9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 14:50:11 2008 +0100

    [Sbuild::Conf] Don't export $dpkg

commit 8e134ecabaf8b2e8ffc87a94efe2b5b474086497
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 11:13:35 2008 +0100

    [Sbuild::Conf] Move ARCH and HOSTNAME from Sbuild::Sysconfig

commit ff2c8e983f2587393f3991d7218414ff7695bca1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 30 12:11:17 2008 +0100

    [Sbuild::ChrootInfo] Convert to object-oriented perl

commit 99e91163599630fcb5e8866dec6aba71ddf01796
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 30 11:34:54 2008 +0100

    [Sbuild::Utility] Don't use global $main::conf

commit 1252ca888cd2551c3d77a777ea11f80d1b5a2c22
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Aug 28 23:18:01 2008 +0100

    [Sbuild::Conf] Don't export $mailprog

commit b899e9580b2335038960f13678b900162d5f477a
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Aug 28 23:11:40 2008 +0100

    [Sbuild::Conf] Don't export $nolog

commit 8be90688395271d2d1375ef95c77c479f81559d7
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Aug 28 22:58:23 2008 +0100

    [Sbuild::Conf] Don't export $verbose

commit 8ace4d8be3b0da0a1e54d10ed5b3bce58910438a
Merge: 8779030 185b93a
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Aug 20 01:04:42 2008 +0100

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit ddb04eeb66cc3d8a72b84805791a189475b1ed06
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Aug 19 19:37:59 2008 +0100

    [Sbuild::Conf] Don't export $username

commit 185b93a466b91d044fadffc57a531454cfcf9bcf
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Aug 18 11:14:30 2008 +0100

    [man] sbuild-setup.7 changes ownership of /build to 02775

commit 4599db8ef75c97f7705c41a2dcff01e7eb6819e5
Author: Cyril Brulebois <kibi@debian.org>
Date:   Mon Aug 18 11:08:36 2008 +0100

    [sbuild-createchroot] Correctly parse --arch option
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit af51286ed07d0f5980cec6321d1b5f0cd955626a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 23:00:34 2008 +0100

    [sbuild-checkpackages] Replace $cmd with $mode

commit b811079b9d5be6b9e8e0cc8c433b2eeb84b1df15
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 23:00:34 2008 +0100

    [sbuild-checkpackages] Replace $cmd with $mode

commit d4b89394ec46b4285768dc18502927f814d8d20d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 22:56:31 2008 +0100

    [Sbuild::Conf] Don't export $cwd
    
    Sbuild::Utility::setup needs to be passed Sbuild::Conf to create
    Sbuild::Chroot.  This hence requires all utilities using Sbuild::Utility
    to create an Sbuild::Conf.

commit 8cfdc7051b186ace66248492c54e219c87b1297f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 22:39:42 2008 +0100

    [Sbuild::Conf] Don't export $check_watches

commit b7f55583148934bfa507dd658a14c46bde825148
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 22:35:41 2008 +0100

    [Sbuild::Conf] Replace $apt_allow_unauthenticated with APT_ALLOW_UNAUTHENTICATED
    
    Sbuild::Chroot needs to store Sbuild::Conf in order to access
    configuration details.

commit f41e2b2ccf045a0c559ee749f8ad2833f0ebea56
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 22:14:53 2008 +0100

    [Sbuild:Conf] Replace $apt_update with APT_UPDATE
    
    Sbuild::Options needs the options passing to the constructor,
    because options parsing alters the Sbuild::Conf namespace,
    which now needs doing via the Sbuild::Conf::set method.

commit d0f9b95b14d503b8619140c5a571ac6b9d63abc1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 21:57:03 2008 +0100

    [Sbuild::Conf] Don't export $apt_policy or %alternatives

commit 6871036ff31aa8f1dc83b5ca65215e64f58656d1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 16:05:14 2008 +0100

    [Sbuild::Conf] Don't export $HOME

commit b614317d0b4e71b2c7387fb38c17c08439707cb9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 15:54:03 2008 +0100

    [sbuild] Instantiate Sbuild::Conf and add to Sbuild::Build

commit 946aabacc2efa5c18c33c4c5caa189b38b15660d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 15:28:37 2008 +0100

    [Sbuild::Conf] Add object-oriented interface

commit 9032ef691037871cbad2bfa9a52490df0d1853c2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 15:26:50 2008 +0100

    [Sbuild::Chroot] Correct formatting

commit 8779030aa7272904b5b93942bb622b01ed4c0354
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 10:45:53 2008 +0100

    [TODO] Add buildd items

commit e19bc8cc43acddea40ffa2ac022430b5e9cf232e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 10:41:12 2008 +0100

    Enable warnings in all perl code

commit 7b7ed3fb227cb460ff165bfcda4f9f8026d7344a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 16 16:49:50 2008 +0100

    [debian] Update README

commit fbe9f03569c6755c8b9ef0f040d448e1ba196e97
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 16 16:48:54 2008 +0100

    [Sbuild] Remove deprecated features post-Lenny

commit bcf029196c36ce3b32025644d2e6a657e88a9d79
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 16 13:21:47 2008 +0100

    [man] Fix typo in sbuild-stats.1

commit 510f63e7067916d1012d7679e166f96bebee91c2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 16 13:10:08 2008 +0100

    [Sbuild::Build] Use string rather than numeric comparison for '~*=PROVIDED=*='

commit 489590bad2cf0612afa8918b0fabbe4643e69fdb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 16 11:46:08 2008 +0100

    [build] Bump version to 0.58.0

commit 0ca2f965886b7f84086d28f4c418e38edaa86794
Author: Lucas Nussbaum <lucas@debian.org>
Date:   Sat Aug 16 11:41:18 2008 +0100

    [Sbuild::Build] ~*=PROVIDED=*= does not break Build-Conflicts
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 5c3d0a1cf1a0fe99102d85b95ab4e26c8eafb017
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 21:56:14 2008 +0100

    [debian] Don't install nonexistent avg-pkg* manual pages

commit 72ab2257287bc4e22616b0fc4f38b0d5818077eb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 21:23:44 2008 +0100

    [debian] Finalise changelog for 0.57.5

commit 78f7a789705a5a305380b4e6f8759e813dcaa9fb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 21:23:26 2008 +0100

    [NEWS] Finalise for 0.57.5

commit 2aa631606101ab4ba7260433a0edfeaca6f9beae
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 21:20:48 2008 +0100

    [man] Clean up synopsis and options formatting

commit 0c6397f5bffbf9facb16e8232631b4b2ed361f9a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 21:07:13 2008 +0100

    [debian] sbuild.postrm: Correct use of local to remove bashisms

commit b798d3cf0eb050282fb5f27e21735f7087bf977c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 20:41:31 2008 +0100

    [sbuild] $maintainer_name, $uploader_name and $key_id are now optional
    
    Some minor refactoring bugs for binNMUs are also corrected.
    
    Closes: #489557

commit f95eaf181c97fb4373da6367fa032c44bf0b224e
Author: Greg Hudson <ghudson@mit.edu>
Date:   Sat Aug 2 20:24:19 2008 +0100

    [Sbuild::Options] --make-binNMU should not assign an lvalue
    
    Thanks to Greg Hudson.
    
    Closes: #493325
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit aaaee469e124975e43bf1c524071bf50e99d7b1e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 20:18:46 2008 +0100

    [Sbuild::Log] Correctly format date in package log filename
    
    Sbuild::Build passes the package version and architecture in addition to
    the package name, as well as correctly formatting dates.
    Sbuild::Log correctly format the date.
    
    Closes: #493150

commit f466af5019ffdd53fbc06b3d5dfcfff6269062d3
Merge: 76e5e6f 410576e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 17:58:05 2008 +0100

    Merge branch 'long-options'

commit 410576e42d83e09b03bd8684aad9b5310e71d540
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 17:57:39 2008 +0100

    [build] Remove avg* command symlinks

commit 5f39c2dc8c2a11b832a029d71f00c965eb130693
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 17:57:05 2008 +0100

    [debian] debian/rules: Remove avg* command symlinks

commit f6961d9451a7508464547173cef30a8c822507b4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 17:56:16 2008 +0100

    [TODO] Add new items

commit 76e5e6f4ab17e6420d0968b8ee30e03b7e273b7a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 17:42:12 2008 +0100

    [sbuild] run_command is a method of $build_object, not a function

commit 1bc1f80a3091232ace719265ffc53ab611cbfd98
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 17:41:32 2008 +0100

    [man] Update sbuild-shell option formatting

commit f82ae935a1be30dd6c9482af5fb4c29647a6baa8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 17:41:04 2008 +0100

    [man] Update sbuild option formatting and copyrights

commit 662a071b5308f1bf4abaf04ebde6f5124be1b796
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 03:21:19 2008 +0100

    [sbuild-abort] Rewrite in perl
    
    * Added --help and --version options
    * Parse ps output robustly using perl regexes
    * Kill sbuild process group

commit 94cecc3c6e93fb370215f45c978b6009f1d89a53
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Aug 1 12:17:33 2008 +0100

    [sbuild-adduser] Add --help and --version options

commit 694fbd961de878dc663f2809998fddec9e2189d3
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Aug 1 12:12:15 2008 +0100

    [sbuild-checkpackages] Update copyrights

commit 873fde0efe3d2e171da067f666c5d264138fd264
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Aug 1 12:11:13 2008 +0100

    [sbuild-checkpackages] Add --help and --version options

commit 1f54f55d63e9bb4464593b9152a7c906322162a4
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Aug 1 12:00:36 2008 +0100

    [sbuild-apt] Add --help and --version options

commit 8723ae484a6795044794dc5f667f0bd5b8b19339
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Aug 1 02:43:25 2008 +0100

    [sbuild-stats] Add --help and --version options

commit 21660306883b67ed29500021a0aab42e082055f8
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Aug 1 01:48:06 2008 +0100

    [sbuild-update] Add --help and --version options

commit 9dbdd413dc353ab9d3f68d953adfbeee4bccef2e
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jul 31 00:36:25 2008 +0100

    [sbuild-hold] Update copyrights

commit 2258bd3771ebae8565832279d5aee4f37ccb2845
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jul 31 00:35:47 2008 +0100

    [sbuild-shell] Add --help and --version options

commit d6a140bf04c814022fdf5990202be94a92f0684c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 30 23:54:35 2008 +0100

    [man] Document sbuild --help and --version options

commit 8d12dbc10edf0a48c529500c4b24019c8c077f94
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 30 23:53:00 2008 +0100

    [sbuild-createchroot] Use sensible @ARGV option counting

commit d38d977f4a0cd6c2c01af16ffdf9173c7196e21c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 30 23:52:16 2008 +0100

    [sbuild-hold] Add --help and --version options

commit aedad61155f047b4e9d4516a13f72591aab14f33
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 30 19:37:08 2008 +0100

    [Sbuild::Options] Add --help and --version options

commit 2dca33dc2e0454d6998daf08beeafb7f61e112da
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 30 18:58:24 2008 +0100

    [Sbuild] Move usage_error from sbuild-createchroot to Sbuild

commit d7679fce21d2eb11f459f22b8077f0becc6f3787
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 30 13:55:07 2008 +0100

    [TODO] Add option parsing items

commit 2e7968b54c56d8e24f16645d6c62000f1a4df4e2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 13:55:03 2008 +0100

    [sbuild] Exit with 0 status when no build object exists

commit 7eaa13539e6542f553efbf81c2514cbfad2cbac8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 13:54:19 2008 +0100

    [sbuild-createchroot] Set up sources.list with --components values

commit a605979c837fa0da2dc44afb5a6f31cf1d0711f2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 13:44:43 2008 +0100

    [Sbuild::Options] Use isin from Sbuild
    
    Closes: #492577.

commit 28a510c7d768c22e4738cc45aad91c29069dc2f9
Author: Enrico Zini <enrico@debian.org>
Date:   Sun Jul 27 12:51:04 2008 +0100

    [Sbuild::Conf] New parameter apt_allow_unauthenticated
    
    APT authentication is now enabled by default, with this configuration
    parameter disabling the default behaviour.
    
    Closes: #492327.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 87140c82a3287712d5f3641f39ca31ad17640e2e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 12:17:14 2008 +0100

    [Sbuild] Move dump_file, help_text and version_text from sbuild-createchroot

commit ef2bd2269a87bfd86185b164df0210f0b6e98d86
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 12:02:18 2008 +0100

    [man] Document sbuild-createchroot options

commit 2f156e461b96157dfa1ca3bc117b7524810b185d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 02:22:01 2008 +0100

    [man] Bring sbuild-setup.7.in up to date
    
    - Use lenny in place of sarge in examples
    - Replace add_sbuild_user with sbuild-adduser
    - Update schroot documentation
    - Add quick start section, since most users will never need to read the
      instructions if using sbuild-createchroot

commit c0c33c118ac1d5f53b1efc51a039c9454dbf1948
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 02:21:03 2008 +0100

    [NEWS] Document sbuild-createchroot changes

commit 4297bbde36f3eb3adf8e9f9627b2c94211f31fda
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 02:19:47 2008 +0100

    [sbuild-createchroot] Rewrite in perl
    
    - Support most debootstrap options
    - Add schroot chroot definition to /etc/schroot/chroot.d
    - Add /etc/hosts
    - Don't rewrite /etc/apt/sources.list

commit 6f97f0941e433bafade492be17a5a5c7e813ba2a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 02:17:49 2008 +0100

    [sbuild] Don't use $Sysconfig::hostname

commit 875e5d234ce8a96ab6862a53b0f5957d988d2492
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 02:16:56 2008 +0100

    [Sbuild::Sysconfig] Export release date

commit dbc054f581c1feb85e33d7882074193a2c747c2b
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jul 7 22:05:17 2008 +0100

    [debian] Close #489794

commit aed048c57f9bacff4c903e8c293da02979253b71
Author: Francois-Denis Gonthier <fdgonthier@kryptiva.com>
Date:   Mon Jul 7 22:00:53 2008 +0100

    [Sbuild::Build] Use 'DSC' rather than 'DSC File' when checking sources

commit f6920f65913c995a00c90b09d444412ca5ab9910
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jul 7 21:58:34 2008 +0100

    [build] Bump version to 0.57.5

commit ea778d5bf971d551c135e2a55ac6ae433acaeb9c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 6 12:34:37 2008 +0100

    [Sbuild::Build] Add missing bracket

commit 0f349623a107556ddbf3c7d900bb4562ac453a18
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 6 12:25:47 2008 +0100

    [debian] Update to Standards Version 3.8.0.

commit 6f887f90234b44ba33175ac63f96ba65e26e0dd7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 6 12:22:38 2008 +0100

    [debian] Close bugs for release

commit 8c8e76abcc8059a1bdfaec98f849ff38c2b99552
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 6 12:22:05 2008 +0100

    [Sbuild::Build] Add additional uses of build metadata

commit 7f951f079a04a838c23788e70a6642ec26b1413e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 6 12:00:32 2008 +0100

    [Sbuild::Build] Unify package metadata handling
    
    Package version, name, and variants thereof are contained within the
    build object.
    Unpack directory name does not contain an epoch.
    The same information is no longer computed in multiple places.

commit 049b23d091e2c250927d2b2a8f8c654d71a6308f
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jul 3 20:31:06 2008 +0100

    [Build] Correct use of DSC Base

commit d018c73cececa2ea4574c1d061b31ea199fc8e33
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jul 3 20:29:19 2008 +0100

    [build] Distribute lib/Sbuild/Options.pm

commit fcd0e092611983215cde33e981bcd465f865f621
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 12:49:30 2008 +0100

    [Sbuild::Build] analyze_fail_stage, install_deps, append_to_FINISHED and should_skip take no arguments

commit 93d6a3e5427a8f555708665f1b52b92450ed9322
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 12:44:11 2008 +0100

    [Sbuild::Build] fetch_source_files and build take no arguments

commit 6a932256022a7c828da1ad114a4442518a081b01
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 12:03:32 2008 +0100

    [Sbuild::Build] open_pkg_log and close_pkg_log take no arguments

commit fe4f60b39ad774940757ca2f06c66e49800923ae
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 11:28:24 2008 +0100

    [Sbuild::Build] Store DSC, package and version information in class

commit 5a2afc8c74e335d0c71d6a127db8e5b121e0d281
Merge: 8786dd7 f077e29
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 10:42:37 2008 +0100

    Merge branch 'master' into options-object

commit f077e29c21a088417bc28ff1994ed8c1a0438c07
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 10:35:54 2008 +0100

    [NEWS] Bump version to 0.57.4

commit 8786dd74b64db0acd49de02fee9d2bda3ea56a26
Merge: 7ed5e04 cf5d3f2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 10:30:30 2008 +0100

    Merge branch 'master' into options-object

commit cf5d3f2ef4e8bd8c40f297e4d141b87f53ad9339
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 10:07:09 2008 +0100

    [README] Use new script names

commit db3534a5d362622f411e299e5a52aa14f3e7e3f4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 09:57:44 2008 +0100

    [man] Replace buildd.chroot with sbuild-createchroot
    
    Also replace adduser with sbuild-adduser.

commit b3c7e058587e02c1264b6c4a1b318f95d5d85d39
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 09:33:27 2008 +0100

    [build] Bump version to 0.57.4

commit 7ed5e042707d6c249d07e30ce6b9e6f6b2ba3e36
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 27 22:14:13 2008 +0100

    [Sbuild::Options] New class to parse sbuild options

commit 33e6557fe539d004c3568e4ba58b0d47183227cc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 25 22:56:30 2008 +0100

    [sbuild::Build] Path and filenames don't include epochs in version numbers
    
    Using epochs in version numbers can confuse make.  Make sure the epoch
    is stripped from the version number passed to dpkg_source.  Also remove
    from the path set by sbuild ("Chroot Build Dir").

commit 8bc3477690728ec2c61e8240b63df15b06de933a
Author: Niko Tyni <ntyni@debian.org>
Date:   Sun May 25 21:49:40 2008 +0100

    [Sbuild::Build] Correctly handle versioned provides
    
    Use "~*=PROVIDED=*=" in place of "=*=PROVIDED=*=" to change the sort
    order.
    Thanks to Niko Tyni for this patch.
    Closes: #395271.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 9bf1147149e23e9c21ede73a33a4e531cbd0553c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 25 21:36:27 2008 +0100

    [Sbuild::Chroot*] Use schroot "Session Purged" flag in place of "Session Cloned".

commit aab0bbd44d3ffc91123629f73c532f459fc5fc5a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 25 21:25:33 2008 +0100

    [Sbuild] Prototype copy()

commit 7d01e2475cf0402b97f16f66c9fae550f4253c31
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 25 21:25:19 2008 +0100

    [Sbuild::Build] Pass arrays as references where needed
    
    Some functions taking references to arrays were not being called
    correctly.

commit a3ab0b74b7caa8179723502b3f530a60377df115
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu May 22 00:31:29 2008 +0100

    [sbuild] Split options parsing into separate function

commit a7693de34454edae1515bf3faeb39af70dd38635
Merge: d92498b cb27716
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 20 23:03:46 2008 +0100

    Merge branch 'master' into build-object
    
    Conflicts:
    
    	TODO

commit d92498bd8e52b550ad2037d035cd59486bfdc622
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 20 23:00:06 2008 +0100

    [TODO] Note logging issues

commit b9ca49b4ebd1f434f0f08a8a55769bf237661567
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 20 22:56:56 2008 +0100

    [Sbuild::Build] Move Sbuild::Build from sbuild
    
    All Sbuild::Build module code moved from sbuild.
    lib/Sbuild/Build.pm is distributed and installed.

commit 9f4c7bdd5490a2a4d18f80038b68f406173f43b0
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 20 22:51:52 2008 +0100

    [sbuild] Convert build hash into Sbuild::Build class

commit 0e64d9b93f3d3907ca9973bc0728962a06bdb8c4
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 20 22:49:51 2008 +0100

    [Sbuild::Chroot] Don't export new

commit 265d7c46878ed221d679d46c1a4cb0e1ce907201
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 20 22:46:39 2008 +0100

    [Sbuild] copy() does not need a self argument

commit cb27716b39bd18237c326acd90341f0abb472cf5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 18 00:17:45 2008 +0100

    [TODO] Are build and package start times the same?

commit 5c97b2637772befb8ba488a5c85378690a81226b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 18 00:14:51 2008 +0100

    [sbuild] Move shutdown() to end of file

commit f737178c40f67334bd17450a0629aaec6478fe99
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 18 00:12:38 2008 +0100

    [Sbuild] Move copy() from sbuild

commit dc563c8cc3b612ccebaffbdc7a13fcd1bae39d1d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 18 00:08:24 2008 +0100

    [sbuild] build_new: Initialise 'GCC Snapshot' as integer, not array

commit e4e7623d05285dd738de54d4a4429b26326919bf
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 18 00:06:29 2008 +0100

    [Sbuild::Conf] Move $stats_dir from sbuild
    
    $stats dir moved from main:: in sbuild.
    Exported by Sbuild::Conf.
    Defaulted to $HOME/stats
    Added to sbuild.conf and example.sbuildrc.

commit 3153173b82e01a337608b39744d3b01ea3f09b9f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:48:19 2008 +0100

    [sbuild] Replace %main::this_watches

commit c63103f59c3af302011bd7ad667a795dc9b22060
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:44:55 2008 +0100

    [sbuild] Replace $main::pkg_fail_stage and $main::useSNAP

commit 178084457605e7ebf6df75b98904eb034baa7fc9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:37:29 2008 +0100

    [sbuild] Replace $main::sub_pid and remove $main::shutdown in dump code

commit 1f2bbddaaaae3ef79a87133fff92b604c822a558
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:32:00 2008 +0100

    [sbuild] Remove @main::manual_srcdeps

commit 85becb50444ce3d7264ac0ba43adcb6da736620f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:29:22 2008 +0100

    [sbuild] Replace $main::ld_library_path

commit c38a2159c2fad7d2829e898845d934dc33c05e19
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:09:59 2008 +0100

    [sbuild] Replace $main::have_dsc_build_deps

commit 6eacf8707e13e2ee6f90fd2e2215387dbb42a121
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:05:45 2008 +0100

    [sbuild] Replace $main::dpkg_buildpackage_signopt

commit 5ced3fe4a5e8d2611794890f3ac6a3006a555113
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:02:56 2008 +0100

    [sbuild] Replace $main::deps

commit af5350febf6af09e595490fe6583f7161241fb35
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 22:56:29 2008 +0100

    [sbuild] Replace $main::database

commit d95c5b20a2488772cf84a3bd84190faad4dc05e1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 15:54:14 2008 +0100

    [sbuild] Replace %main::changes

commit 1c0e1112ac1cc6e8069feb40597d7b0481bfc372
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 15:29:25 2008 +0100

    [sbuild] Replace $main::build_start_time

commit 699be6210a2c4afc0f79c827a3dad0b5b6f3263b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 15:27:11 2008 +0100

    [sbuild] Replace $main::binNMU*

commit 58ec0fd3dac94d33eb6132a69de92fd84b976e15
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 15:20:19 2008 +0100

    [sbuild] Replace $main::additional_deps

commit f4958e566442765e68bd09bb939e8e0ab2bcd7aa
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 14:54:59 2008 +0100

    [sbuild] Replace $main::sub_task

commit 0c5821b193619fe6303c75f6f64b4c1666458f90
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 14:52:34 2008 +0100

    [sbuild] Replace $main::override_distribution

commit 65d14bf861f397b72940a349ec1d1b1767616894
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 14:50:43 2008 +0100

    [sbuild] Replace @main::toolchain_pkgs

commit 2c50820f2918a018741a9fd8cff57e27fad93df0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 14:36:25 2008 +0100

    [sbuild] Replace $main::this_space

commit 68da16515960351060d733248bbb82b81879854c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 14:22:35 2008 +0100

    [sbuild] Replace $main::pkg*

commit dca244a0ab514edf7facfffe21521f6339400d4f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 13:38:36 2008 +0100

    [sbuild] Replace $main::ilock_file

commit f8424b500de79faa6df82c496119b1f3a05ca46c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 13:35:45 2008 +0100

    [sbuild] Replace $main::srcdep_lock*

commit 8bb1a7ef891e7c7bd862580495fb6ef4b02b06a6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 13:30:47 2008 +0100

    [sbuild] Replace $main::chroot*

commit bc97881530b28481d1757d93a421a68a50070930
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 13:17:59 2008 +0100

    [Sbuild::Conf] Move lock timeout settings from being hardcoded in sbuild

commit 66c4345d854f99aa14693aa85af8382b9e02f87c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:42:11 2008 +0100

    [sbuild] Replace $main::jobs_file

commit c2ed2a4deff575b72561a2fc99ac577db550a424
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:39:02 2008 +0100

    [sbuild] Remove redundant main:: namespace usage

commit 5bca06718b8d10a738a0416b1b2b1ea7146a3fb5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:37:31 2008 +0100

    [sbuild] Replace $main::build_arch_all and $main::build_source

commit 91ba7baddeb016e1d9608acc612a9b798d1203f7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:30:50 2008 +0100

    [sbuild] Replace $main::verbose

commit 070673d342353fa3f01ca781168f00de49bd2825
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:29:35 2008 +0100

    [sbuild] Replace $main::username

commit dcf8e7a70800445927ce6a51f1bab82adc7b3c95
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:26:46 2008 +0100

    [sbuild] Remove $main::nolog

commit 82cb64018a577f09f2ba45c21b747d0e5fc562ff
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:25:51 2008 +0100

    [sbuild] Remove $main::cwd

commit 6063f102efd1f29f186af77544cd370a5670658f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:23:46 2008 +0100

    [sbuild] Replace $main::auto_giveback*

commit e715a91f3fcb2a104dc9f199e9e1be23723fccb6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:11:14 2008 +0100

    [sbuild] Replace $main::batchmode

commit cfea6c6380573cea6bcc49a06b4dd2d3b85f836f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:07:34 2008 +0100

    [sbuild] Replace $main::user_arch

commit ff8e92121f12c89b87a9f1741f847183e4e73ba4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:05:58 2008 +0100

    [sbuild] Replace $main::arch

commit 3064be7160fc3b89647c79e1664dd9d3f871c422
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:03:35 2008 +0100

    [sbuild] Move global statements into main function

commit 5e5e987ad1dd5a7c51b5ff9d53c9709312f40989
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 11:57:58 2008 +0100

    [sbuild] Build object creation and initialisation separated into function

commit 286efa216265327730bd8faa236d3c4d6d2413f4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 11:52:06 2008 +0100

    [sbuild] Remove $session (2)

commit fbfda502dd1e248d4e63de72da914ec2c8ba82f1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 11:37:08 2008 +0100

    [sbuild] Remove $session (1)

commit 7dfc639c0b2585149d1bf256a3e0d367b01008c9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 11:20:13 2008 +0100

    [sbuild] Replace $main::current_session

commit 46c95673aa51801f6619744245f91244db712d71
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 11:16:01 2008 +0100

    [sbuild] Replace $main::distribution

commit 77b7a63008bc10012241908d549b0c1899d5f79b
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 13 22:04:23 2008 +0100

    [sbuild] All functions take self argument

commit 9cbe303935b88c8c7a024c7a58a57776b1051c36
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 11 12:15:17 2008 +0100

    [debian] changelog: Remove blank line

commit fc4d76072737d1b1fe2a561f35c41285776c3a64
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 11 10:58:01 2008 +0100

    [NEWS] Update for 0.57.3

commit 7d660a72018eb82ae1f25ccc171a77171b59cf0d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 11 10:50:27 2008 +0100

    [debian] Finalise for 0.57.3.
    
    Closes: #479714.

commit 8a837f653a7c279454138a5bdd3d5ef1b00b433b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 11 10:35:15 2008 +0100

    [Sbuild::Chroot] Add directory argument to chroot _command functions
    
    This allows commands non needing to be run in the build directory to
    run if the build directory does not exist.
    sbuild no longer needs to chdir at any point.

commit fc34a567e6cc1b734d2d2ca918b9fe265b1efa3f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 4 09:32:37 2008 +0100

    [Sbuild::Chroot] Convert to object-oriented Perl
    
    * lib/Sbuild/Chroot.pm:
      - Add constructor and convert all functions to methods.
      - Remove all global variables.
    * lib/Sbuild/ChrootInfo.pm: New file; non-class functions from Chroot.pm.
    * lib/Sbuild/Utility.pm: Create and use a Chroot object.
    * bin/*: Create and use a Chroot object.  sbuild passes this to all
      functions using chroot functionality.

commit 79b01b95d9fbae7b0d023d4f0a41c801d2dad58a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 4 09:24:26 2008 +0100

    [utility] Call shutdown with signal name
    
    Needed to satisfy signal handler function prototype.

commit 28736396de60496f610f3b26d2ba8a3a72b39123
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 3 18:08:36 2008 +0100

    [Sbuild::Conf] Use INIT block to save need to call init() by hand

commit b272e02437348bc2651b9d38ee0dc91bb0d3da59
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 3 18:02:25 2008 +0100

    [Sbuild] Use same exporting style as other modules

commit 250ccf0cfced7c962d3f93cc8c00107f021f326d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 3 18:01:24 2008 +0100

    [build] Bump version to 0.57.3.

commit 39cf11d3ece825098e334c4e469ddbf5e02e511d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 21:33:08 2008 +0100

    [build] Install 50sbuild as an executable script

commit 15dd875fef35e97a36d0d63fc7325e0a045c6c57
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 21:32:36 2008 +0100

    [sbuild] Add architecture to build directory name

commit 56b85facd6ae3f64851e9d3814ec4744d8d133e9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 21:16:09 2008 +0100

    [build] Distribute 50sbuild

commit 4d537bdacfeaf3cebd10e95958fdd5156c718359
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 21:15:41 2008 +0100

    [NEWS] Add new features

commit 98625200505c9ae7cb2e031e1120ed2e86e1ef73
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 21:14:46 2008 +0100

    [man] Complete main markup of wanna-build manpage

commit 3c7c311076349d2acd47ae80c5b97e5d9b0fee60
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 19:14:26 2008 +0100

    [sbuild] Use dcmd to parse dsc files, rather than hand-parsing

commit 3897e3efd6497fee06e10ae08da90deb26d2fd9d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 18:53:08 2008 +0100

    [Sbuild::Conf] Don't require $mailto to be set if not a buildd

commit ba40d940c01ede790862446ce6075a32a285fdf4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 18:41:08 2008 +0100

    [man] sbuild.1.in: --distribution should be --dist

commit 7f3ebc296fa7d49b2d390a8a6e4c85fd7dff6028
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 18:36:47 2008 +0100

    [man] sbuild.1.in: Document --binNMU.

commit e9c0b218f9bc38646c0abf9f5a6c90ae5014014f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 18:21:15 2008 +0100

    [debian] Depend on debhelper version 6 or greater

commit aea12f9879e29a9a4779170063ca25360efdd14c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 17:55:51 2008 +0100

    [schroot] Include 50sbuild schroot setup script
    
    configure.ac: Add SCHROOT_CONF.
    etc/Makefile.am: Install 50sbuild.
    etc/50sbuild: New file.
    debian/sbuild.install: Install 50sbuild.
    debian/control: Replace the /etc/schroot/setup.d/50sbuild in schroot.

commit 9743e327843e20c4be4af7fbb826cb2a89f6450c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 17:42:17 2008 +0100

    [sbuild] Purge all built files and downloaded sources
    
    sbuild:
    - Create a temporary build directory for each job.
    - Don't track each file created within the build directory.
    - fetch_source_files:
      + Rename @made to @fetched.
      + Return 1 and 0 on success and failure, respectively, rather than a
        file list with "ERROR" to indicate failure.
    - build: Purge the temporary build directory, rather than individual
      files.
    - shutdown: Purge the build directory.
    - remove_files: Remove.
    
    Sbuild::Chroot:
    - _setup_options: Remove username from build directory path.

commit 065b015d2a6912b2e18e880eddc0f3045165a990
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 17:27:19 2008 +0100

    [debian] Ignore *.log

commit e66cf961c9f26fcb5e5ec57d7d530ae5a5a72a31
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 17:26:43 2008 +0100

    [debian] Add GIT repository details to debian/control

commit 9c83c00de48ac9fc1e876481e29d50ef8163719b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 20 22:17:15 2008 +0100

    Update authors, copyright and TODO items

commit 7e5af2977f281f5bcf9589dd3a5816f96076072a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 20 21:12:30 2008 +0100

    [sbuild] Add --chroot option
    
    Add --chroot option to specify a chroot separately from the distribution name
    
    Closes: #474160
    
    Thanks to Simon McVittie.

commit 4715bf080408263230a40a14a4b42e38054e5e52
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 20 20:24:02 2008 +0100

    [Sbuild::Conf] Add /usr/bin/dcmd as $dcmd

commit 56b57381674f2263404a0c0003730444b24bbebe
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 20 13:25:46 2008 +0100

    [man] Update wanna-build manual page.

commit b6f7ba47f5549b9d814c8c030fb92e0c621639ca
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 20 11:50:02 2008 +0100

    [debian] Update README.Debian and remove README-buildd.chroot reference.
    
    Closes: #474487.

commit d2582f13ea7e376d875d736cbbb350e92453e33b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 20 11:36:04 2008 +0100

    [sbuild] Add --apt-update option to run "apt-get update" before building.
    
    Thanks to Timothy G Abbott <tabbott@mit.edu>.

commit 057baeebaaaf5cfd9f98c3359189f6dbecbf02a8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 6 14:10:03 2008 +0100

    Install shorthand symlinks for wanna-build

commit 23d4e773a550148a97a176a4276b89108bfe9278
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 6 13:37:28 2008 +0100

    man/sbuild.1.in: Add missing character
    
    Thanks to LI Daobing.

commit d39e96ca99b621350de1940c639300b21c189140
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 6 12:19:26 2008 +0100

    Generate ChangeLog automatically from "git log"
    
    ChangeLog is automatically generated using "git log" at "make dist"
    time, using the scheme already used in schroot.
    Version bumped to 0.57.2.

commit edd3a8274812e2cb24185b3ea10f19f2c782ea75
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 6 11:58:13 2008 +0100

    * Add back generation of man/sbuild-upgrade.1.

commit a8827a76c8974d86a0caa2e986470cc4f47d79f6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 6 11:55:02 2008 +0100

    * man/Makefile.am (man_MANS): Install wanna-build.1.
    * configure.ac: Generate man/wanna-build.1.
    * man/wanna-build.1.in: New manual page, replacing README.buildd,
      README.failcat and README.overview, which have been removed.
    * main/sbuild.1.in: Update configuration file description.

commit 8d45ac97c62d9a6cf9b259a8953729d18740566d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 6 11:49:38 2008 +0100

    debian/copyright: Build infrastructure is licensed under GPL3+.

commit d326029324795e01fd7ce22738749e1bfa4776fb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 5 15:48:12 2008 +0100

    * debian/rules: Run dh_link in binary-indep target to correct symlinks.

commit cfd87fb9d364d3ef9faf564bdb940f63904b3045
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 5 15:32:22 2008 +0100

    debian/copyright: Update copyright holders and copyright information.

commit 9c4546cc55c247fd5abb7ef53d6d162916768d5e
Merge: ee54adb 0668d72
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 1 16:21:04 2008 +0100

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild
    
    Conflicts:
    
    	ChangeLog

commit ee54adb2af57a3b34ede31f8cbf200e5a0f8aa00
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 1 16:18:41 2008 +0100

    * bin/sbuild
      (fetch_source_files): Remove use of verify_md5sums.
      (verify_md5sums): Remove.  The verification is already done by
      dpkg-source.

commit 0668d724b847010c41e1f47edfbf9f6bd690bae2
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 27 20:48:30 2008 +0000

    * Version 0.57.1.

commit c1e3cbc8699da54f9f540bdabc6436a128eaa668
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 27 20:47:37 2008 +0000

    * bin/sbuild (build): Don't parse output of dpkg-source.  Specify
      the build directory explicity.

commit 5863d59db761ac5a51628a16dbc9b4c969a8d328
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 02:47:13 2008 +0000

    [sbuild] Add missing optional function arguments

commit 48bf27b9eab42193fb6d0fc7d089d9cdccfbb7e8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 02:46:08 2008 +0000

    [modules] All modules use function prototypes
    
    Buildd, Sbuild, Sbuild::Chroot, Sbuild::Conf, Sbuild::Log, Sbuild::Utility,
    and WannaBuild::Conf all use function prototypes.

commit c91e6e3328a3f067defef07a1e5f90ed4b5f38a9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 01:14:42 2008 +0000

    [buildd] shlibdb-compare, sourcedeps-makerev and update-shlibdb use function prototypes

commit f6bc158df626d7fe43583e3399826fded25627e1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 01:14:02 2008 +0000

    [wanna-build] wanna-build, wanna-build-mail and wanna-build statistics use functionn prototypes

commit c99288116244aa65bad8fa3f8377bf7ec0874da9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:42:26 2008 +0000

    [sbuild] All helper programs use function prototypes
    
    sbuild-adduser, sbuild-apt, sbuild-checkpackages, sbuild-hold,
    sbuild-shell. sbuild-stats, sbuild-unhold, sbuild-update, and
    sbuild-upgrade use function prototypes.

commit a4f12d539bd2316f301c1bd0b401a7522782ecce
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:34:29 2008 +0000

    [wanna-build] do-merge-packages and do-merge-quinn use function prototypes

commit 5effe3c277fae3baaabfa78048628e80a2fc2ad1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:30:59 2008 +0000

    [buildd] check-old-builds uses function prototypes

commit e2ace785ad47467bc10ca33f61ba77ada4fd1b19
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:28:19 2008 +0000

    [buildd] buildd-watcher uses function prototypes

commit 0e41f152f837561f1e17929ea4fdf2cf965bc967
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:23:49 2008 +0000

    [buildd] buildd-vlog uses function prototypes

commit 66568b45e04fee9a89dee06d7393afa94254c9c0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:21:32 2008 +0000

    [buildd] buildd-uploader uses function prototypes

commit dea0ab085067877817c9ff5cc25117a630e5e967
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:19:23 2008 +0000

    [buildd] buildd-clean-upload uses function prototypes

commit a21f420524d96167c1dd5c76c9d7decdc97a6702
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:18:35 2008 +0000

    [buildd] buildd-mail uses function prototypes

commit c8fdc92f56027140848390749f3d8cc8770edc09
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 8 23:47:18 2008 +0000

    [buildd] Use function prototypes
    
    buildd and Buildd::Conf use function prototypes.
    Buildd::Conf also defines HOME and scopes function
    calls correctly.

commit 4e22dc818eda18ba11f8769c1e31e63d51f01c59
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 8 16:40:24 2008 +0000

    [sbuild] Add prototypes

commit 0f91a21da4dd120572e49d6d7d788dfafcc290b5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 8 03:52:04 2008 +0000

    * bin/sbuild: Pass date to open_pkg_log.  Pass current job and
      distribution to close_pkg_log.
      (open_build_log): New function to wrap open_pkg_log and print
      start message.
      (close_build_log): New function to wrap open_pkg_log, update
      statistics and print end message.
      (add_time_entry, add_space_entry): Move from Log.pm.
    * lib/Sbuild/Log.pm:
      (open_pkg_log): Pass date as an argument.  Don't print build start
      message.
      (close_pkg_log): Pass package name and distribution as arguments;
      don't pass build space.  Format date from $pkg_end_time.  Remove
      statistics updates and buld end message.
      (add_time_entry, add_space_entry): Remove.

commit 3508fafb0d2a1c0ee88cdf640f232a8be34f1571
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Feb 29 21:36:12 2008 +0000

    * lib/WannaBuild/Conf.pm: Define $HOME.

commit f2455a4aa02f6feaa336ed223ab9841c4e87fc4d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 26 21:17:09 2008 +0000

    * bin/Makefile.am (bin_SCRIPTS): Add wanna-build programs.

commit 995dddf09351f3e00beb1d6480d4348886f6e6fb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 26 21:15:37 2008 +0000

    * debian/control: Add wanna-build package.
    * debian/wanna-build.install: New file: files for wanna-build.

commit 81022e92380ecf0e4ffb3ecd27d946d6c6aa273c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 26 21:11:13 2008 +0000

    * etc/Makefile.am (builddsysconf_DATA): Add buildd config files.
    * configure.ac: Add paths for buildd config files.

commit de472eea2a0a7dfe44ebbef67ace756d9da36f0e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 26 15:03:01 2008 +0000

    * bin/wanna-build-mail: Rename from wanna-build-mail.pl.
    * src/wanna-build-mail.c: Remove.
    * src/Makefile.am: (bin_PROGRAMS): Remove wanna-build-mail.c.

commit 07b603bc45178e2e440f207101ba8d5d45d439bd
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 23:55:37 2008 +0000

    * debian/changelog: Close #458779.

commit 9a7e1b878fb508bafbb11808e64487be67364092
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 23:55:10 2008 +0000

    * .gitignore: Ignore *.tar.*.

commit e7652023b714733b978ccd8003592bc8e8b45e1f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 23:54:37 2008 +0000

    * NEWS: Add changes for 0.57.1.
    * configure.ac: Create .tar.gz distribution tarball.

commit c8399a19c4ca4ddd278d222f7dfdd8fa7fbc6414
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 23:32:04 2008 +0000

    * debian/rules: set libexecdir to /usr/share, for compatibility with
      locations of scripts in earlier versions.
    * debian/schroot.install: use /usr/share in place of /usr/lib.

commit b8994766ebcf1323118a85d26f44bfbd37dd8a69
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 22:03:22 2008 +0000

    * lib/Makefile.am (perlmod_DATA): Add Buildd.pm.

commit 400cea155169082d2ae9f3cf528c374970ab8d01
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:57:27 2008 +0000

    * etc/buildd.conf: Update with default options.

commit 5639022c4baafcdff021fcd259ec9a00d61f2324
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:56:07 2008 +0000

    * TODO: Add conf as classes item.

commit 48354ac8f5c4685b9e79bd0ed4a8ffb6b3d00ddd
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:55:35 2008 +0000

    * lib/Buildd/Conf.pm: Add and export read function to read
      config.  Add checks from buildd.

commit c23c68ff826883efac6d89576112906ff4cbe109
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:55:11 2008 +0000

    * lib/Buildd/Conf.pm: Add and export read function to read
      config.  Add checks from buildd.
    * bin/buildd: Use Buildd::Conf.  Use Buildd::Conf::read in place
      of read_config().
    * bin/wanna-build: Remove isin function (now in Sbuild.pm).
    * bin/buildd-uploader, bin/buildd-watcher: Use Buildd::Conf.

commit 4a230058bf94136278b35b0895afaf5fb0dc48d3
Merge: c0a478e b27b9e2
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:42:50 2008 +0000

    Merge branch 'master' of git+ssh://git.debian.org/git/buildd-tools/sbuild
    
    Conflicts:
    
    	ChangeLog

commit c0a478e1890085bcfedb16b8e00ba9933dc5d162
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:39:40 2008 +0000

    * Update .gitignore files.

commit 27a97dd5af27489d681075df67dec8129c0b62f0
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:38:02 2008 +0000

    * Makefile.am (SUBDIRS): Add src.

commit c4493778d634b59c6a0dfcbca6eb5af7592dd3b5
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:37:23 2008 +0000

    * etc/wanna-build.conf: Correct comments.

commit bff2e84485c42d1442e0015d6556fafaa971eb59
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:36:34 2008 +0000

    * src/buildd-mail-wrapper.c, src/wanna-build-mail.c: Remove
      shebang in comment boilerplate.
    * configure.ac: Generate new Makefiles.
    * src/Makefile.am: Build buildd-mail-wrapper and wanna-build-mail.
    * lib/Makefile.am (SUBDIRS): Add Buildd and WannaBuild.
    * lib/Buildd/Makefile.am, lib/WannaBuild/Makefile.am: New files.
      Install perl modules.

commit 49f7b659c0003564b0526f54550ae5d1572d354d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:10:07 2008 +0000

    * lib/Buildd.pm: Remove read_config function (replaced by
      Buildd::Conf).  Remove isin and binNMU_version functions also
      implemented in Sbuild.pm.

commit c62fffa8f9c0978503622823720cd559506c2e6a
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:07:42 2008 +0000

    * lib/Sbuild.pm: Add isin function.

commit b27b9e2351b5d3780730bcc57bbdac9d1bf7ae59
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 20:52:24 2008 +0000

    * Version 0.57.1.
    * configure.ac: Dump version to 0.57.1.
    * debian/control: Depend upon schroot >= 1.1.6.  This version includes
      a SESSION_CLONE property, used to determine if a chroot is cloned,
      and hence package removal may be skipped.

commit c7e38321323e752d8b79929aa165ce35d72fa38b
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 20:48:32 2008 +0000

    * bin/sbuild: Rename "Session Managed" to "Session Cloned".
    * lib/Sbuild/Chroot.pm (init): Rename "Session Managed" to
      "Session Cloned".

commit 4b39aec91b45740554b573c3b196edf5a6641c27
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 21:14:35 2008 +0000

    * bin/wanna-build: use Sbuild.pm.
    * lib/WannaBuild.pm: Remove (replaced by Sbuild.pm).
    * lib/Sbuild.pm: Add parse_date function (from WannaBuild.pm).

commit 42597d0ee7740fc62aedc500191f9cac7ed11ad5
Merge: 3d56c1a 81c60d0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 18:16:36 2008 +0000

    Merge branch 'master' of git+ssh://git.debian.org/git/buildd-tools/sbuild

commit 81c60d0da6884ae8f5475836256c57cbbd700e2a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 18:15:50 2008 +0000

    * Merge buildd repository.

commit f927a39d4293e350e5bfe9c8e07543fba47c3920
Merge: 1db0a9e 10d80a6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 18:15:29 2008 +0000

    Merge buildd history
    
    Merge branch 'buildd-cleanup'
    
    Conflicts:
    
    	.gitignore

commit 10d80a6e0369b3c6a0b69d66169aad5c42f338d6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 18:12:59 2008 +0000

    Move files for etc and lisp outside bin.

commit a9f3f1c28f3814b9b8d890374689255852a9162d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 18:00:38 2008 +0000

    Rename files to fit into sbuild scheme.

commit fd26bd4ea69b4777d34124118f8c7c67e974418d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 16:44:38 2008 +0000

    * wanna-build.conf.local: Remove.
    * wanna-build.conf: Update with a complete list of settings,
      including those from wanna-build.conf.local, removing unused
      variables.
    * wanna-build: Use WannaBuild::Conf.  Check if $conf::log_mail is
      defined.
    * do-merge-quinn: Use WannaBuild::Conf.  Check if $conf::stat_mail
      is defined.
    * do-merge-packages: Use WannaBuild::Conf.
    * WannaBuild/Conf.pm: Module to load wanna-build.conf, created
      from common code in wanna-build and do-merge-*, modelled on
      Sbuild::Conf.  This contains a complete list of default settings.
    * Update debian/rules to reflect changes.

commit 73333875e1d4b9547a860b58265b4dc9f6500f88
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 14:14:48 2008 +0000

    * Replace all references to /var/debbuild (or /var/state/debbuild
      or /usr/local/var/debbuild) with /var/lib/wanna-build for FHS
      compliance.

commit df88552ee67eb9742ef24f0db695c76b05a75032
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 5 19:14:04 2008 +0000

    * wanna-build:
      - Move @distributions and %dist_order into conf package.  Thanks
        to Florian Lohoff.
    * wanna-build.conf:
      - Add @distributions and %dist_order.

commit 3d56c1ab34e4884c15f61d8d0e1f6279d4156d57
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 1 13:10:02 2008 +0000

    * Remove sbuild-stats item.

commit 1db0a9ed09f9e6849fca6f209806d2e25e7f5553
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 1 11:38:19 2008 +0000

    * Version 0.57.0.
    * lib/Sbuild/Makefile.am: Install Sysconfig.pm.

commit 02e0f7df132e74246b1492860517ca00a463f0ab
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 1 01:32:44 2008 +0000

    * bin/Makefile.am: Create sbuild-adduser and sbuild-createchroot
      compatibility symlinks to $(sbindir).

commit 42908135b0d81c9d484dbac6272fe95da0142393
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 1 01:25:09 2008 +0000

    * NEWS: Add changes.

commit 60d8d1abb7d3f7e33310e739c895db14e7f9b1bb
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 1 01:24:37 2008 +0000

    * Makefile.am: Distribute all scripts and files.

commit b2aca5e6b18b15eba7b55609b8cfb6f73c6df16e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 1 00:46:52 2008 +0000

    * Update version.

commit 4535d9430134f0ff476f265ea862d93ab780de06
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 1 00:15:08 2008 +0000

    * man/sbuild-stats.1.in: Rename from avg-pkg-build-time.1.in.
      Update with --time option and examples.  Update copyright
      information.
    * man/Makefile.am
      (man_MANS): Rename avg-pkg-build-time.1 to sbuild-stats.1.
      (install-data-hook): Create compatibility symlinks for
      avg-pkg-build-*.
    * configure.ac: Add man/sbuild-stats.1.
    * bin/sbuild-stats: Rename from avg-pkg-build-time.  Use
      Getopt::Long.  Unify modes into $mode, and update database
      location based upon $db, which is also set if invoked through a
      compatibility avg-pkg-build-* symlink.
    * bin/Makefile.am
      (bin_SCRIPTS): Add sbuild-stats.
      (pkglibexec_SCRIPTS): Remove avg-pkg-build-time.
      (install-exec-hook): Symlink avg-pkg-build-time and
      avg-pkg-build-space to sbuild-stats.

commit a6a12c55322c7ab33a3052b71cf8556719cfe0b9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 29 14:52:58 2007 +0000

    * Document chroot abbreviations.

commit c5cdf3fd9088f08c39aa59b65ef0599fc2e9be69
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 29 14:29:06 2007 +0000

    * man/Makefile.am: Add new manual page.
    * man/sbuild-abort.1.in: New file.
    * bin/Makefile.am: Use new program name.  Create compatibility
      symlink.  Add --list and --set options.
    * lib/Sbuild/Conf.pm: Add and export $package_checklist.
    * configure.ac: Add sbuild-checkpackages.1.
    * bin/sbuild-checkpackages: Rename from bin/checkchroot.  Use
      $Sbuild::Conf::package_checklist for reference list location.

commit 4d32f457dd827c6d8789b6f5eb7df89ee06587a7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 29 12:59:54 2007 +0000

    * sbuild-abort.1.in, sbuild-apt.1.in, sbuild-hold.1.in,
      sbuild-shell.1.in, sbuild-update.1.in, sbuild-upgrade.1.in: New
      manual pages.
    * lib/Sbuild/Utility.pm: Call open_log and close_log in setup and
      cleanup, respectively (following setting nolog=1).  This is to
      create main::LOG and main::PLOG.
    * lib/Sbuild/Sysconfig.pm.in: Use Sbuild::Conf::dpkg.
    * lib/Sbuild/Chroot.pm (begin_session): Ensure $arch is defined.
      Use main::LOG rather than LOG.
    * configure.ac: Add manual pages.
    * bin/sbuild-apt, bin/sbuild-update, bin/sbuild-upgrade: Set
      DEBIAN_FRONTEND to "noninteractive".
    * bin/Makefile.am: Update script names, and create symlinks for
      compatibility with the old names.
    * sbuild-abort, sbuild-apt, sbuild-update, sbuild-upgrade,
      sbuild-shell, sbuild-hold, sbuild-unhold: Rename from
      abort-current-build, chrapt, updatechroot, upgradechroot,
      gochroot, chr-hold, and chr-unhold, respectively.

commit 296aa056705161b1518c01f427c82c12b002cfc3
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 28 18:12:44 2007 +0000

    * man/Makefile.am: Add sbuild-adduser.8.in.
    * bin/Makefile.am: Add sbuild-adduser.  Move sbuild-adduser and
      sbuild-createchroot to sbin_SCRIPTS.
    * bin/sbuild-adduser: Renamed from bin/add_sbuild_user.
    * man/sbuild-adduser.8.in: New file.

commit eab8bcf2f37c8d8b06958cc837c6b6d7b6af7c99
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 28 01:09:57 2007 +0000

    * Update copyright and GPL2+ licence boilerplate on all files.

commit 9ed6be65ea51616c1feccedebdd09f49d0784a66
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 27 22:02:32 2007 +0000

    * configure.ac: Create lib/Sbuild/Sysconfig.pm.  Don't create
      lib/Sbuild/Log.pm.
    * lib/Sbuild/Sysconfig.pm.in: New file.  Generate with version
      number, and determine hostname and arch.  Export arch, hostname
      and version.
    * lib/Sbuild/Log.pm: Rename from lib/Sbuild/Log.pm.in.  Remove
      substituted @VERSION@ and hostname and arch determination.

commit dd3b0774deaca8a4f5ddb4a1a627fabaed3f4230
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 27 20:07:27 2007 +0000

    * debian/*: Update packaging to use new autoconf/make.  See
      debian/changelog.
    * scripts/sbuild_release.m4.in: New file for generating release
      date.
    * scripts/global.mk: Global automake defaults.
    * */.gitignore: Update with new generated files.
    * man/*.1.in, man/*.7.in: Use @RELEASE_DATE@.
    * debian/.cvsignore: Remove.
    * bin/add_sbuild_user: Move from chroot/.
    * TODO: Add checkchroot updates.
    * lib/Sbuild*: Move from Sbuild*.
    * README: Move from chroot/README.
    * bootstrap: Add autotools bootstrap script.
    * configure.ac: Add autoconf template.
    * */Makefile.am: Add automake templates.
    * AUTHORS: New file.
    * ChangeLog: Start upstream changelog.

commit 4da0b2c85568d4eb6b9cbf0561e56476b36c646d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 27 12:37:30 2007 +0000

    * debian/rules: Move -stamp files to debian/.
    * sbuild.conf: Move to etc/.
    * example.sbuildrc: Move to etc/.

commit 22ff09b1ec065058250ab84c6e5806934030d309
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 27 01:18:32 2007 +0000

    * sbuild: Move to bin/.
    * avg-pkg-build-time: Move to bin/.

commit ee61899d5db5cf10e3adac8ab1b940efef09cfad
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 27 01:12:55 2007 +0000

    * TODO: Remove completed items.

commit 50b9af7b0660b37f73889dc0e77a88dc048a1ea4
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 27 01:07:54 2007 +0000

    * Move manual pages to man/.
    * debian/manpages: Move manual pages to man/.

commit 957b31abf707b98e4dde23f1dd529a2977ba5021
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 27 00:39:27 2007 +0000

    * bin/sbuild-createchroot: Also install fakeroot and build-essential.

commit 646b3ea4c4cbc0885bccabb299836ced2c03f60c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 26 18:51:27 2007 +0000

    * Reindent all sources
    * Remove whitespace

commit 92db3d22501dc785e6edab8d6bf63054bf383138
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 26 17:21:19 2007 +0000

    * Remove CVS Id tags.

commit 7ddca43c89e2d9cff52511d14fb61428bd86fc70
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 26 17:17:20 2007 +0000

    * Update GPL boilderplate to use current FSF text.
    * Add boilerplate where missing.

commit 66ce20ef293eba56964f1eaf14bb7a9ef69feeb2
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 26 16:02:25 2007 +0000

    Ignore backup files.

commit 5d3dc35e9432e9ea5c856e3181cdba8beefcd134
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 16:33:14 2007 +0000

    * sbuild:
    - filter_dependencies: Remove redundant conditional.
      [Jan-Marek Glogowski]
    - Add check for check-depends-algorithm option. [Jan-Marek Glogowski]
    - filter_dependencies: Change dependency behaviour depending upon
      check_depends_algorithm.  [Jan-Marek Glogowski]
    * Sbuild/Conf.pm: Add and export $check_depends_algorithm.
      [Jan-Marek Glogowski]
    * example.sbuildrc: Add missing variable types.  [Jan-Marek Glogowski]
    * example.sbuildrc: Add missing variable types and add
      $check_depends_algorithm.  [Jan-Marek Glogowski]
    * sbuild.1: Document --check-depends-algorithm [Jan-Marek Glogowski]

commit 45fd7755b63fb65c2936f61409f9fb4255af1a4f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 16:32:36 2007 +0000

    * sbuild:
      - filter_dependencies: Remove redundant conditional.
        [Jan-Marek Glogowski]
      - Add check for check-depends-algorithm option. [Jan-Marek Glogowski]
      - filter_dependencies: Change dependency behaviour depending upon
        check_depends_algorithm.  [Jan-Marek Glogowski]
    * Sbuild/Conf.pm: Add and export $check_depends_algorithm.
      [Jan-Marek Glogowski]
    * example.sbuildrc: Add missing variable types.  [Jan-Marek Glogowski]
    * example.sbuildrc: Add missing variable types and add
      $check_depends_algorithm.  [Jan-Marek Glogowski]
    * sbuild.1: Document --check-depends-algorithm [Jan-Marek Glogowski]

commit eef19523ef4fe3ecc805871ce380686ce1f677c5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 16:06:58 2007 +0000

    Add generated files.

commit d183c5e400de321f1de3c9c9b498ee9f224c0969
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 16:06:35 2007 +0000

    * chroot/README: Rename from README.buildd-chroot.  Remove
      buildd.chroot section.
    * bin/sbuild-createchroot: Moved from chroot/buildd.chroot.
    * sbuild-createchroot.1.in: Add manual page.
    * debian/manpages: Add sbuild-createchroot.1.
    * debian/rules: Install sbuild-createchroot, and add buildd.chroot
      compatibility symlink.

commit 65f6b8b9d78be281b2b0ff4c4cab4a70f6f6ddb9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 14:43:40 2007 +0000

    * chroot/buildd.chroot: Fix incorrect variable name.

commit 2461363a8fc3e71b28615d4f36bd4dcdea0bc4c5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 14:31:18 2007 +0000

    * chroot/buildd.chroot:
      - Remove /etc/passwd creation (already done by debootstrap).
      - Remove sbuild directory creation (already done by schroot).
      - Use here doc to set up /etc/apt/sources.list.
      - List sources.list.

commit 02926768074cbf9e3ab2fed9db385d96a77ce554
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 13:28:35 2007 +0000

    * bin/*: Reindent to increase readability.
    * chroot/*: Reindent to increase readability.
    * chroot/buildd.chroot: Add GPL boilerplate.

commit 122976cd2638ab8287d5a33685901eae64e58d57
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 12:39:41 2007 +0000

    Ignore *~.

commit ca6dbe47801a1a58800135beeb82dcce21e4496a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 12:39:06 2007 +0000

    * Sbuild/*.pm: Reindent to increase readability.

commit 0f578450b8c94fefb1f69dcfa3faa8d5a1c73cc3
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 19 23:52:22 2007 +0000

    * sbuild: build: Use unicode line drawing characters instead of ASCII.

commit a6fac48b588fe412cbd3186efd868708b7b8d68d
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 19 23:41:27 2007 +0000

    * sbuild: Reindent to increase readability.

commit 68506b2eb71acaf9e3e3fca203ae108fe6f53a39
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 19 22:31:03 2007 +0000

    * sbuild:
      - Add additional syntax checks.  Thanks to Jan-Marek Glogowski.
      - filter_dependencies: Remove redundant conditional.  Thanks to
        Jan-Marek Glogowski.

commit d984e776500bbcfda3a01b7aee7167c477a1247d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 17 08:01:41 2007 +0000

    buildd: Use --auto-give-back arguments correctly with newer sbuild
    option parser.  Thanks to Florian Lohoff.

commit 75e65d42e9422da504666de23735b7a8ae7733fb
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 17 07:58:49 2007 +0000

    * buildd: Log command-line arguments.  Thanks to Florian Lohoff.

commit fc84f604d74d2219ca7b32cfd8f2610991fa8754
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 17 07:56:10 2007 +0000

    * debian/control: Fix line wrapping.
    * debian/rules: Use prefixed binary names for installation.
    * abort-current-build: Re-add.

commit 538eb5630a26110f3f1756added8d3f09d248e75
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 2 15:03:36 2007 +0000

    * Sbuild/Chroot.pm: set APT::Install-Recommends to false inside the
      chroot (Closes: #449253).

commit 1a0f25e77430bc0f15868ebaa5543cc6cb7e61f2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 7 19:36:53 2007 +0000

    * debian/preinst: Use dpkg-query in place of /var/lib/dpkg/status.

commit b249999cda0db3148dc7660d7f3303c6f1058968
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 7 17:53:29 2007 +0000

    * sbuild
      - Fix --force-orig-source option which was renamed to
        --force_orig_source while rewriting the options parsing logic to use
        Getopt::Long (Closes: #428205).  Thanks to Alec Berryman for
        reporting this regression.
      - Accept arguments for options requiring a string (Closes: #431216).
        Thanks to Anders Kaseorg for the patch for this regression.

commit c43f8c2c4b0da7adf0e20bc2f26a3f252e0baa7f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 10 10:27:14 2007 +0000

    * sbuild
      - Fix --force-orig-source option which was renamed to
        --force_orig_source while rewriting the options parsing logic to use
        Getopt::Long (Closes: #428205).  Thanks to Alec Berryman for
        reporting this regression.

commit 41d3c639f27b8585dcb621c033534c258c2f925f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 23:42:10 2007 +0000

    * debian/control: Depend on debhelper v5.

commit 95ae0f2a288b5d831501eb4fb644f37c95ede985
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 23:40:24 2007 +0000

    * debian/changelog: Fix missing colon in bug closure for revision 0.2.4.

commit fc398f7692db9737e7ed710713fadf170f10b9ce
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 23:37:51 2007 +0000

    * debian/compat: New file.  Set to debhelper compatibility level 5.
    * debian/rules: Remove DH_COMPAT.

commit 6d3b52c7cc724f09210580cc6cd054b386c7a14f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 22:38:52 2007 +0000

    * Finalise for 0.55.

commit 7281024d945893a6edd9058740ad8a0bcf05930e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 22:35:39 2007 +0000

    * sbuild: build: When calling mv to move files, use -f to make sure it
      doesn't run interactively.

commit b30051df568f8605bd403b8def24f5bba38c120a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 22:20:55 2007 +0000

    * Sbuild/Chroot.pm:
      - end_session:
        + Add a debugging message.
        + Clear $schroot_session.

commit 04bab410ebbfce222122b6fd305488b90d1e10bb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 22:19:17 2007 +0000

    * Sbuild/Log.pm.in: open_log, open_pkg_log: Ignore SIGINT, SIGQUIT, SIGTERM
      and SIGPIPE in the logger processes, so that logging continues if the
      process group is signalled to terminate.  They will exit when the group
      leader exits or closes the pipe.

commit c4a3bd6911b45b9983543332b4c324efce8014b9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 22:15:49 2007 +0000

    * sbuild
      - build:
        + Remove the call to setsid when forking dpkg-buildpackage, because
          this broke shell job control.  Some packages might possibly hang
          while building if they detect they have a controlling terminal, but
          IMO this is a bug in the package.
        + When handling the timeout for dpkg-buildpackage, make the $SIG{'ALRM'}
          handler local, so that it is restored to the default once the build
          has finished.
      - Initialise $main::sub_task with a value, in case the build gets
        terminated prior to it being used.
      - Change to position of begin_session, so that it matches the cleanup
        order on shutdown.
      - shutdown: Call end_session to clean up the chroot.

commit 9ef2668b92a4abf8d14e1b4133e44402c8db010b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 26 13:30:55 2007 +0000

    * debian/NEWS: Renamed from debian/NEWS.Debian (Closes: #425370).
      Thanks to Lucas Nussbaum for spotting this.

commit 455f3852405d577a8fea72b8a6dea3dcca224281
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 26 13:26:32 2007 +0000

    * debian/NEWS: Renamed from debian/NEWS.Debian.

commit a1b15dab8341bde8d6ce6bc999163068b8ff96fe
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 26 12:53:07 2007 +0000

    * sbuild: Remove trailing whitespace.
    * Sbuild/Log.pm.in: Remove trailing whitespace.

commit bf5c69db2813d23904c4929b4244d216656a18aa
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 26 12:48:02 2007 +0000

    * sbuild: check_dependencies: If a toolchain package is missing, print a
      "not installed" message, rather than a blank version.

commit 63c2d3a30f37daeae596eaa6ce55ba4060e6c161
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 26 12:39:23 2007 +0000

    * sbuild: parse options with Getopt::Long.

commit e7ccc2368e24f94a04b778b889e256ef0c10866e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 26 10:18:32 2007 +0000

    * sbuild: merge_pkg_build_deps: Replace references to "central" src deps with
      build-essential deps.
    * Sbuild/Conf.pm: Add linux-libc-dev, gnumach-dev, hurd-dev and
      kfreebsd-kernel-headers to @toolchain_regex.  Thanks to Clint Adams
      (Closes: #425855).

commit 2adf2e9ad107924d95daf2b4f3c4ba6cb7230f3e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 26 10:09:33 2007 +0000

    * sbuild: parse_manual_srcdeps: New function, to replace the addition of
      manual source dependencies from the removed read_deps() function.

commit bc9a92666d794bac162d9b40546d0b84909a4ed2
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed May 23 21:10:38 2007 +0000

    * sbuild:
      - fetch_source_files: Strip the epoch of the version number, so that
        $dscbase matches the .dsc filename in the filesystem (Closes: #425715).
      - build: Document the regex which strips the epoch from the version
        number.
      - dsc_md5sums: Log failure to open the .dsc.

commit f5f478dd6bd01582a543bbb299473c5fdd531bd4
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 18 16:56:32 2007 +0000

    * Finalise for 0.54.

commit 6f273d38041265427edd47b7befebeed833b0b3e
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed May 16 21:13:59 2007 +0000

    * sbuild: Parse --arch option correctly, and fix broken --dist option parsing.
    * Sbuild/Chroot.pm: Cope with an empty arch argument.

commit 3a4d58fd0c44f132c503fa9b6742989894b07cb9
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 1 20:12:03 2007 +0000

    * Sbuild/Conf.pm: Remove the requirement for /usr/share/sbuild/sbuild.conf.

commit 6d8bbe8c8717c0909bcc4f4046371fef6bc4a499
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 9 23:02:16 2007 +0000

    * debian/NEWS.Debian: Document change in $sbuild_mode default.

commit 5b556db90116d8cc428f679e819042badd4f4310
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 9 22:58:50 2007 +0000

    * debian/rules:
      - Don't install sbuild.conf.local.
      - Install sbuild.conf into /etc/sbuild.
    * Sbuild/Conf.pm:
      - Define and export @no_auto_upgrade and %watches.
      - Remove the requirement for /usr/share/sbuild/sbuild.conf.
      - Mark deprecated/obsolete variables for removal post-Lenny.
      - Set defaults from global sbuild.conf.
    * sbuild.conf:
      - Add and document all options from Sbuild/Conf.pm.
      - Reorder into sections.
      - Merge with sbuild.conf.local, and install into /etc/sbuild.
    * sbuild.conf.local: Remove.
    * example.sbuildrc:
      - Replace all options with documented options from sbuild.conf.
      - Add additional user-centric options from sbuild.conf.
      - Reorder into sections.

commit 4309a4870fe22652c796b00bcf05912bfd1da3a2
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 9 14:08:46 2007 +0000

    Update date.

commit 0d5abecc75418a188c0319aee569df88e5f9d4e0
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 9 14:08:19 2007 +0000

    * sbuild: Added new command-line argument --arch to specify the architecture,
      and pass this to begin_session (Closes: 410576).
    * Sbuild/Chroot.pm: begin_session: take the architecture as a second argument,
      and check if a chroot specific for the architecture exists.
    * sbuild.1.in: Document --arch and chroot search order.

commit c0ca58f880323cb2a51cf9a2a416a3440bc15525
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 7 09:33:19 2007 +0000

    * debian/NEWS.Debian:
      - Document removal of building on the host system.
      - Document sudo->schroot migration.

commit dd1bf8b9001cd52ca37cc284cc78e91fa3ea2185
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 7 09:19:53 2007 +0000

    * sbuild: Use "du -k -s" instead of "du -s" to increase portability.  Thanks to
      Martin Koeppe (Closes: #418061).

commit 01a6e32a6a2ba501bfc3c31a1b365d7d3d04ae23
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 7 09:11:01 2007 +0000

    * Sbuild/Conf.pm: Define and export %alternatives.  Thanks to Martin Koeppe
      (Closes: #418060).

commit db4a08f4dcd635b57db34858db7fd6802e131233
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 3 13:27:06 2007 +0000

    * debian/control: Depend on dctrl-tools rather than the transitional
      grep-dctrl package.  Thanks to Jonh Wendell (Closes: #417573).

commit 3138b2fbfa17ddd1540bb1c5783cf16e9213930f
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 30 15:55:29 2007 +0000

    * sbuild: fetch_source_files: Only call dsc_md5sums once, rather than twice.

commit b6cc44b33a84091e2341187d620df8bea7167664
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 30 15:52:20 2007 +0000

    * sbuild:
      - Compute package, version, directory and whether to download sources
        before calling fetch_source_files, because all the needed information
        is available at this point.
      - fetch_source_files: Add extra directory, package, version and download
        arguments.

commit 4aa3c2a6de211dbcfd92dbceffbd36073bb8989a
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 30 12:48:21 2007 +0000

    * debian/changelog: Close #413524 and #413908.

commit 517b7b6d71c78647e33fce41f5f9b88688761902
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 30 12:05:28 2007 +0000

    * sbuild:  check_group_membership: New function to check the user is a member
      of the sbuild group (Closes: #414064).

commit f76fd2c709bce069148e5d5707b7346952d3a4ce
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 30 10:51:23 2007 +0000

    * sbuild: build: Remove obsolete code for running dpkg-buildpackage outside
      a chroot.

commit 1ff37a4f26d49b52e0bb0cb8f0d6a0d1db89042c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 30 10:45:32 2007 +0000

    * sbuild: Update copyrights, and encode in UTF-8.

commit ac9d76836b21b054c72ea4a614e3c3179881cccb
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 30 10:42:17 2007 +0000

    * sbuild
      - Quote all arguments to system commands such as "rm -rf", to prevent
        potential disasters.
      - build:
        + Don't chdir before running dpkg-source.
        + Don't chdir before running dpkg-parsechangelog (do it in the
          schroot child process).

commit 7375cff3876bacdb85f9178d0abcdb56350aea3d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 29 23:35:57 2007 +0000

    * sbuild:
      - fetch_source_files: Download sources directly into the chroot build
        directory.  For sources already existing outside the chroot, copy them
        into the chroot build directory.
      - get_dpkg_status: Print debugging messages with defined variables
        only, to avoid Perl warning.
      - verify_md5sums: Remove obsolete comment regarding chroots.

commit fcc5c3ff3cb68fcf5c5785282daa7307c2e54211
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 29 12:18:38 2007 +0000

    * debian/README.Debian: Remove requirements for chroot symlinks in working
      directory.

commit 2b1d944ec04f06a932526748c026303750c16ba9
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 29 12:00:35 2007 +0000

    * Sbuild/Chroot.pm:
      - _setup_options:
        + Remove use of $chroot_only.
        + Remove trailing / from 'Build Location'.
      - init: Add newline to debugging message.
      - strip_chroot_path: New function to strip the chroot location from a
        path.
      - log_command: Correctly log commands when no APT Options stripping is
        needed.
      - get_command_internal: Set the working directory inside the chroot to
        the build location.
    * Sbuild:
      - Add / separators to all users of $main::chroot_build_dir in paths.
      - Replace all users of regular expressions to strip the chroot dir
        from paths with strip_chroot_path.

commit 0aeb257f7956edef5569a5d153c091bcd9dc72bb
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 29 11:42:04 2007 +0000

    * Sbuild/Chroot.pm: init: Add newline to debugging message.

commit 2cb38d6678014f6bc1e8bd1a72e1d63355b44b47
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 29 11:18:42 2007 +0000

    * debian/NEWS.Debian: Document removal of support for building from a directory.
    * sbuild:
      - build: Remove support for building from a directory.
      - fetch_source_files: Remove support for building from a directory.

commit 8cd192c95b6e803ccf00d7c491ba3a7210acf4e1
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 22 10:06:00 2007 +0000

    * build: Replace "822-date" with "date -R".  Thanks to Guillem Jover for
      this patch (Closes: #415798).

commit 8b3e241618e644c8db7b45e957a6dd36b648f41f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 18 13:29:45 2007 +0000

    * sbuild: dump_main_state: New function to dump the program state using
      Data::Dumper.  Use to dump the state after each build.

commit 72a14e86ed9fc0ed9868dd767b96939aea0eb699
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 22:40:28 2007 +0000

    * sbuild:
      - cleanup_packages: Remove undo_specials().
      - install_deps: Remove @special use.
      - unpack_special_source: Remove.
      - undo_specials: Remove.
      - filter_dependencies: Remove @special use.
      - run_script: Remove.
      - parse_one_srcdep: Remove @special use.
      - get_special: Remove.
      - write_srcdep_lock_file: Remove @special use.
      - check_srcdep_conflicts: Remove @special use.

commit 4669616332f442ef431bf1953febf00aa5c45e12
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 18:29:31 2007 +0000

    * sbuild: Remove SVN Id:.

commit b5a6176f6d3ea44a8630eb8a563957d62a4507de
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 18:24:52 2007 +0000

    * bin/updatechroot, bin/upgradechroot, bin/chrapt: Remove chroot_mode.

commit 1f328f4c8c8839bf71e33651417a06572b96d637
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 18:21:10 2007 +0000

    * sbuild.conf: Remove $source_dependencies.

commit 0f14a2ab5a1907d9d3ed864a7e8af987374f5485
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 18:15:29 2007 +0000

    * sbuild:
      - build: Remove do_apply_patches.
      - apply_patches: Remove.
      - get_special: Remove use of @main::global_patches.

commit 6c4c71a7d977afaf156200ebc401363a256c6e93
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 15:29:29 2007 +0000

    * sbuild-setup.7.in: Update user section to document sbuild group membershipi
      and add_sbuild_user.  Remove chroot setup, which is now handled by schroot.

commit 7d6b6c226be12e68a709750a0375a0e073469de0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 15:10:18 2007 +0000

    * chroot/add_sbuild_user: Rewrite in perl.  Only call adduser; all other
      chroot setup is taken care of by the 50sbuild schroot chroot setup script.

commit 940f39a405018fd559178f94ac0fd5569cf10a6c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 15:09:05 2007 +0000

    * Sbuild/Chroot.pm: _setup_options: Remove use of $chroot_only.
    * Sbuild/Conf.pm:
      - Don't export $chroot_only.
      - Don't define $chroot_only.
      - Abort with an error if $chroot_only is defined.
    * sbuild.conf: Remove $chroot_only.

commit 64a2a235e110f5dfea44bb056a1cd018bf475aa9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 11:01:04 2007 +0000

    * debian/control:
      - Remove sudo from Depends.
      - Add schroot to Depends.
      - Remove schroot from Recommends.
    * debian/NEWS.Debian: New file.  Document removal of manual source
      dependencies and sudo.
    * sbuild: cleanup_packages: Remove check for schroot when removing build
      dependencies, since schroot is the default.
    * Sbuild/Chroot.pm:
      - Remove all special casing for sudo and schroot.  schroot is now the
        only supported method of accessing chroots.
      - end_session: Only attempt to end a session when $schroot_session is
        non-empty.
    * Sbuild/Conf.pm:
      - Don't export $sudo or $chroot_mode.
      - Don't define $sudo or $chroot_mode.
      - Remove sudo sanity checks.
      - Abort with an error if $sudo or $chroot_mode are defined.
    * sbuild.conf: Remove $sudo.
    * sbuild-setup.7.in: Remove sudo setup.
    * bin/README.bins: Remove sudo from extra package list.
    * chroot/add_sbuild_user: Remove sudo setup instructions and copying of
      /etc/sudoers to the chroot.
    * TODO: New file.  Document needed changes.

commit 57cccfd0449f999b549a134b7c6ba3e7c4d00a66
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 8 23:50:20 2007 +0000

    * debian/README.Debian: Document removal of manual src-deps.
    * sbuild: Remove read_deps, so manual src-deps are no longer read.  The
      remainder of the manual src-deps support remains to be removed.
    * Sbuild/Conf.pm:
      - Don't export $source_dependencies.
      - Don't define $source_dependencies.
      - Abort with an error if $source_dependencies is defined.
    * sbuild.conf: Remove $source_dependencies.
    * sbuild.conf.local: Remove $source_dependencies.

commit 29166b895a7f2db7bd39ab8878d121dba1bd9887
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 11 10:20:24 2007 +0000

    * Finalise for 0.53.

commit ac08472642e1ce615446836d31206dd61895a5df
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 10 20:24:46 2007 +0000

    * sbuild.conf: Obsolete $source_dependencies.
    * sbuild.conf.local: Obsolete $source_dependencies.
    * update-sourcedeps, update-sourcedeps.1.in: Remove (Closes: 409642).
      Thanks to Kenshi Muto for reporting that it no longer works.
    * debian/rules, debian/manpages, debian/README.Debian: Remove support
      for update-sourcedeps, and note that sourcedeps support is obsoleted
      and will be removed in Lenny.

commit b1a50f86f16f855c2ead925871e1fc9e74dbd126
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 10 19:52:51 2007 +0000

    * sbuild: fetch_source_files:  Add package information into the key of
    the %entries hash, in order to cope with multiple packages being returned
    by apt-cache.  Based on a patch by Goswin von Brederlow for Bug #408091.

commit d241c5b13216a3a64af9e24090338c697ca5a951
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 10 19:07:54 2007 +0000

    * sbuild: fetch_source_files: Correct indentation, and error with brace
      placement which caused apt-cache output to not be used.

commit d7cf5791d571890446993935eb7ddeda30842a61
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 10 19:00:31 2007 +0000

    * sbuild: When running apt-cache, divert STDOUT to the package log, so that
      warnings do not get mailed separately (Closes: #399178).

commit d3adf21e72393d7954e976da7609866b47893dd2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 22:13:05 2007 +0000

    * README.chroot-building: Refer to modern buildd chroot creation
      script in README.chroot-building.  Merge from upstream SVN cset
      106.

commit 1aaeadb7f5afdaa662d34ac33859fcc3c7e84f04
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 22:11:12 2007 +0000

    * wb-ssh-wrapper: New file.  Merge from upstream SVN cset 105.

commit fc98f75dc63f24b752148f43688436f4a64b1471
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 22:09:32 2007 +0000

    * buildd-make-chroot: Fix typos, and add some additional setup
      that the debootstrap backport on d.o doesn't currently do.  Merge
      from upstream SVN cset 104.

commit 8840afd21e196463d92b4f4c8fbe9dc5514b268c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 22:08:00 2007 +0000

    * buildd-uploader: Really fix for new dpkg.  Merge from upstream
      SVN cset 103.

commit 54f269765c81f708f0f37e4900180f17811b0be4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 22:06:44 2007 +0000

    * buildd-uploader: Update version regexes for new dpkg.  Merge
      from upstream SVN cset 102.

commit 352b1ba684d60f63fca743ef22608303afd88d0d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 22:04:22 2007 +0000

    * wanna-build-catdb: Rename from catdb.
    * buildd-vlog: Rename from vlog.
    * buildd-update-chroots: Rename from update_chroot.

commit 5cf6e641a8263c58229a83766716a45f664a8b33
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 22:02:28 2007 +0000

    * buildd-make-chroot: Merge from upstream SVN cset 101.

commit 9bf572d64ecca991bc21006cda248469935c6dab
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 20:52:07 2007 +0000

    * sbuild: get_apt_policy: Allow ~ in version numbers.  Thanks to Frank
      Lichtenheld for this patch (Closes: #407293).

commit bce1a069b677ec315e825b3bb345f50f85aff446
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 20:42:28 2007 +0000

    * sbuild: Set umask to 022 so that dpkg-buildpackage always runs with a sane
      umask (Closes: #405836).

commit 9be82c9878316f22fb3150c09538164c80917f65
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 20:29:17 2007 +0000

    * debian/changelog: Fix typo in closes syntax.

commit 510fef0e5682ad2886eaa18b4f7612a18e5d7956
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 20:27:15 2007 +0000

    * Sbuild/Conf.pm: Add and export check_watches configuration variable.
    * sbuild:
      - check_watches: Don't check watches if check_watches configuration
        variable isn't set (Closes: #397123).
    * sbuild.conf.local:
      - Add pgp_options from sbuild.conf (Closes: 398128).
      - Add check_watches.

commit 4e110cf9d3a93ef3b7332aa21ec28bf83b2900f0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 21 20:30:08 2006 +0000

    * sbuild: Remove incorrect WannaBuild:: prefix from version_compare.
    * Version 0.52.

commit 71329c284e02b25afb5833027a33b0c0a64c8df7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 21 09:15:31 2006 +0000

    * debian/changelog: Change incorrect maintainer email address.

commit 2298d38092ff26552f7820950010ec00d6bd3bcd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 21 09:09:08 2006 +0000

    * Version 0.51

commit e461c91e937ed1b278be4301a8672827b09206e1
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Oct 20 22:35:16 2006 +0000

    * debian/changelog: Finalise and set urgency to high.

commit 75ffcf6b697b84be39c05f955fb8cd9f78f2bd77
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Oct 20 22:28:05 2006 +0000

    * sbuild: chroot_arch():  New function to detect build architecture from
      within the chroot.  Thanks to Kees Cook (Closes: #392992).

commit 5a98e177fbc767994b84d009b24605e2cb32dea6
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Oct 20 22:12:17 2006 +0000

    * sbuild-setup.7.in: Correct example commandline for debootstrap.
      Thanks to Alex Pennace (Closes: #391277).

commit a7eb31c22d4b94157111d1667465fd082d8fa4e8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 14 21:39:46 2006 +0000

    * Close #392752.

commit 613eea0ab94fc71025c889027d214c153af325d0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 14 21:35:14 2006 +0000

    * Sbuild/Conf.pm: Fix check for schroot.  Thanks to Julien Danjou for
      finding this (Closes: #392751).

commit 63b826adf9ef0473fc86f8e3230802e6784c2f84
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 14 21:23:53 2006 +0000

    * sbuild: Don't run md5sum inside the chroot.  Thanks to Michael Banck
      (Closes: #392323).

commit 73d092d71ff4549617825a59797379c55a9d74e3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 14 21:03:00 2006 +0000

    * sbuild, Sbuild/Conf.pm, sbuild.conf.local: Add support for setting APT
      policy, to allow building from experimental and sarge-backports.
      Thanks to Wouter Verhelst for this patch, which has been slightly
      modified to add configurability and adapt to this version of sbuild.

commit ea74967f04f49633fda465b9f85c00b4631e005c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Sep 29 22:08:31 2006 +0000

    * debian/changelog: Mark as unreleased.

commit 0fceb38a13f23369541f8b9efecd1b3745664138
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Sep 29 22:07:15 2006 +0000

    * Revert accidental commit.

commit 9d32ee20d1bf50d857e8f43e2e0929b52e6ab4aa
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Sep 29 22:06:18 2006 +0000

    * Sbuild.pm: Fix handling of ~ in versions (merge from upstream SVN cset 100).

commit 9e6025227ea42af208b91f863320deaccd78227e
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Sep 29 15:04:29 2006 +0000

    sbuild: Run md5sum in the correct location.

commit d93ae1c735e1a950d1308ac11795c14015e3b76e
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Sep 29 13:10:47 2006 +0000

    * Version 0.50.

commit 321ed279f87c622409e31d12333155601c7dd3d3
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Sep 29 13:08:28 2006 +0000

    * chroot/add_sbuild_user: Add SHELL to sudoers env_keep.
    * Sbuild/Conf.pm: Check sudo does not strip SHELL from the environment.
    * sbuild-setup.7.in: Document needed addition of SHELL to sudoers env_keep (Closes: #389815).

commit c04b313a027f2f4af1aaac49bd0bbc8e3b94e6b8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 26 10:49:13 2006 +0000

    * debian/changelog: Initial version.
    * debian/control: Update package descriptions.
    * debian/copyright: Update with new download location and
      maintainers.
    * debian/sbuild.postinst: Remove.

commit 43837bbf41fe7228bf12981dd60ee9979037ead2
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Aug 22 21:55:41 2006 +0000

    * Sbuild.pm: Use new binNMU versioning scheme (+bn), taken from
      wanna-build SVN.  Thanks to Clint Adams (Closes: #384137).

commit 20f5eb60c3fc98e9fa975114af766e5970168f16
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 12 11:25:42 2006 +0000

    * sbuild:
      - dsc_md5sums: Return hashref on failure, rather than -1.
      - verify_md5sums: Only run md5sum if there is one or more md5sum to
        verify, to prevent md5sum waiting forever on stdin if there are no
        files to check.  Thanks to Daniel Stone.

commit a0d12d870ed4a5cba9e0670ea792e03f86c7a41f
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Aug 3 17:40:10 2006 +0000

    * chroot/add_sbuild_user: Fix chrapt command examples in output to use
      correct option syntax, thanks to Matthias Julius (Closes: #381186).

commit e245258f4ccecf375c2de2a6920c9e5c41462317
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Aug 1 22:17:31 2006 +0000

    * ChangeLog: New file.  Generate from subversion history.

commit 9913c6ebacebdf3abb05c79b8b286ca2ebc161b7
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jul 20 18:17:14 2006 +0000

    * debian/copyright: Add Alioth file download location.

commit edf600d99cfe85c407c8f2b9183d54bfa44d8109
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 15 22:42:55 2006 +0000

    * Version 0.49.

commit c86d2db7f6cb4c4430f644e20a702137411c82ad
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 15 22:41:55 2006 +0000

    * sbuild.conf, sbuild.conf.local, update-sourcedeps, sbuild.1.in,
      avg-pkg-build-time.1.in: Update to use the new configuration file
      locations.

commit a0410b0f685a781726274430da9703ce4be68ea6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 15 22:38:19 2006 +0000

    * sbuild.conf, sbuild.conf.local, update-sourcedeps, sbuild.1.in,
      avg-pkg-build-time.1.in: Update to use the new configuration file
      locations.

commit 95f28e07cdabad29e75b6b1f75c8829b909b21de
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jul 14 20:31:24 2006 +0000

    * Sbuild/Conf.pm: init checks if APT_CONFIG and DEBIAN_FRONTEND are
      being stripped from the environment by sudo (when running in split
      mode), and aborts with instructions for correctly configuring sudo.
      This prevents apt-get silently using the configuration from the host
      system instead of the chroot.

commit e31d752abcf12b3bc15e526de30f68685b1c5e5d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 9 17:20:20 2006 +0000

    * Sbuild/Chroot.pm: Use su, rather than sudo, inside the chroot.  This
      prevents the APT_CONFIG and DEBCONF_FRONTEND environment variables
      from being removed (Closes: #376020).
    * Sbuild/Conf.pm: Add $Sbuild::Conf::su.
    * sbuild-setup.7.in: Remove sudo configuration inside the chroot, now
      this is no longer required.

commit 85ca8b490059300939d2771e8d178a990faac70c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 17 11:05:10 2006 +0000

    * Version 0.47.

commit 9c5b643bc30ec808098b2ced448b236abf86e16c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 17 11:03:06 2006 +0000

    * Sbuild/Conf.pm: Remove $Sbuild::Conf::log_dir checks, and revert
      $Sbuild::Conf::srcdep_log_dir changes.
    * Sbuild/Log.pm.in: If $Sbuild::Conf::log_dir does not exist, try to
      create it, and if this fails, warn and log to stdout (Closes: #369718).

commit 6d6fda01065803e0460550faf21ec121d1b1d001
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 12 08:49:59 2006 +0000

    * bin/chrapt, bin/updatechroot, bin/upgradechroot: When chroot_mode is
      "schroot", chdir to / to ensure the CWD exists inside the chroot.
      Thanks for Clint Adams for finding this (Closes: #372806).

commit 06e6b28669542e4d3ee4db2bd54b1a3c946eecad
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 12 07:59:55 2006 +0000

    * Sbuild/Conf.pm: If $Sbuild::Conf::log_dir or
      $Sbuild::Conf::srcdep_lock_dir do not exist, try to create them before
      bailing out (Closes: #369718).

commit b70222e57c48a2442b778a15412dcf50da5a7664
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 11 13:58:28 2006 +0000

    * bin/checkchroot: Correct uninitialised value warnings due to using an
      undefined variable (Closes: #369709).

commit 9c5070ce8e0986911249d14e4e82bff9e8968915
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 10 22:43:28 2006 +0000

    * sbuild: fetch_source_files: When running apt-cache, check if we got
      valid output, and warn appropriately if the output is invalid
      (Closes: #369707).  Output may be invalid if there are no deb-src
      lines in /etc/apt/sources.list in the chroot.

commit c2fd2987eb435aea3a9d90cba193df10fcd468ea
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 9 13:06:16 2006 +0000

    Remove sbuild package.

commit 1f93c92f6e52608fbbdbe55131f73df24926254d
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 9 11:45:13 2006 +0000

    Remove files already in the sbuild package.

commit 3d1e7ed795270236e73478a05fd23d5335c2dbe7
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Jun 6 05:25:35 2006 +0000

    fix typo detected by lintian

commit d649858594608c92f24697abb15dfc1f11382949
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 27 14:22:48 2006 +0000

    * debian/control:
      - Update to Standards-Version 3.7.2.
      - Use Build-Depends, rather than Build-Depends-Indep.

commit 7c6c5177b5a3cffb95c3ffbf2ae5605a89331982
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 27 14:13:46 2006 +0000

    * Version 0.46.

commit 534001045b74e5ebc69fb0033020c2dc847caf83
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 27 13:03:47 2006 +0000

    * sbuild: get_dpkg_status: Make sure $version is defined before checking its
      value, to ensure the Debian version can have a value of 0.  Thanks to
      Santiago Vila for this fix (Closes: #368066).

commit b03ea47107cfa43cc38821da0ed2505360cbabf8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 27 12:44:34 2006 +0000

    * Update svn::ignore properties to ignore generated files.

commit fdbb58b23a1ccb74fa4169f564a293cedbd5b494
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed May 24 12:49:55 2006 +0000

    sbuild: fetch_source_files: Only print "apt-get update" invocation in debug
    mode.

commit 777d3e0bc019f41c56573ad7a15efaba4db15d43
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon May 1 08:48:38 2006 +0000

    Version 0.45.

commit 3bfacbafb1b6bc4353f278e65d523ce4d5f4afd3
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon May 1 08:48:05 2006 +0000

    * debian/control: Update to Standards-Version 3.7.0.

commit 8e3d421f5c0117268bde4cefde7a55455f815c45
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 29 09:53:59 2006 +0000

    * bin/chr-hold, bin/chr-unhold: On error, use Sbuild::Utility::shutdown
      to clean up.

commit 165994f8235ccc1eeef67b206dfad77c7662ecc0
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Apr 27 10:18:22 2006 +0000

    * bin/checkchroot:
      - Check if the dpkg and reference files contained any data, and exit
        with an error if either were empty (Closes: #363351).
      - On error, use Sbuild::Utility::shutdown to clean up.

commit 8fea8ee6bd1943596716391c258e1437d30e8d1a
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 11 18:55:46 2006 +0000

    * sbuild:
      - build: Only print dpkg-buildpackage invocation in debug mode.
      - uninstall_debs: Only print dpkg invocation in debug mode.

commit 5e562c0ac113cec64a875ad9fdc8e9b62e00ef22
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 7 08:48:47 2006 +0000

    * Version 0.44.

commit e9a28d5565b1edb3c5fed1cdff8d7e0e15551ef8
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 7 08:43:52 2006 +0000

    * sbuild: build: Delete erroneous _all.deb files (Closes: #357042).

commit 6920a13f6f22996338d9430a8f062aea1643baa6
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 7 08:42:27 2006 +0000

    * sbuild:
      - build: Use debian_files_list to check for missing or extra packages,
        and warn appropriately.
      - debian_files_list: New function to parse debian/files.

commit c28bf7e4bb01756958ae865529391553e9da515c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 7 08:37:25 2006 +0000

    * sbuild: Split verify_dsc_md5sums into two parts: dsc_md5sums and
      verify_md5sums.

commit f8e823abf9a4efbdc46f36fb4b5ed2d47e640710
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 7 08:31:48 2006 +0000

    * sbuild: Don't import internal Sbuild::Chroot functions.

commit ac671082b1efa685e356f6c0e08280500f325ba5
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 7 08:30:51 2006 +0000

    * sbuild: Don't import internal Sbuild::Chroot functions.

commit c8e8b87931a39f1b300eabe07871191f1f138426
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 7 08:27:59 2006 +0000

    * Sbuild: Use File::Basename::basename instead of Sbuild::basename.
    * Sbuild.pm: Remove basename function.
    * Sbuild/Log.pm.in: Use File::Basename::basename instead of
      Sbuild::basename.

commit 59c4744cdf1de17692829d83b04ffaed1653d96a
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Apr 5 16:11:51 2006 +0000

    * bin/checkchroot: Convert to Perl, using Sbuild::Utility.
    * bin/chrapt: Convert to Perl, using Sbuild::Utility.
    * bin/chr-hold: Convert to Perl, using Sbuild::Utility.
    * bin/chr-unhold: Convert to Perl, using Sbuild::Utility.
    * bin/gochroot: Convert to Perl, using Sbuild::Utility.
    * bin/updatechroot:
      - Convert to Perl, using Sbuild::Utility.
      - chrapt is no longer used (Closes: #355035).
      - Sbuild::Chroot is used for chroot access:
        + Suite names are no longer hardcoded (Closes: #355037).
        + APT Options are set correctly (Closes: #355038).
    * bin/upgradechroot: Convert to Perl, using Sbuild::Utility.
    * bin/common_functions: Remove; this is no longer used.
    * Sbuild/Utility.pm: New perl module for utility programs.  This is a
      perl replacement for bin/common_functions.
    * debian/rules: Install Sbuild/Utility.pm into /usr/share/perl5/Sbuild.

commit 7cc85a1eb146154ddcab96154182e44bcd1a430c
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 4 10:39:41 2006 +0000

    * sbuild:
      - Don't use File::Temp (only needed by modules).
      - Remove build directory check.
    * Sbuild/Chroot.pm:
      - Use File::Temp.
      - Don't export "internal" functions.
      - _setup_options: Set "APT Options" for schroot chroots.
      - log_command: Don't substitute CHROOT_APT_OPTIONS when no APT options
        are in use.
    * Sbuild/Conf.pm: Add build directory check (moved from sbuild).
    * Sbuild/Log.pm.in: Use File::Temp.

commit 0103a958e9d6a2fc6ab984d8a77fffaf88a4949f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 3 17:41:28 2006 +0000

    * avg-pkg-build-time: Use Sbuild::Conf.

commit 02a2cf209b2051a0d28e74ef439ed814a8c49518
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 3 17:40:45 2006 +0000

    * sbuild:
      - Die if no maintainer_name, uploader_name or key_id is specified.
      - Set and unset $main::binNMU_name in the main loop, rather than when
        opening and closing the package log.  In consequence, open_pkg_log
        now needs the package name only, and close_pkg_log does not need
        the package name passing.
      - build: Set $firstline to "" to quell a warning.
    * Sbuild/Conf.pm: Add and export $avg_time_db, $avg_space_db,
      $maintainer_name, $uploader_name and $key_id.
    * Sbuild/Log.pm.in:
      - open_pkg_log: Save the package name for future use; the binNMU name
        (if any) is passed, so this no longer needs computing.
      - close_pkg_log: Don't pass the package name, which was saved in
        open_pkg_log.

commit 89fd660a6f5d7708c602ee255431a14cd8ca7bd9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 16:35:39 2006 +0000

    * sbuild:
      - Remove unused $main::HOSTNAME.
      - Add build statistics to close_pkg_log.
    * Sbuild/Log.pm.in:
      - Don't use $main::HOSTNAME or $main::arch.  Get the values directly.
      - close_pkg_log: Obtain $main::pkg_status, $main::pkg_start_time,
        $main::pkg_end_time and $main::this_space from the function arguments.
      - add_space_entry: Use $space rather than $t, and don't use
        $main::this_space.

commit af306c072e0d827449e96f677f72c6ddc1df79b8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 16:00:27 2006 +0000

    * sbuild: Remove $main::cwd, $main::nolog and $main::verbose, now
      provided by Sbuild::Conf.  They are imported from Sbuild::Conf
      for backward compatibility.
    * Sbuild/Conf.pm: Add $cwd, $nolog and $verbose.  They exported and
      used by the other modules in place of the variables in the main
      package.

commit 698fc471ab69691e0492f1e14b7592214c4315ed
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 15:24:40 2006 +0000

    * sbuild: Pass $main::distribution to open_log and open_pkg_log.
    * Sbuild/Log.pm.in: Removed use of $main::distribution.  The
      distribution name must be passed to open_log or open_pkg_log.

commit 75298445ef0513ddf069df86e05e2b1845d6c74e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 15:15:26 2006 +0000

    * Sbuild/Log.pm: $main::main_logfile and $main::pkg_logfile are
      package variables.

commit ce7b8ce1f433383ec17864c968df5f14ccec42aa
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 15:03:20 2006 +0000

    * sbuild: Set $main::chroot_dir, $main::chroot_build_dir,
      $main::srcdep_lock_dir and $main::ilock_file from the current
      chroot $Sbuild::Chroot::current.  $main::srcdep_lock_dir replaces
      $conf::srcdep_lock_dir (which is still used to set when the chroot
      is set up).
    * Sbuild/Chroot.pm: Don't use $main::chroot_dir.  Add the build paths
      as 'Build Location', 'Srcdep Lock Dir' and 'Install Lock' to the
      chroot metadata.

commit a311a84d19794393593569302398cff89da02f55
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 14:36:25 2006 +0000

    * Sbuild/Chroot.pm: begin_session takes the distribution as its
      first argument, rather than using $main::distribution.

commit c06bc3d189a6be67e8ca5746971bc940000da13d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 14:22:34 2006 +0000

    * sbuild: Move $main::username to Sbuild::Conf.
    * Sbuild/Chroot.pm: Replace $main::username with $Sbuild::Conf::username.
    * Sbuild/Conf.pm: Add $username.

commit ab1a28953963997a889fe3cf88066659449c50ff
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 14:12:35 2006 +0000

    * sbuild: Use $conf::HOME instead of $main::HOME.

commit 7146da3c058ced7c396739aba620ac6ab2de6424
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 14:11:14 2006 +0000

    * sbuild: Import Sbuild::Conf into package "conf".  This allows the
      package name used by upstream to be used for backward
      compatibility.

commit 74d28e3e62f610d6c583c232c654a83138d33ae2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 14:08:13 2006 +0000

    * sbuild: Move $main::debug to Sbuild::Conf.
    * Sbuild/Chroot.pm: Replace $main::debug with $Sbuild::Conf::debug.
    * Sbuild/Conf.pm: Add $debug.

commit 4ec2463ec9dc65d7049075e8d107b806923ee97c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 13:57:31 2006 +0000

    * Sbuild/Chroot.pm: Use STDERR instead of PLOG (which may not be
      available).

commit b169db959705ecaa9f1e38bfde5eaca700237bd1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 13:51:47 2006 +0000

    * sbuild: Remove $main::chroot_apt_options.
    * Sbuild/Chroot.pm: Add an "APT Options" attribute to the chroot hash,
      to replace $main::chroot_apt_options.

commit fcf2088e7c27d700fb8f8c995c8227fa4f74d1fb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 12:39:34 2006 +0000

    * Sbuild/Chroot.pm: Don't hardcode a list of chroots; use a glob to
      search for chroot-* instead.  This allows any distribution name to
      be specified with -d.

commit e06a2db9cd7cbe1ab3c7d8476180f24604105351
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 12:37:07 2006 +0000

    * Don't import log_command from Sbuild::Chroot.

commit 5d4959c5e016b89f5a1933c8a69964d838330a85
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 12:21:14 2006 +0000

    * sbuild: Import needed module functions into the local namespace,
      to avoid long namespace prefixes on functions.
    * Sbuild/Chroot.pm: Don't export init and log_command.

commit 56c550392a674c65b5545c84d52e30142158dbbe
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 11:48:34 2006 +0000

    * avg-pkg-build-time.1.in, sbuild.1.in, sbuild-setup.7.in,
      update-sourcedeps.1.in, Sbuild/Log.pm.in: Rename and embed version and
      date tags for substitution.
    * debian/rules: Generate all manual pages and Log.pm in the build rule,
      and remove them in the clean rule.

commit ac2b159cb8e77275122e8ac981f2bb65e687ac97
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 11:40:40 2006 +0000

    * COPYING: New file (GPL licence text).

commit e56d409c09c87e2d6c92234e0b2a96c024d84749
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 10:50:13 2006 +0000

    * sbuild: Use the new modules Sbuild::Chroot, Sbuild::Conf and
      Sbuild::Log.  The functions moved into the modules have been removed.
    * Sbuild.pm: Add basename function.
    * Sbuild/Chroot.pm: New perl module for chroot operations.  It contains
      the functions begin_session, end_session, log_command,
      get_command_internal, get_command, run_command, exec_command,
      get_apt_command_internal, get_apt_command and run_apt_command.
    * Sbuild/Conf.pm: New perl module for configuration variables.  It reads
      the system and user configuration.
    * Sbuild/Log.pm: New perl module for logging.  It contains the functions
      open_log, close_log, open_pkg_log, close_pkg_log, add_time_entry,
      add_space_entry, send_mail and log_symlink.
    * debian/dirs: Add usr/share/perl5/Sbuild.
    * debian/rules: Install Sbuild/Chroot.pm, Sbuild/Conf.pm and
      Sbuild/Log.pm into /usr/share/perl5/Sbuild.

commit c0053d0cafcd2a892e933b1e154fa1fb2e42a4bf
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 1 21:07:45 2006 +0000

    * debian/control: Update uploaders.
    * debian/copyright:
      - Update with new subversion repository locations for upstream and
        Debian.
      - Add Roger Leigh as a copyright holder.
      - Add a reference to /usr/share/common-licenses/GPL.

commit 1193f4c4818eb687d2ef19a913c4b6c3f1bb09da
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 1 09:43:51 2006 +0000

    * bin/checkchroot:
      - Quote all variables.
      - Sort ref-chroot file before diffing (Closes: 360058).

commit 0fff9907c1d739e308eabdd3f06ab1a4e39cc1c3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 1 09:30:20 2006 +0000

    * sbuild: Treat schroot chroots with a "-sbuild" suffix in the same
      way as chroots without a suffix (Closes: #360124).

commit 9f95273fbf2e14fa17b59455b016e0a3a9fb4962
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 29 13:59:00 2006 +0000

    * Version 0.43.

commit 91b251e7b0f1a8c9ca8addb920a1aa5ff5d963d0
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 29 13:26:59 2006 +0000

    * sbuild: Add $conf::force_orig_source to allow --force-orig-source to be
      specified in a .sbuildrc.
    * example.sbuildrc: Add example $force_orig_source, with documentation.

commit 4113ce86c866aaf7de3bc3994d35a0072e29fca1
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 28 22:11:22 2006 +0000

    * sbuild.1: Correctly escape hyphens in option and file names.

commit c909e0dd941cb2794cb7b23b20aca6af4862cf93
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 28 22:02:36 2006 +0000

    * sbuild: Add --force-orig-source option to force the inclusion of the
      .orig.tar.gz (Closes: #318030).
    * sbuild.1: Document --force-orig-source option.

commit 0f8ea1df21e669a5d113cc3d59e700f4ccbe7518
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 28 17:55:45 2006 +0000

    sbuild: fetch_source_files: Remove redundant braces and reindent.

commit 72983c32297f584709fc8f76ce10c11063417822
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 28 17:52:15 2006 +0000

    * sbuild: Strip "./" from $pkg, so the name used for source dependencies
      is correct (Closes: #359747).

commit dfbac548acaddae7149d8df0322e7f8b48c0bf04
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 27 16:15:16 2006 +0000

    * sbuild: open_log(), open_pkg_log(): Don't buffer log output
      (Closes: #358717).

commit 05b7859d7890e914fdf6bbef37b4718b55aa4b6f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 27 09:54:39 2006 +0000

    * sbuild-setup.7: Use debootstrap rather than cdebootstrap.
    * chroot/README-buildd.chroot: Fix typo.
    * chroot/buildd.chroot: Use debootstrap rather than cdebootstrap
      (Closes: #358668).
    * debian/control: Recommend debootstrap rather than cdebootstrap.

commit bb89ac2d1f66b7c631b658e4b1d19be7c347f266
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 21 10:06:50 2006 +0000

    * sbuild: build(): Check for _all.udeb files which are built when they
      shouldn't (merge from upstream SVN cset 98).

commit 90b25195a0c91d992a63b19e3be77553acbe209c
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 20 21:33:01 2006 +0000

    * bin/common_functions, bin/README.bins: Remove ~/build/ from the
      chroot path, to match sbuild behaviour of searching in the
      current directory (Closes: #355034).

commit eb058978fdc6a6273e455e88c571cb0b27bb4a57
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 18 22:43:44 2006 +0000

    complain on _all.udeb files built when they shouldn't be, too.

commit 5b5b93dacff1bf72da5105c70afe55c153873ca7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 18 19:14:09 2006 +0000

    * bin/checkchroot: Set LC_COLLATE=POSIX to prevent collation issues
      (mismatches with the reference file; Closes: #294883).

commit d20a8b09997584e2b026912d2d49bbe5c04af221
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 18 19:10:32 2006 +0000

    * bin/common_functions: Allow any chroot name to be specified
      (Closes: #356785).
    * bin/README.bins: Document changed chroot syntax.

commit eb8db3ac3d06616096136f7892cefeaad6eabbf3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 18 17:55:11 2006 +0000

    * sbuild: check_dependencies(): Print kernel information along with the
      toolchain package versions, in the same style as reportbug.

commit 1751de5ed00b1684b97d2169f5ab16c785c4b016
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 18 17:33:36 2006 +0000

    * sbuild: open_log(), close_log(): Create the build log using File::Temp,
      in the form build-distribution-date.XXXXXX.log.  This prevents races
      during logfile creation when running concurrent builds.  If the file is
      empty, it is unlinked on close, irrespective of whether verbose mode is
      used or not.

commit 0e60ccded08b13e4d23ec1a657b8c56d1de6d23c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 18 17:14:54 2006 +0000

    setup_options(): Remove unused call to tmpnam().

commit 2456a7dea2dd44eca8ee53dba83342ecabcf5871
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 18 16:39:45 2006 +0000

    * sbuild:
      - open_log(), close_log(): Save a references to the initial STDOUT and
        STDERR, and restore them when the log is closed.
      - open_pkg_log(): Use the saved STDOUT for verbose logging.  This
        prevents the package log being also directed to the build log.

commit f6232854579aaffa0552ef62e611ebdcca5f4c42
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 17 12:18:54 2006 +0000

    * sbuild: log_symlink(): New function to create a symbolic link to the
      current package log.  This replaces the use of /bin/ln, which has races
      if concurrent builds use it.

commit c0dc19d0ae5c5d02cfe8b3380dbe4f976c9e29fe
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 15 12:54:29 2006 +0000

    * sbuild:
      - open_log(), open_pkg_log(): Use fork() rather than tee to multiplex
        log output.
      - close_log(), close_pkg_log(): Close all dup'd log streams, and don't
        kill the child log processes, which avoids dataloss in the pipeline.

commit a3ec2a4ff63c4b8f109a1c1ef79359ad0b294cfb
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 14 19:52:16 2006 +0000

    * sbuild: Add $conf::md5sum for security.

commit 139a5cde530d72cfeba0ee2c11c38b7d4cdb334f
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 14 18:55:33 2006 +0000

    * sbuild: When using schroot, look for a distribution named
      "$distribution-sbuild" in preference to "$distribution".
    * sbuild.1: Document schroot chroot naming.

commit 36bba084a773e994fda1e723958d3a4198976e59
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 14 17:27:25 2006 +0000

    * sbuild: build(), shutdown(): Quote kill command correctly
      (Closes: #356686).

commit 832e95098f856061c83b67ae69fa6527bd8424c1
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 14 10:03:39 2006 +0000

    * sbuild:
      - verify_dsc_md5sums(): New function to verify the MD5SUM of files in a
        .dsc file.
      - fetch_source_files(): Use verify_dsc_md5sums to check for incomplete
        downloads, and redownload sources if needed; also verify again after
        download (Closes: #270439).

commit 96f6832aff67ddc0e58a71bcbc1772ed186d87e8
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 13 00:14:25 2006 +0000

    * Version 0.42.

commit 6e8992969b94848fb4bd931b0c834477784e8333
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 12 18:43:24 2006 +0000

    * sbuild: Reindent.

commit 42347b127adf20a1bdc9a254c6fda20b0b7d7a7f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 12 18:40:53 2006 +0000

    * sbuild: Reindent.

commit e6604bbe1ee27f2b9988ce3ffcd47f53332e45a1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 12 16:55:37 2006 +0000

    * sbuild:
      - install_deps():
        + If there are no package dependencies, create an
          empty anonymous array reference to hold the (nonexistent)
          dependencies, required by filter_dependencies.
        + Make sure %entries is initialised.
      - fetch_source_files(): Check that the dsc specified is valid.

commit 9a17fd4fa47defec359239ab8f05d7500dee738b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 12 00:12:32 2006 +0000

    Fix typos.

commit dfdc30b0d7f4029cc1d534be6e134e8a733f2c67
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 23:38:45 2006 +0000

    Don't use PLOG before it's opened.

commit 6143aa1ce4f8a889f337427a920f69250104d0df
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 23:37:36 2006 +0000

    * sbuild: Always print toolchain packages.  This is done by always calling
      merge_pkg_build_deps(), and running all the way through install_deps(),
      even when the package does not supply any build dependencies or
      conflicts (Closes: #355040).

commit 0c34a103190d0225c4eae221eee922be25453f1f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 23:00:34 2006 +0000

    Close #183022.

commit e0c39337ae6e114b726b7eddaa7df5e53fd3babc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 22:59:36 2006 +0000

    * sbuild: $conf::build_dir defaults to $main::cwd if undefined.  It is used as
      the directory containing the build chroots, build logs, and current
      symlinks.
    * example.sbuildrc: Add $build_dir example.

commit bcf6a6442f5437f40ec05ac780a7b0eac8cca4df
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 18:42:56 2006 +0000

    Close 355802.

commit 997ad1c6da7e25f6c60e65a3dd25f127282bd311
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 18:41:40 2006 +0000

    * sbuild: setup_options: Make sure $main::dist_locations{"$distribution"}
      is defined.

commit 24997845f38218fa3e4202ad19140820cfc66d25
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 18:32:12 2006 +0000

    Close #170742.

commit 5dfc236834a87d794b42db0bf371c54dc3acf30f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 18:21:39 2006 +0000

    * sbuild:
      - The default sbuild_mode is "buildd".
      - open_pkg_log(): Create current-distribution symlink in addition to
        current.
      - $main::verbose is set by default if running on a tty.
      - LOG and PLOG are set to autoflush using IO::Handle.
    * sbuild.conf.local: $sbuild_mode defaults to "buildd".

commit cbf729dec70d97be69c9263324983fa37aee7a1a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 18:08:26 2006 +0000

    * sbuild
      - Use named signals, rather than numbers, for portability.
      - close_log(), close_pkg_log: If verbose is enabled, flush the log and
        wait a second before killing tee, to prevent data loss in the pipline.

commit f8cd363157076ff572dca6c577a078eb2b1511dc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 16:42:44 2006 +0000

    * sbuild: Require /usr/share/sbuild/sbuild.conf and optionally require
      /etc/sbuild/sbuild.conf.
    * sbuild.conf: Don't require local config file.
    * debian/dirs: Add etc/sbuild.
    * debian/rules: Install sbuild.conf as /usr/share/sbuild/sbuild.conf and
      sbuild.conf.local as /etc/sbuild/sbuild.conf.
    * debian/preinst:
      - New conffile.
      - Remove /etc/sbuild.conf.local if not locally modified.
    * debian/postinst:
      - Move /etc/sbuild.conf.local to /etc/sbuild/sbuild.conf if needed.
      - Reindent.
    * debian/postrm:
      - Unlink /etc/sbuild.conf if present.
      - Unlink files under /var/lib/sbuild.
      - Reindent.

commit 5e865028d1426ea93e7eb589db5c4e7ed930cf76
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 10 14:06:29 2006 +0000

    Add files to ignore.

commit a95a2396a4c5735d2a58c5ad9c1965930b3e35e1
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 9 23:07:41 2006 +0000

    * debian/rules: Remove "make clean" in clean target; there is no
      Makefile, so this is redundant.

commit f9162bd5a716571c786e9bdead96a12d05594850
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 9 23:03:21 2006 +0000

    * sbuild:
      - Remove unused variables @dist_parts and $main::nomail.
      - Use correct use syntax for File::Temp and Cwd, and initialise a
        number of variables which would otherwise be undefined, in order
        to remove run-time warnings.
      - Add a number of checks for undefined variables to remove run-time
        warnings.
      - Add -w to the shebang line, so sbuild always runs with warnings
        enabled.
      - All exec commands other than writing logfiles now use exec_command,
        so they get logged.

commit 534632cf744a52a2337cefe1e360d45ef9ca9ce6
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 9 21:47:12 2006 +0000

    * sbuild: Set the in the environment SHELL=/bin/sh, in case the user
      invoking sbuild uses a shell not available inside the chroot.

commit f2a5ce681c8d8f10457231354145edde05860ffd
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 9 21:33:52 2006 +0000

    * sbuild-setup.5:
      - Split chroot setup and user setup into two sections.
      - Document sudoers env_keep setup (Closes: #355072, #355604).
    * chroot/add_sbuild_user: Add sudoers env_keep example.
    * debian/README.Debian: Document existence of sbuild-setup(7).

commit e4c4b115c69b8e4a0e79f58ceca143eb168522e5
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 22:47:50 2006 +0000

    * sbuild: open_pkg_log(): Use correct Sbuild:: namespace for binNMU_version
      (Closes: #355861).

commit 389732b9a2bd77f1653fa477236e3defc3a85245
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 22:39:27 2006 +0000

    * debian/control: Recommend schroot 0.2.7 or later (for preserving the
      environment).

commit bc4c2f6bab158718a5321c75cf410a3ebcb84617
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 22:37:47 2006 +0000

    Update version to 0.42.

commit 650dd834ca68a20bf8c8ddf9132027be068f7972
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 22:16:09 2006 +0000

    * sbuild:
      - Fix error in options parsing.
      - Hide source downloading commands by default.

commit 50c9af34637db39b21533b31b4893b6d6ecec58c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 18:56:18 2006 +0000

    * sbuild:
      - Add a $conf::sbuild_mode, used to switch behaviour between user and
        buildd defaults.
      - Add a --quiet option, to opposite action to --verbose.
    * sbuild.conf.local: Add $sbuild_mode.
    * sbuild.1: Document --quiet.

commit 49cebfcb4c4d977e974fd90dc42bb43d72b2835d
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 13:18:16 2006 +0000

    * sbuild: get_command_internal(): When running schroot, preserve the user
      environment, needed for APT_CONFIG, DEBIAN_FRONTEND, etc..

commit 5c6983a5ce5499468e426a0d91f36e29ee521c3c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 12:28:49 2006 +0000

    * sbuild:
      - log_command(): Add an additional priority argument.  If nonzero,
        the message is always logged, otherwise is only logged if debug is
        enabled.
      - get_command(), run_command(), exec_command(), get_apt_command(),
        run_apt_command(): Add an additional priority argument to control the
        urgency of the log message, and pass this to log_command().

commit b4e85f0b511678afb513d7401288c8db43db1b46
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 12:10:01 2006 +0000

    * sbuild: move setpgrp() calls, so that all child processes run in the same
      process group as the parent.

commit 60a92e40c812995be8d038fb8e7b04650bb06e8f
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 7 22:06:21 2006 +0000

    * sbuild:
      - get_apt_command_internal(): Always add $main::chroot_apt_options.
      - get_command(), run_command(), exec_command(), get_apt_command(),
        run_apt_command(): chdir to $main::cwd to make sure the directory
        location also exists inside the chroot.

commit 0b95de5854143c15bc7f8e9102e7aa2521f85451
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 7 21:17:55 2006 +0000

    * sbuild:
      - get_virtuals(): Remove usage of $main::chroot_apt_options, which is
        added automatically by get_apt_command().
      - setup_options():
        + Ensure APT_CONFIG is set to the correct path depending upon the
          chroot_mode.  $chroot_aptconf is the absolute path to the file from
          the host system, while $aptconf is the absolute path when apt is
          run.
        + Only set $main::chroot_apt_options when chroot_mode is "split".
        + Always regenerate apt.conf, because when chroot_mode is changed, it
          will break APT unless rewritten.
        + Don't set "Dir" in $chroot_aptconf when in chroot_mode is "schroot"
         (because apt is run inside the chroot).
    * Sbuild.pm: Remove unused module 'IO'.
    * debian/control: Depend on perl-modules (for File::Temp).

commit 7857799554c6b819d2300df8036b6c3136cf7e04
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 7 16:58:12 2006 +0000

    * Sbuild.pm: Remove unused module 'IO'.

commit e9fceb79a8e84b21874d151cd84b90ca5991018f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 6 21:56:20 2006 +0000

    * sbuild: get_command(), run_command() and exec_command() only log the full
      command when debugging is enabled, otherwise only the short form is
      logged (Closes: #355043).

commit 5c7259fe025971588142d587ac8902c452cad06d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 27 19:09:10 2006 +0000

    * Version 0.41.

commit a41c1093e0b597510fa15b15e315580d32aa3058
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 27 11:39:39 2006 +0000

    * sbuild: setup_options(): Correct usage of a scalar reference rather than
      the scalar $main::chroot_dir (Closes: #354520).

commit 433356f4b137fde4687ad76b032dceda5c56ceb0
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 27 11:20:58 2006 +0000

    * sbuild: setup_options(): Set $main::chroot_apt_options in the same
      manner as upstream.

commit cd17e399afe734c934b6abcad2f62db3d49cbf76
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 26 22:22:19 2006 +0000

    Version 0.40.

commit 2c2fa11d4ff0a506a7184ba3935b5a6242b2d6ae
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 26 22:17:56 2006 +0000

    * schroot: get_schroot_info(): Parse schroot "--info" Type (chroot type)
      output, and if "plain", always set $main::dist_sessioncaps to 0
      ("plain" chroots may say they are session-managed, but do not
      support full session management, so they always need cleaning).

commit 7b6861fb1f18d8917855fe895d4979b6743c86ed
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 26 21:31:40 2006 +0000

    * sbuild: get_schroot_info(): Parse schroot "--info" Path (chroot location)
      output.
    * debian/control: Recommend schroot (>= 0.2.5), for its "Path" information
      in --info output, used for determining the chroot location.

commit 6a02aa88c031ff30109bcdbd4aa8457e9bf7baac
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 26 20:49:23 2006 +0000

    * sbuild: Fix typos in debug statement ($main::distribution rather than
      $main::distribtion, and $main::schroot_session rather than
      $main::scroot_session).  Thanks to Adeodato Sim�� for this fix
      (Closes: #354456).

commit c4732e93e10f7e0a9c8ca576b9b25cc2e5804312
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Feb 24 08:28:39 2006 +0000

    Remove \n from pkg_file filename, pointed out by rleigh@d.o

commit be370543eec9576e7c7a36ba5439ddd796272c2f
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Feb 24 08:26:07 2006 +0000

    Update svn:ignore for everything a debian package build produces

commit bee62e9f031695e13ebcc3614ef2b67505c3c15c
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 21 23:44:47 2006 +0000

    * Version 0.39.

commit ada43387eea36d38257a97b35f1e674dd00ac190
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 21 20:36:07 2006 +0000

    * sbuild: Add two debugging messages.

commit d0b2e535cca4581cd46933e65fcf86694fd0312b
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 21 19:29:40 2006 +0000

    * sbuild:
      - Add %main::sessioncaps to store whether or not a chroot is
        session-capable.  Check the schroot "Session Managed" attribute to
        determine session capability.
      - If a chroot is session-capable, skip running uninstall_deps().
    * debian/control:
      - Recommend schroot (>= 0.2.3-2), for its "Session Managed"
        information in --info output, used for skipping chroot cleanup.

commit db34d9f54c62aa52596ccb58c28fd044d9ccc751
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Feb 17 03:31:17 2006 +0000

    * Remove \n from strftime calls.  Suggested by bod@d.o after going over the
      sbuild segfault on mips and arm in gdb.

commit 602ffb65b93f7b2203f48a14cb069f7c5d9c2f8e
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Feb 16 21:36:36 2006 +0000

    * Update copyright notice (add myself as a copyright holder).

commit e4e6d921c7ee09a7e2a4c478d5fe833dbb0c8345
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 20:41:29 2006 +0000

    * fetch_source_files(): Merge from upstream SVN (cset 94); Strip trailing
      whitespace from each line in $dscfile/debian/.sbuild-build-deps
      early on, making all subsequent regexes simpler.

commit 4afdfe1e1dc22e93d19a029f1ec1846ca1fe6a3b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 18:13:59 2006 +0000

    Version 0.38.

commit 1bd0726d424297b9d4c12bc2a9211373cfae6a6b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 18:11:56 2006 +0000

    * get_apt_command() and run_apt_command() take an additional parameter,
      the user to run as, because not all commands need (or should) run as
      root.

commit 1ec726e07a88d470d59c06cb67ce10e86ebd5bef
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 16:42:52 2006 +0000

    Don't include full-stops in section headings.

commit a81f384f9ce28e42c711257b2b1e5bd282d4267e
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 16:28:42 2006 +0000

    * Cleanups to all manual pages.

commit 2f88d0aa42e8326928d81a6aabcb99ac5f4aafc2
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 15:40:43 2006 +0000

    * chroot/buildd.chroot:
      - Use "set -e" to abort on all errors (Closes: #342357).
      - Correctly quote all shell variables.
      - Use cdebootstrap rather than debootstrap.
    * debian/control: Recommend cdebootstrap rather than debootstrap.

commit bd4d16a99c5c9404ec03e080e33e104c212d827a
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 14:52:55 2006 +0000

    * chroot/buildd.chroot.pre-sarge: Remove.
    * chroot/README-buildd.chroot.pre-sarge: Remove (Closes: #308065).

commit b20b17a50c749c47ebf73e8bdf9da4d1d454da5b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 14:30:46 2006 +0000

    * sbuild-setup.7: New manpage.  This describes how to set up a chroot
      (Closes: #311363).

commit bb81bf9c7bb7296c357632eb0730b54f17d03251
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 10:13:13 2006 +0000

    * #287669 is also closed now full sudo access is no longer required.
    * example.sbuildrc: Single quote example email addresses in
      $maintainer_name, $uploader_name, and $key_id (Closes: #341327).

commit 198495bcc024548587099a9a80a58fe65ada7935
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 00:31:41 2006 +0000

    Correct command-line summary (Closes: #311589).

commit 5972ce476c837098984073d13a4268f1d14bed65
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 14 22:20:21 2006 +0000

    * sbuild.1: Update outdated information.  Correct macro usage and
      reindent.
    * debian/control: Recommend schroot.
    * debian/README.Debian: Update information about src-deps and schroot.

commit a93ad4239aa33886cd6a3490c5bb230b9a4fca03
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 14 19:18:46 2006 +0000

    * Add missing newline to log message.

commit 3b5b03e2cfeb04d7e08c2a43e82a83300c6dc99e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 14 19:16:25 2006 +0000

    * sbuild: Add schroot session management.  Sessions are created, run and
      removed automatically.  The current session is stored in
      $main::schroot_session.  setup_options is called once per build, in
      order to set up the session options.
    * sbuild.conf: $schroot_options defaults to "-q" to match the built-in
      default.

commit 40cae2d5806f0e3dffe65b37319520c45aa6cd93
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 14 19:10:24 2006 +0000

    * Use new commands for running commands inside and outside chroots:
      + Signing options for dpkg-buildpackage are double-quoted rather than
        single-quoted (because the main command is single-quoted).
      + All commands run in a pipeline are obtained with get_command() or
        get_apt_command().
      + All other commands are run with run_command(), exec_command() or
        run_apt_command().
      + check_space() only requires root access in the chroot.
    * Full sudo access is no longer mandatory when using the schroot
      chroot_mode.

commit 624bc099f3f9581367f5e83d3b525dc91a1cae4d
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 14 18:52:41 2006 +0000

    - New functions log_command() to log a command being run,
      get_command_internal() and get_apt_command_internal() to get a
      command string without logging it; these are used by get_command(),
      run_command, exec_command(), get_apt_command() and run_apt_command(),
      which do log the command being run.  Commands are logged in for all
      chroot modes.
    - get_apt_command() and run_apt_command() take an additional parameter,
      the command to run (apt-get or apt-cache).

commit 867788796f856dba3e0894d6a562fe0da1972d77
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 14 13:20:21 2006 +0000

    New function exec_command().  This is the same as run_command(), but
    runs the command with exec rather than system().

commit 6fd78e6b4c79d342419c09d071611cea41a152ea
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 13 23:40:07 2006 +0000

    run_apt_command: When using schroot, run command in a chroot, otherwise run
    on the host system.

commit 0c0d14d9f0333b750ee7f76a6a299294aa7a540f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 13 21:43:59 2006 +0000

    New functions get_command(), run_command(), get_apt_command() and
    run_apt_command() to run a command inside or outside the build
    chroot under the specified user, or run apt inside or outside the
    chroot (depending on the chroot_mode), respectively.

commit 59454777ee7763624fd23879ca7d39f4e3e6fe4b
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Feb 13 01:20:41 2006 +0000

    save some backtracking.  Thanks to bod@d.o

commit d7fe31c0595d6569ff865a8a3d26ce1d6795748d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 12 20:39:05 2006 +0000

    When $chroot_mode == "schroot", clear %main::dist_order and
    %main::dist_locations using an empty array, rather than undef.

commit a8d24a7457e7043f69bb855e0c79d5b90eb89cf1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 12 19:22:15 2006 +0000

    Remove check_dpkg_version().  This has not been necessary since the
    release of potato (Debian 2.2), which had a dpkg version 1.6.14.

commit 521e358d4c2c3ed2538837d2f7f6bc0f4b6439ea
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 1 22:07:57 2006 +0000

    Parse both "Location" (for backwards-compatibility) and "Mount Location".

commit a6145e29fe82bbfe107a13caeda6573c8818bd41
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 1 10:30:37 2006 +0000

    Move path and APT setup into a separate function, setup_options().

commit 3e0fa2d88a685b1e0d3f1385e29b1bbf0c724b42
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 1 10:23:02 2006 +0000

    Move schroot metadata parsing to a separate function, get_schroot_info().

commit 4497ec425477e5056d22f47872f212b161e504b0
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 31 13:03:15 2006 +0000

    Fix mail address.

commit e75204cde827dd695d5dba4bc2c11af006964ea7
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 31 12:59:23 2006 +0000

    Version 0.37.

commit 49252114c5792540ae82cf3105a311716c388ce9
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 31 12:50:13 2006 +0000

    * sbuild:
      - Parse the .changes rather than debian/files, so that the
        .dsc/.diff.gz/.orig.tar.gz are also copied back to ~/build.
      - Print information and contents of arch-all packages (closes: #321640).
    * debian/control: The maintainer field contains the list address.
    * debian/changelog: Close a number of historical bugs fixed with this release.

commit 28c3e0f511a9483e17cf124c4c72f86eb8c775b6
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Jan 30 22:54:07 2006 +0000

    add DEBIAN_FRONTEND to sudoers example defaults

commit acfd00606425bb8e1efeaa10ac0e8e85f89b7fc9
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Jan 30 20:22:03 2006 +0000

    As buildd-uploader now calls dupload with a single changes file, any error
    return from dupload most likely means that the job failed, so we treat it as
    such.

commit 6a1d7813b8f10ecea757d61d38bcc4615ee69f86
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Jan 30 09:00:57 2006 +0000

    Add comments of the needed sudoers entries, including Defaults entry needed
    for the stable security update

commit 12bc8a5feed56535dd9248772729732260778637
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jan 8 23:42:15 2006 +0000

    Fix to delete symlinks, too

commit 42fa7e6c3d9d4d305c29a48495657ea085a6b667
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jan 8 23:37:44 2006 +0000

    update version

commit 66b72fdcfb29fc351d8afa01ced5c7ca9726325c
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jan 8 23:35:34 2006 +0000

    * setup_system: don't bother with /etc/source-dependencies-* anymore
    * sbuild.postinst: remove obsolete /etc/source-dependencies-* files.

commit 1776cfb31314c6c55a64ad625240ad693aa37def
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jan 8 23:33:16 2006 +0000

    remove unmaintained rbuilder

commit a1f23504d6b1a3db0a0e2850742980b5db7b29af
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jan 8 23:28:02 2006 +0000

    don't install update-sourcedeps in the sbuild package anymore

commit ecfcec5e440766a7bd9802790c9d510d29225fa0
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jan 8 22:59:10 2006 +0000

    * make existance of source-dependencies optional
    * move username to end of su command

commit 96ef542518bb01261d89b2ec002d930fb7c2cc49
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Dec 12 00:00:14 2005 +0000

    make the sources.list more column-ized, use the mirror specified for initial
    install in the generated sources.list, fix up security related entries.

commit be425b072ce19dfe3945a995888c20764acacc64
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 9 09:37:00 2005 +0000

    Add support for building from experimental.

commit 2b71643dab11ee3f56fa4e0a440aa0da4682e136
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 8 23:12:08 2005 +0000

    Move "Package claims to have built" error message to the same place as
    upstream.

commit 7026a6c8bfc339a1d7703c159efab475f54fb3ec
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 8 22:45:26 2005 +0000

    cleanup_close: Set $main::current_job to "" and shutdown if
    $main::HOME/EXIT-DAEMON-PLEASE exists and we are running in batchmode.

commit 3a29a48bd4ba2f066a57ce273514b1ee450efab8
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 8 22:25:55 2005 +0000

    Add support for $conf::chroot_only, and default to only running in a chroot
    for security and safety.

commit 90e7d6057de509b66256a257bfe52e063af3c0ad
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Dec 2 07:33:59 2005 +0000

    remove Binary-NMU fields when a Dep-Wait'd package has a new sourceful version
    uploaded.

commit 6d3adc1c629a8d487cf79132aa5bcbaa72ff9b9b
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 1 22:48:57 2005 +0000

    Support new --make-binNMU options.

commit 75b56219ca51bd7f2805be2802079e124d49ee77
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 1 22:44:45 2005 +0000

    Add support for auto_giveback_socket: add an extra argument to
    --auto-give-back and add an ssh '-S' option to analyze_fail_stage().

commit d714e21f4eb27962f1f85fcfd34a07d2f9199da7
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 1 20:39:40 2005 +0000

    Merge whitespace changes.

commit 0b147dbbd24a77deba77f9754721af53a41dac13
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 22:45:26 2005 +0000

    Fix typo.

commit ee819e81eb30228af88e813896179f16067e311f
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 22:36:09 2005 +0000

    When running dpkg --set-selections, use $main::chroot_dir rather than
    $main::cwd/$main::chroot_dir, since we already include $main::cwd in
    $main::chroot_dir.

commit c3d09b6f0a88eabd4abd7c664dc178b63d222c0e
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 22:30:17 2005 +0000

    fetch_source_files(): Support versioned fetches with apt-get.

commit 4cd6cc659826651798be996a12607096a4110f4a
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 22:22:49 2005 +0000

    install_deps(): purge packages with "dpkg --set-selections".
    schroot support added in addition to upstream changes.

commit f23a60358a4fb9b5898b7784b3670503e60af698
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 22:11:09 2005 +0000

    run_apt(): Remove '*' from $pkgs and $rpkgs.

commit b3c7fc6b8600ca3aa6ed0e503d39fc343ae17253
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 22:06:35 2005 +0000

    get_dpkg_status(): Check $version is set and compute $result in the
    same manner as upstream.

commit 6dae96dae5328294d2cc6b5f5d9495bca29f0556
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 21:58:47 2005 +0000

    Remove support for --store-built-packages.

commit 51e9d136a7b645eb18d6e48b47939898371b5fc6
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 21:56:21 2005 +0000

    merge_pkg_build_deps(): Correctly separate depdendencies in $deps,
    and don't immediately return if there are missing packages.

commit 1307dd9a05b34b7658168cedfcbc10adc1d9f75f
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 23:35:02 2005 +0000

    build(): Remove dpkg-buildpackage debugging statements.

commit 19d67fc25bfb90ec4694db606c1d6f6e5f12b213
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 23:26:34 2005 +0000

    Add --use-snapshot for building with gcc-snapshot.

commit f6e90863729b343da640a788564990e3edfbf557
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 23:02:10 2005 +0000

    run_apt(): Complete support for "install-deps-env".

commit a201c197e735dc3cc4f3e31b705bb3f1261daae8
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 22:54:26 2005 +0000

    check_space(): Redirect stderr of du to /dev/null.

commit cd805b8514155f7fb3bc61928abb492b9fdcea8a
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 22:52:50 2005 +0000

    More whitespace and indentation changes.

commit ad9654e0384e5b76d1deb4afa4a75df1cda9c239
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 22:03:31 2005 +0000

    analyze_fail_stage(): support install-deps-env() and chdir to $main::cwd.

commit 00ca2e88d66f2535fbf68fc45b7a81d0e99b6f69
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 21:57:28 2005 +0000

    Add @main::toolchain_pkgs and @toolchain_regex.

commit 8cba8e37d6849d54fdab5a20b3719df721534419
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 21:40:47 2005 +0000

    Set $main::arch using $conf::dpkg.

commit 11316a2bc0bbe64280d0847e38f612eb1f25ed05
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 21:16:59 2005 +0000

    read_build_essential(): Read build-essential from $main::chroot_dir
    instead of the root filesystem.

commit 618cb4450318981925ca5775499e0fcc9c695864
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 21:10:13 2005 +0000

    Remove redundant assignment.

commit 63a476043a37d008e8857b287830943d1c4c9cf1
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 20:50:01 2005 +0000

    shutdown(): Don't close the package log if there is no current job.

commit 9a6dbdbbb9fd2db9a3f93e3512ae3459b6a4d3cd
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 20:32:38 2005 +0000

    + Merge whitespace and indentation changes.
    + Fix typos.

commit 2749d7f55b0791a83aef03dacf57a01c07c61e4b
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Nov 29 10:14:04 2005 +0000

    Fix Revision output to just have the revision
    Forget binNMU info when a new source comes along.
    Warn on packages that are in state Installed, but the version installed is less
    than the source version in w-b.
    If a package is in state Installed, but it doesn't have binaries from the
    current source version in parse_quinn, also move to Needs-Build.

commit b1268f5c2609d17170309c528718192787101fbc
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 28 22:38:05 2005 +0000

    Fix typo.

commit 055defc652520ccd739b27d03a12c6aa25be358c
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 28 22:36:56 2005 +0000

    Add $build_env_cmnd.

commit 6bdb3434effbd3efec0d177ebe3536fbf5be395f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 28 22:02:52 2005 +0000

    Add $conf::dpkg_source.

commit 9924cea957a00dec1b877ddf56bbb666aacde9f6
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Nov 28 03:20:50 2005 +0000

    * watch for EOF from STDIN when reading failure messages
    * update the source version if it's less than the packages in parse_packages
      (fixing the "why does that buildd build what was uploaded with the source?"
      problem)

commit 917a3f55c31689227a5a676e2ca1b7dbd94c48f5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 18:57:49 2005 +0000

    Move sbuild.conf.local changes outside the SVN merge section.

commit c48945a2b4802027a402ecf5bd2e517de42adb85
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 18:57:35 2005 +0000

    Make strftime() usage more consistent, with no trailing newline.
    This fixes an issue with the "current" symlink not being created due to the
    command-line being split over two lines.

commit 94192475d2358f3cf5bb0281daeac8c9a8513165
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 18:25:47 2005 +0000

    - sbuild.conf:
      + Update alternatives.
      + Comment out example %individual_stalled_pkg_timeout.
      + Empty @ignore_watches_no_build_deps.
    - sbuild.conf.local:
      + Use FHS-compliant pathnames, as in sbuild.conf.

commit 918085fb107bc9aaf45cdf16190d5884500e8523
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 18:08:47 2005 +0000

    Add full stop to SEE ALSO line.

commit 5986ea2137857d7bf1c2db42afbb87f0453b93d9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 18:05:40 2005 +0000

    example.sbuildrc:
    + Remove $hack_changes_for_frozen.
    + Update comments.

commit 9d3b6af9d78b811dc6c13dc97a3e76dc74f74b91
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 18:02:38 2005 +0000

    Add $conf::chroot_only for compatibility with upstream, even though we don't
    use it ourselves.

commit 774f63a3eb679810c4fedbaabd16c335e9bd9947
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 14:59:33 2005 +0000

    avg-pkg-build-space.1: Update text.

commit e4faf938b4137ecb4a67e617c9de62827705b755
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 14:22:19 2005 +0000

    + Remove watches.
    + Update alternatives.

commit 0026822d091016689962686c2d8194d61f6bb5a3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 14:13:00 2005 +0000

    + Delete binary-all packages that we didn't ask to be built.
    + By default, set APT::Get::AllowUnauthenticated to "true".

commit eaa7a85150b8c3e51f33685ee7be8f407a1b4b82
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 13:58:23 2005 +0000

    + Add REDO support for binNMUs.
    + Add stats generation for download+install, build and remove times.
    + Disassociate from the controlling terminal and make stdin /dev/null
      for the dpkg-buildpackage process.
    + Don't create entries to the sbuild log when a package claims to
      build an _all.deb, but doesn't.  Instead, warn to the build log.

commit 9a4bda864db5ec369a6fd50c6daf2d76bf772c3b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 12:26:55 2005 +0000

    Add Sbuild.pm (upstream WannaBuild.pm), and replace version_cmp() with
    Sbuild::version_compare().

commit 8e053c4127b741601e20a1847db512173583fe89
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 11:54:33 2005 +0000

    Fix support for '~' in version numbers.

commit a3fa6eb5d6356f78662772d708c9d1382acfa303
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 11:50:58 2005 +0000

    Hardware DEBIAN_FRONTEND to "noninteractive" when installing and purging
    packages.

commit fd022436e2512bcd35aad8e1a814fdfbca564f67
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 11:42:49 2005 +0000

    Allow arch: all packages to be built when $main::build_arch_all is true.

commit 9de4cc584cbbf31f893db89aaa89b432a50a4931
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 11:31:55 2005 +0000

    Use /var/lib/sbuild/apt.conf if it exists, and create it if it does
    not.  This fixes the problem of the root filesystem
    /etc/apt/apt.conf and /etc/apt/apt.conf.d directories being used,
    while the copies in the chroot filesystem are ignored.

commit 48f8b8a660fa519734e35ee6dbe3c47021f570ad
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 10:56:30 2005 +0000

    Use strftime() and getpwuid() instead of the external commands date and whoami.

commit c1173eb1e87f4226a20bee5c0b677ed9b7029a07
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 00:59:15 2005 +0000

    Output purged packages line by line, rather than all at once.

commit 348ae7362fb75bff86c4e07db5a6230de5d4e92c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 26 21:34:19 2005 +0000

    Always purge packages when building in a chroot.

commit dcb5bf45d57d23e3f0630fcd627461f0aad9c279
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 26 21:28:06 2005 +0000

    Split changes files sent in the log every 989 characters, to better
    conform to mail RFCs.

commit 1c55570f22498aa1515a173ac1ca68a7a8353298
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 26 21:21:19 2005 +0000

    Always show versions of installed build dependencies.

commit b7ae3083cbd8ecb8719d68955facef66231e75b8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 26 21:10:17 2005 +0000

    Split changes files sent in the log every 1000 characters, to better
    conform to mail RFCs.

commit 0b87cef16b53f406f581beba07b623465afe0c56
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 26 20:53:41 2005 +0000

    Update copyright notice with current FSF postal address.

commit b4126ac27254ca58fab4ab859ba0c7276eab7d90
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Nov 23 19:36:15 2005 +0000

    Fix duplicate copy of binNMU_version function for new versioning

commit de2e4bee7a6e7595510b90dc9623fc979e5a6950
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Nov 15 08:28:42 2005 +0000

    * (sbuild): Delete binary-all packages that we didn't ask to be built.
    * (buildd): specify a username when asking what's to be built (needs new
      wanna-build)
    * (wanna-build): store last seen timestamp for each buildd
    * update changelog version

commit 913b92b32efca113a3e4eeb13be0aba9c1eb94e0
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Nov 15 07:11:36 2005 +0000

    Include more setup commands.  Lay out chroot's by codename, for future auto
    suite-switching code (hopefully for etch release)

commit 4f505dfceb0e82d8498f3a5135a86b40dade98bb
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Nov 15 07:01:30 2005 +0000

    change defaults for security to use security-master

commit 6305164107853cf9e2cf746a747455d7ae85e6a2
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Nov 15 06:59:20 2005 +0000

    * move parse_date here from wanna-build binary.
    * change binNMU numbering to be {sourceversion}+b{binNMUnumber}

commit c2883a1ae12683e9c2df51c3272eca4ea7ddb72b
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Nov 4 04:00:29 2005 +0000

    add pwd infront of target if not specified, so the fstab entries will always
    work

commit 553d775cd50130ec7ac59b4603fabe736e895b66
Author: Ryan Murray <rmurray@debian.org>
Date:   Thu Oct 13 07:44:21 2005 +0000

    fix typo of database name

commit 8d9074b7ed69ffb87b7afb579dc4296a8333ae4c
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Oct 12 08:55:03 2005 +0000

    fix already building binNMU error message
    output what database w-b is running on when run with -v on the version line

commit 7290a7899f5869e39b1db2764be94a7d4be5dc1b
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Oct 11 16:50:10 2005 +0000

    Add regex for failure to connect to the ssh socket for newer openssh versions

commit 747938720a7010c3af576479dc27dbc8ef24371b
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Oct 11 10:42:08 2005 +0000

    * Add optional admin_users array that lists which users are allowed to use
    overall database admin commands such as --merge-*, --import, and --manual-edit
    * Ensure to-be registered binNMU version is newer than the currently installed
    version.

commit c92d85906d8c9fb552c9988d9cf01c981c8bbbd4
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Oct 3 05:24:35 2005 +0000

    Fix broken pkg_version_eq calls

commit b7c4f23fb4b1ba3c0c13dfe37a76e4154c576185
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Oct 2 00:14:00 2005 +0000

    * (wanna-build): add support for storing binary NMUs in the wanna-build db
      with --binNMU=# where # is the binNMU number to create.  You will be asked
      for the changelog entry if not specified with -m.  The Version field of the
      database entry will always track the source version from the sources files
      now, rather than the Packages files.  Version numbers for binNMUs can be
      specified as either the source version, or the full binNMU version number.
    * (buildd): add support for taking binNMUs from wanna-build, passing them
      to sbuild, and adding them to REDO.  Older buildds will delete binNMU redo
      lines from the redo file as being invalid, and will take binNMUs, but not
      attempt to build them.  BinNMUs are scheduled ahead of regular builds, and
      are always taken one-at-a-time, like weak_no_autobuild.  binNMUs show in
      the logfile as !#!pkg_ver, where # is the binNMU version number.
    * (sbuild): Add REDO support for binNMUs.  binNMU packages will only appear in
      the progress file as their binNMU version number while actually building,
      so buildd-vlog continues to work.  Otherwise, it will be the source version.
    * (buildd-uploader): Large rewrite to work better for buildds with slow or
      intermittent links.  The logfile is no longer locked the whole time
      buildd-uploader runs, so mail can still be processed.  Each package is
      uploaded in a seperate dupload process, and wanna-build state updated right
      after the upload is successful.  This also has the effect that one stalled
      upload will not prevent attempts at uploading the other packages.  Ensure
      that no more than one buildd-uploader can run at once; previously, after
      15 minutes, buildd-uploader would run anyways, possibly uploading duplicates.
      Take distribution field from changes files, rather than requiring the
      distribution field to be in a hardcoded list.
    * (buildd): removed stats generation for build time.
    * (sbuild): add stats generation for download+install, build, and remove times.
    * (buildd-watcher): output new time stats.  These won't be fully accurate
      from when one upgrades until the next stats generation, after which,
      they should reflect the full stats time period (one week by default)
    * (debian/control): update dependencies to indicate that buildd and sbuild
      need the latest versions of each other, due to the REDO format change and
      time stats changes.
    * (sbuild): disassociate from the controlling terminal and make stdin /dev/null
      for the dpkg-buildpackage process.  buildd already does this, but you didn't
      get that when run from the command line.
    * (sbuild): don't create entries to the sbuild log when a package claims to
      build an _all.deb, but doesn't.  Instead, warn to the build log.
    * (sbuild): workaround race condition while apt-ftparchive is running on the
      archive host.  The signed Release file doesn't match what is downloaded, so
      current apt deletes the list.  These cases are now given-back, rather than
      failed.
    * (abort-current-build): use a sudo'd perl to kill the dpkg-buildpackage
      process, incase sudo is being used by sbuild
    * (buildd): report errors while waiting for sbuild, and don't keep waiting for
      it if there are no children at all.
    * (sbuild.conf): default watch list to empty, most buildds run with clean
      chroots
    * (sbuild.conf): update alternatives, remove some ancient ones that aren't used
      anymore
    * (wanna-build): remove db entries that don't have any binary packages in the
      Packages files anymore.  If something is added to P-a-s, and the binaries
      removed, it was still showing as "installed" with the last built version.
    * (setup_system): add additional commented out adduser command for when you
      already have a buildd group
    * (setup_system): update chroot build command I:
    * (buildd-make-chroot): create /etc/hosts file in chroot
    * (buildd-make-chroot): Update debootstrap call to work with modern debootstrap
      that pull Build-Essential from the packages files.
    * (buildd-make-chroot): support etch
    * (many): Update FSF address again.

commit 720c817db9b8f6b7321099d8a630daf3cdcf5164
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 11 09:23:18 2005 +0000

    Update debhelper build dependency.

commit 57fd5ec9caf588c3cbffe52d16f8a490402302a3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 11 09:18:21 2005 +0000

    * debian/control: Update to Standards-Version 3.6.2.
    * debian/copyright: Use the new FSF address.
    * debian/conffiles: Remove.
    * debian/rules:
      - Use debhelper version 4 compatibility mode.
      - Move the find -maxdepth option to before non-option arguments, to
        fix find warnings.
      - Remove template comments.
      - avg-pkg-build-space symbolic link should be relative.

commit 6756b2a6919cb058453b21363c3816b71aed8eda
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 11 08:48:46 2005 +0000

    * debian/changelog: Convert to UTF-8.
    * sbuild:
      - Don't fail in the absence of central sourcedeps.  These are no longer
        required now source packages are required to have build dependencies,
        so this should not be fatal.
      - Added support for schroot:
        + Added $conf::chroot_mode.  This may be set to "split" (the
          historical default), or "schroot" (use schroot instead of sudo).
        + All operations using sudo now check the value of $chroot_mode, and
          use sudo or schroot accordingly.
        + When using schroot, %main::dist_order is filled using the schroot
          chroot priorities.
        + Added %main::dist_locations to store the location of the
          available chroots.
      - Print a readable error if a chroot does not exist.

commit 39249aaf24ef113bd1331a8376ae9ff51b7f9c36
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Aug 22 08:28:10 2005 +0000

    add missing $change++ in parse_quinn so that changes will actually be committed.

commit 4935441122dd605df2d340a9305cdde3efe6e58c
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Aug 22 04:04:53 2005 +0000

    really fix --uploaded with current buildd-uploader
    arbitrary priorities can be specified for a package.  It will apply
    to the current package for Needs-Build, Building, and Uploaded.
    It will apply to the next version of the package for Failed and
    Dep-Wait.  The priority will be reverted after that build.
    There is also a permanent priority setting, to change the default
    that the package will be returned to.

commit 85e6fea27754298e07774a7396ccca011820822a
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Aug 20 07:16:12 2005 +0000

    ensure --uploaded works with existing buildd-uploaders and epochs

commit 61a8d9022411121f6b89e779000333335c12140b
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Aug 19 22:08:44 2005 +0000

    AutoDepWait V1.  Catches the package (>= version) and (>> version) cases.
    Only applies to packages just moved to Needs-Build by the quinn merge, so there
    is a way to get out from behind them, if they are wrong for whatever reason.
      * split WB version compare functions to seperate perl module
      * use them from sbuild instead of forking dpkg for each comparison
      * further MLDBM optimizations and fixes

commit 6b043abdf21d288a7b533613dd34d35dde431fbe
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Aug 5 06:05:03 2005 +0000

    fix small error in dupload strings update

commit c4a7337e8961cdd973624b481096d727e63c69a4
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Jul 19 20:30:58 2005 +0000

    more removal of non-US.
    also check the security upload dir for deletions in one more place

commit f685bdbd533671032844f1f830b405cbceb205b2
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Jul 19 20:23:12 2005 +0000

    update dupload error strings for modern dupload

commit 119d78d8e0de1df24a690570737fa224b0a8c1f3
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Jul 15 18:19:32 2005 +0000

    parameters weren't being passed to pretend_avail()

commit 67d44c268170484b9d2733ea890e3e342fae9242
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jul 13 22:36:25 2005 +0000

    Treat "-" in quinn-diff priority fields as "unknown", rather than "-"

commit 4f4bcd77d5d5506f43ca6032a9e0572374e90c4f
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jul 10 07:44:21 2005 +0000

    Ensure a hash exists before a reference is passed to change_state, or the
    state change won't be recorded.

commit f098a5f660faf5386d703fdb2488bedd05684c3f
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jul 10 05:59:13 2005 +0000

    disable strict refs for now

commit 17a1011af3aee2dcc07e150f7235b501053dfd6e
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jul 10 05:45:42 2005 +0000

    Patch from Brendan O'Dea <bod@debian.org> for version comparisons to support
    ~ correctly.

commit 96404757d522ffd83c49ab71c8a2b4d392a4447e
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jul 10 03:15:56 2005 +0000

    And the big efficiency rewrite required by MLDBM.  It actually works now :)

commit 24fdeacfab8abc4d0902801feddac10a1c9922ed
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jul 10 00:26:04 2005 +0000

    fix strftime calls
    add --merge-all option to take exactly one of Packages, quinn-diff, and
    Sources.  Import them all, then clean the db.  Saves multiple opens of the
    database for daily maintenance.

commit a6f96efff2a25a3a09442983a0213dbde32ff54f
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Jul 9 23:59:45 2005 +0000

    use strftime instead of `date`, don't set a default arch (only used for parsing
    packages, which should always be specified), and only call hostname if we
    actually send mail.

commit f6f2dadbdc3bb8ba6aadea81bdf7b4a69acdf68b
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Jul 9 23:39:28 2005 +0000

    switch to Storable for MLDBM, as this is faster than the default of
    Data::Dumper.

commit fd29c13eb8261c9227991e9f6a4a53108e1c54c3
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Jul 9 23:19:30 2005 +0000

    Replace wanna-build's WrapDB class with MLDBM, resulting in a 3x speed
    improvement on database accesses.
    This change requires you to first --export your database with the old version,
    and then --import with the new one.

commit 9d15b00cda74a6dfe6f8000a8c3c980c567c3c3f
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jul 6 21:07:55 2005 +0000

    Fix ~ support in versions.

commit 11d04b611f1e599807de9f79ecdbdbf559834bcd
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jul 6 15:29:55 2005 +0000

    set DEBIAN_FRONTEND to noninteractive when purging packages, too.

commit 63d85d7cafdf7d439d916fce3f134c1c1129bde3
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jul 6 07:33:05 2005 +0000

    commented out example of chroot_only option

commit 5ba44ab9bfd09a4ea048e3dff06c19fff2f01589
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jul 6 07:27:05 2005 +0000

    add chroot_only mode, where sbuild will die if it's not building inside a
    chroot, rather than using the root

commit b11b8ffa291f8679ed450a1dd6ae34f0a52c8cd5
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jul 6 07:16:15 2005 +0000

    fix buildd-watcher to correctly report old files in chroots, too.

commit 3cef923cbaeb6b2c9348a51542ee29bb4ccf6aea
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jul 6 03:42:02 2005 +0000

    update $no_warn_pattern for ssh socket.

commit d0f117e3ad52b69b5df2b3350851bd562c7ae05e
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Jun 6 06:29:24 2005 +0000

    don't bother creating upload-non-US anymore

commit dd379661f443dd594aab6d77f49e12334b734564
Author: Ryan Murray <rmurray@debian.org>
Date:   Thu Jun 2 07:32:55 2005 +0000

    Update version

commit 7234ea2a5b1a9ae54a292d834292e9863e4bcfa1
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jun 1 09:28:43 2005 +0000

    sync with newraff, pointed out by Lamont.

commit 5bc1845716a33ba1de40812a0bac4ea1595cca7d
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jun 1 09:24:55 2005 +0000

    From Lamont: allow arch: all packages to be built when $main::build_arch_all
    is true.

commit 806fb95a857632addcffee014d8df172043a7ff0
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jun 1 09:16:58 2005 +0000

    Make sbuild more resilient about cruft in the status file (again),
    without undoing the provides and real package at the same time fix.

commit 457cd7b9dfb4c8fa7fff53c04d03e639a569cc5b
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jun 1 08:39:10 2005 +0000

    fix typo in fallback code

commit 1a048e98ff548e7191529091bebe712004aca9b2
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jun 1 08:37:21 2005 +0000

    use /var/debbuild/apt.conf if it exists.  If it doesn't exist, try to create
    it with the Dir ""; directive for the chroot.  If it can't be created, use
    the existing logic.
    
    This fixes the problem of the root's /etc/apt/apt.conf and /etc/apt/apt.conf.d
    directories being used, while the chroot's are ignored.

commit 46729936f744384598db96e65d8960e8e0723ab2
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jun 1 05:39:33 2005 +0000

    make it "work"

commit f8555668a822f44648fd9e5f1b95a2584e0c7024
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat May 28 22:31:25 2005 +0000

    remove buildd incoming dir from testing chroots

commit 8a3c00748b3be6fd39d0f8c0930a7c7cfe9d16a1
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon May 16 03:32:09 2005 +0000

    output commands to add to fstab

commit a574032cdfe9132c5322760d9f5172f9584c8f73
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun May 15 23:54:34 2005 +0000

    update line break code for the longest size mutt likes: 989.

commit e2edc4f21c5784ba30eef82a798e6afc9599055b
Author: Ryan Murray <rmurray@debian.org>
Date:   Thu May 5 07:37:50 2005 +0000

    update version

commit 78cd724a9a25c82a74dfd5d28cddf2a1f6910dac
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun May 1 19:32:30 2005 +0000

    remove use of external utilities where we already have functions imported that
    do the same thing

commit 68a23a1824e05fb2a37a8f79f5837e73af01c8ff
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun May 1 17:11:49 2005 +0000

    install buildd-make-chroot in /usr/sbin, rather than /usr/bin

commit 87f66453d87391aae5707113e133ff5bfc614979
Author: Ryan Murray <rmurray@debian.org>
Date:   Thu Apr 28 01:57:51 2005 +0000

    check EXIT-DAEMON-PLEASE in check_restart() instead of at the top of mainloop.

commit 33606561df12eeecbc03925ea1295efa1acaaed7
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Apr 25 11:00:50 2005 +0000

    fix for versioned depends with both provided and actual package installed;
    The versioned depends should always happen off the actual package.

commit 68875ef4a71fbbc530c9e23ff44e16e8e3c675d5
Author: Ryan Murray <rmurray@debian.org>
Date:   Thu Apr 21 09:35:29 2005 +0000

    include buildd-make-chroot in the sbuild package

commit 4ec8e3d938949f50469dd24f495f4fd72db21186
Author: Michael Banck <mbanck@debian.org>
Date:   Fri Apr 1 18:32:26 2005 +0000

    Final changes for 0.35 upload

commit dd1f3e83bc574f3a1eda7c817145e76a01fa5d5a
Author: Michael Banck <mbanck@debian.org>
Date:   Thu Mar 31 16:50:33 2005 +0000

    Reformatted changelog entry to comply with earlier bug-closing mannors

commit 06873dbdbc79d3c364875c426e66dcc3ec21f0f6
Author: Michael Banck <mbanck@debian.org>
Date:   Thu Mar 31 16:43:43 2005 +0000

    Add closes: tag for #292717

commit e4da82d2ab21f9726f17dadc55ce82e9b5e5ceec
Author: Michael Banck <mbanck@debian.org>
Date:   Thu Mar 31 16:42:48 2005 +0000

      * sbuild: Tolerate '0' as version number, thanks Santiago Vila.
        (closes: #300205)

commit 8bc963af8e83dacd8f8d7a6db27473ec2f1ba8ed
Author: Michael Banck <mbanck@debian.org>
Date:   Wed Mar 30 23:45:04 2005 +0000

      * Applied patch by Santiago Vila:
        - Moves scripts from /usr/lib/sbuild to /usr/share/sbuild and modifies
          all callers accordingly.
        - Add -n option to tail to comply with POSIX.
        - Call /usr/sbin/sendmail instead of /usr/lib/sendmail.

commit 8e41a44a369fb725f402db1c5c1280ef31c66ba1
Author: Michael Banck <mbanck@debian.org>
Date:   Wed Mar 30 23:29:13 2005 +0000

      * example.sbuildrc: Clarify that $maintainer_name is not mandatory and
        overrides Maintainer: field, whereas $uploader_name overrides
        the Changed-By: field in changes.

commit 04396ac6ef0ce6b9cf86f43e814a792d72408cce
Author: Michael Banck <mbanck@debian.org>
Date:   Wed Mar 30 00:56:25 2005 +0000

      * sbuild: Specify full path for Dir::Etc::main and Dir::Etc::parts.

commit 39bbeb1f9cc51e5d7db3a4e2d274d087c2be71b7
Author: Michael Banck <mbanck@debian.org>
Date:   Wed Mar 30 00:38:55 2005 +0000

     * sbuild: Only override Distribution in .changes if specified as option on
       the command-line. (closes: #300145)

commit 2a06ec8caf7cd41bfc4b430a34de3abad979f1be
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 26 23:50:39 2005 +0000

    update version

commit c2fef5394a73d2e95e048a5c6a8fe22dae131e94
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 26 22:47:49 2005 +0000

    output purged packages line by line like other external processes, rather than
    outputting everything all at once after the process finishes.

commit b1b1e9be28a835d242b29208f5a3cd014fb4ba6d
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 26 21:28:37 2005 +0000

    move unset_env call to read_config, remove from all the binaries.  Environment
    is unset before reading the config, so that any binaries referenced in the
    config with ` will have the sanitized environment.

commit 6f43b5fe49df8495423f2b3aae23e5a2b72bbedd
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 26 21:21:27 2005 +0000

    always purge packages if we're building in a chroot.

commit a7336ebfec167832a89bf707fd0e9a79bc0b5b3c
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Mar 25 19:25:43 2005 +0000

    move environment cleansing to Buildd.pm unset_env
    cleanse environment from buildd-mail, buildd-watcher, and buildd-uploader, too.

commit 51892028d341aae333d0a5c6ed93dc4ab3224752
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Mar 25 08:15:58 2005 +0000

    change length limit in changes to 990.  The RFC says 998, postfix's default is
    990, and others are somewhere in the 998-1000 range, or don't care...

commit 04979df8d31cda1365091f42f628d28f87c5f17e
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Mar 22 07:06:01 2005 +0000

    update version

commit 08609e7f929612ecc2c686b0943e963f6f7312ae
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Mar 22 07:02:13 2005 +0000

    re-append the slave option after the config is reloaded

commit bbeb9f598d8806b9f6bbd40daec76adc197f3038
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Mar 20 19:24:39 2005 +0000

    setup master link before doing rebuilds, incase they auto-giveback

commit 606ec7881540a4aafa5f851b32cb942a04a01752
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Mar 20 02:55:27 2005 +0000

    unset all locale related environment variables at startup
    kill ssh with TERM (which is caught) instead of HUP (which isn't)
    watch for the error message when the master is dead and the socket is left
    behind (Connection refused).

commit e7720a786b0587146397423f4abcf024b33b45b8
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Mar 20 00:53:19 2005 +0000

    update version

commit 7a48c0f43f9075c1a51b5d72043e8cdc62ccd4d8
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Mar 20 00:22:10 2005 +0000

    Always show versions of installed build dependencies.

commit 31909998e2cdc53c0d704777f9b09c3aaccd0430
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 19 23:18:02 2005 +0000

    add support for passing the buildd sshsocket to sbuild for autogivebacks.

commit 7a1e83f30df388d23a904581a18881d6b4363ab0
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 19 22:14:47 2005 +0000

    Make the mailing of rotated logs optional.

commit a18fc803b3dcbd0c224b7dfcee29d4e7b7704f9d
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 19 18:08:11 2005 +0000

    finish conversion of weak_no_auto to be per-dist

commit 77eb3fc5a4e548bdbd8cff4af9ec3f5d1736529a
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 19 16:48:48 2005 +0000

    add comment indicating that the socket must be a relative path

commit 52bb13f764a9f08f60ac252eed583d711fa8ccc2
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Mar 18 22:01:25 2005 +0000

    fix case where $conf::should_build_msgs is off to only build the prevfailed
    package once.

commit 9827d00f8ec15b75460250d3ceb58d1927b1e5c6
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 08:12:08 2005 +0000

    fix kill parameters and check for existence of the socket before starting a new
    master.

commit 88752911d2ee52c1b55f8834e7662fe48ed2fa1a
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 08:04:21 2005 +0000

    fix missing package qualifiers

commit ef4ec7580b319ed26b498c83ade6bbf5a92d4270
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 08:03:57 2005 +0000

    kill the ssh process before exiting or shutting down

commit ea8bcaad18c8d785aa973dc1820da653ffdd3d84
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 07:47:49 2005 +0000

    Revert wait-for-sbuild test, the extra check for ssh isn't needed.
    Add socket support to buildd-mail and buildd-uploader

commit ec3f139f23ce71d046d7f67ede4d1cdc58d34302
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 06:56:44 2005 +0000

    add support for ssh 3.9's -M and -S options.  set $conf::sshsocket to the
    filename for the socket.  Requires ssh 3.9 on both ends, and doesn't attempt to
    fall back if you have an older version installed.

commit 512e6aef6a9d90dc28608c21e1e225eae964a0dc
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 04:46:09 2005 +0000

    fix $conf::should_build_msgs and setting $conf::nice_level to 0

commit 75cdd378c73d27c239f6b05008730793df55f085
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 03:28:26 2005 +0000

    build weak_no_auto packages at the end of each dist, rather than after all
    dists, making it useful for security buildds.

commit 2d3681782f7a715149eef36ea8ddcb398115b1ed
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 02:36:38 2005 +0000

    add missing file handle

commit b8e396928d0930cdf387523b68779ee2cdb0e210
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 02:10:46 2005 +0000

    Split changes files sent in the log correctly, every 1000 characters, to better
    behave the mail RFCs.

commit 07257bdd0bf35a2ac6466c8cfb8ebb2622436b49
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 02:01:18 2005 +0000

    Misc cleanups to the source:
      * Add license to repository.
      * Update FSF address.
      * Update Copyright.
      * Set svn:eol-style to LF for all files
      * Set svn:keywords to appropriate values for files that use them.
      * Remove $Log$ keyword and contents where used (see revision 1 for the log)
      * Set svn:mime-type for several files

commit 64a4283468acad981b80d49accb7b6594aeff630
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Mar 15 20:05:09 2005 +0000

    initial import to svn

commit 36979e460b959ea3f6bc28d08b2e3f47b6de83e8
Author: Subversion Mirror <root@localhost>
Date:   Fri Jun 9 11:26:15 2006 +0000

    SVM: initializing mirror for /trunk/buildd

commit bc65d30105e767ef8ed0606e2a14bd6288cc2b22
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 9 09:39:53 2006 +0000

    Add buildd project.

commit beff91eebe2b47aa3d2f404e84162e1d29c0b623
Author: Michael Banck <mbanck@debian.org>
Date:   Tue Jan 25 11:19:59 2005 +0000

    Fixed up changelog to not get CVS commit messages

commit 58fc2f0facc5cc118b8a4d0faa5ac004461691e2
Author: Michael Banck <mbanck@debian.org>
Date:   Tue Jan 25 11:14:38 2005 +0000

    Add closes #287672 to changelog

commit 93aa87c75a0854d63a89ec27a2c90c2daefa5a87
Author: Michael Banck <mbanck@debian.org>
Date:   Tue Jan 25 10:40:52 2005 +0000

      * sbuild: Removed check for specific distributions. Instead, fail if
        build/chroot-$dist is not there.

commit 0396469e73652e461801c0bc9cdb53ccb37c3572
Author: Michael Banck <mbanck@debian.org>
Date:   Sat Jan 8 23:08:34 2005 +0000

      * sbuild: Set the locale to `POSIX' to make debconf and debhelper calls in
        the chroot not spew out locale warnings all the time.

commit 190b929bca6b118f166ba7eec0d3c2f4136da1e4
Author: Michael Banck <mbanck@debian.org>
Date:   Sat Jan 8 22:39:12 2005 +0000

      * bin/abort-current-build: Remove the `-B' from the grep line as
       `sbuild -s' does not pass that option to dpkg-configure and abort-
        current-build fails in that case.

commit 3b7d782fb1ccb89ddc12dfec60ee54d53a30c437
Author: Michael Banck <mbanck@debian.org>
Date:   Sat Jan 8 22:27:21 2005 +0000

    * bin/abort-current-build: Remove the -B from the grep line as sbuild -s does not pass that option to dpkg-configure and abort-current-build fails in that case.

commit ca7ee72a00c211fa0f7ec2bbb091120307024f60
Author: Francesco Paolo Lovergine <frankie@debian.org>
Date:   Thu Sep 30 11:19:17 2004 +0000

    Little modification to last note.

commit 0c360071e0b01681971a61720768d8298eb50feb
Author: Francesco Paolo Lovergine <frankie@debian.org>
Date:   Thu Sep 30 11:16:53 2004 +0000

    Missing file cvslogs.old added to CVS repo.
    Changed rules to correctly manage configs and chroot files copies, due to new CVS dirs.

commit 6116491261c325af339b7da6a903a955f8efd433
Author: Francesco Paolo Lovergine <frankie@debian.org>
Date:   Thu Sep 30 11:06:14 2004 +0000

    Minimal change to doc for configs.

commit 92f6d3a0055b6ecb35bd549e0e979d320fb39272
Author: Francesco Paolo Lovergine <frankie@debian.org>
Date:   Wed Sep 29 12:58:10 2004 +0000

    New ref-* uptodate for sarge/sid.
    Changed depends and checkchroot to solve critical bug.

commit 3aa23f7bf188b4e8b0ea1a841a3d1c5909c25806
Author: Francesco Paolo Lovergine <frankie@debian.org>
Date:   Fri Sep 17 13:17:40 2004 +0000

    Initial revision
